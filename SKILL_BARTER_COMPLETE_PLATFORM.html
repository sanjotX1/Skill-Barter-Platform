<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SKILL BARTER BOARD - OPTION C ENTERPRISE EDITION (190+ FEATURES)</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
        /* SKILL BARTER BOARD - COMPLETE PLATFORM WITH ALL 190+ FEATURES  */
        /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Dark theme by default */
            --primary: #1e40af;
            --secondary: #0099cc;
            --accent: #ffa500;
            --dark-bg: #0b1220;
            --card-bg: #0f1724;
            --text-light: #e6eef6;
            --text-muted: #9aa4b2;
            --success: #00d084;
            --warning: #ffa500;
            --danger: #ff4757;
            --bg-grad: linear-gradient(135deg, #071027 0%, #0b1220 50%, #0f1724 100%);
            --light-text: #1a1a1a;
        }

        body {
            font-family: 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
            background: var(--bg-grad);
            color: var(--text-light);
            min-height: 100vh;
            overflow-x: hidden;
            transition: background 0.3s ease, color 0.25s ease;
        }

        /* Light theme overrides (applied when body has .light-mode) */
        body.light-mode {
            --dark-bg: #f8fafc;
            --card-bg: #ffffff;
            --text-light: #111827;
            --text-muted: #6b7280;
            --bg-grad: linear-gradient(135deg, #f8f9fa 0%, #f0f3f7 50%, #ffffff 100%);
        }

        /* HEADER & NAVIGATION */
        header {
            background: var(--card-bg);
            backdrop-filter: blur(8px);
            padding: 1.2rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
            border-bottom: 1px solid rgba(255,255,255,0.04);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
            transition: background 0.25s ease, color 0.25s ease, border-color 0.25s ease;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary);
            cursor: pointer;
        }

        .theme-toggle {
            background: var(--card-bg);
            border: 2px solid var(--primary);
            color: var(--primary);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s;
        }

        .theme-toggle:hover {
            background: var(--primary);
            color: var(--dark-bg);
        }

        /* SIDEBAR NAVIGATION */
        .sidebar {
            position: fixed;
            left: 0;
            top: 80px;
            width: 250px;
            height: calc(100vh - 80px);
            background: var(--card-bg);
            backdrop-filter: blur(6px);
            padding: 2rem 0;
            overflow-y: auto;
            border-right: 1px solid rgba(255,255,255,0.04);
            transition: background 0.25s ease, color 0.25s ease, transform 0.3s;
            z-index: 500;
        }

        .sidebar-item {
            padding: 1rem 1.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 1rem;
            color: var(--text-muted);
            transition: background 0.2s ease, color 0.2s ease, transform 0.2s ease;
            border-left: 4px solid transparent;
        }

        .sidebar-item:hover {
            color: var(--primary);
            background: rgba(255,255,255,0.03);
            border-left-color: var(--primary);
            transform: translateX(6px);
        }

        .sidebar-item.active {
            color: var(--primary);
            background: rgba(255,255,255,0.04);
            border-left-color: var(--primary);
            font-weight: 700;
        }

        /* MAIN CONTENT */
        .main-content {
            margin-left: 250px;
            padding: 2rem;
            min-height: calc(100vh - 80px);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        /* Dashboard polish */
        .stat-box{display:flex;flex-direction:column;align-items:flex-start;gap:6px}
        .stat-number{font-size:2rem;font-weight:800;color:var(--accent)}
        .stat-label{font-size:0.95rem;color:var(--text-muted)}
        .progress-bar{background:rgba(0,0,0,0.08);border-radius:999px;overflow:hidden}
        .progress-fill{height:100%;background:linear-gradient(90deg,var(--accent),#ff8c00);transition:width 600ms cubic-bezier(.22,.9,.36,1)}
        .badge{padding:6px 10px;border-radius:999px;font-weight:700}
        .badge-primary{background:rgba(255,165,0,0.12);color:var(--accent)}
        .badge-success{background:rgba(0,208,132,0.12);color:var(--success)}
        .activity-item{background:rgba(0,0,0,0.03);padding:10px;border-radius:8px;margin-bottom:8px}
        /* Charts */
        .chart-wrapper{display:flex;gap:16px;align-items:flex-start;flex-wrap:wrap}
        .chart-card{flex:1;min-width:320px}
        canvas.chart-canvas{width:100%;height:260px;background:transparent;border-radius:8px}
        .chart-legend{display:flex;gap:12px;align-items:center;margin-top:8px}
        .chart-legend span{display:flex;align-items:center;gap:6px}
        .chart-key{width:12px;height:8px;border-radius:2px;display:inline-block}
        .chart-tooltip{position:fixed;pointer-events:none;background:#ffffff;color:#1a1a1a;padding:8px 10px;border-radius:6px;box-shadow:0 6px 20px rgba(0,0,0,0.15);font-size:0.9rem;display:none;z-index:20000;border:1px solid #e5e7eb}
        /* Micro interactions */
        .card-bg .btn { transition: transform 160ms ease, box-shadow 160ms ease }
        .card-bg .btn:active { transform: translateY(1px) scale(0.998) }
        .card-bg:hover .btn { transform: translateY(-2px); box-shadow: 0 10px 30px rgba(255,165,0,0.2) }
        .card-bg:hover { box-shadow: 0 20px 60px rgba(0,0,0,0.12); }

        /* Course card hover */
        .card-bg .course{transition: transform 220ms cubic-bezier(.2,.9,.3,1), box-shadow 220ms}
        .card-bg .course:hover{transform: translateY(-6px); box-shadow: 0 18px 40px rgba(0,0,0,0.12)}

        /* Modal */
        .modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.4);z-index:12000}
        .modal.hidden{display:none}
        .modal-card{background:rgba(255,255,255,0.98);border-radius:12px;padding:20px;max-width:720px;width:92%;box-shadow:0 24px 80px rgba(0,0,0,0.15);border:1px solid #e5e7eb}
        .modal-card h3{margin:0 0 6px;color:var(--primary);font-size:1.5rem}
        .modal-actions{display:flex;gap:10px;justify-content:flex-end;margin-top:16px}
        .tiny-muted{font-size:0.85rem;color:var(--text-muted)}

        /* Actions grid */
        .actions-grid{display:grid;gap:12px}
        .action-card{background:linear-gradient(180deg, rgba(255,255,255,0.5), rgba(0,0,0,0.02));padding:12px;border-radius:12px;cursor:pointer;border:1px solid rgba(0,0,0,0.08);transition:transform 200ms,box-shadow 200ms}
        .action-card:focus{outline:3px solid rgba(255,165,0,0.2)}
        .action-card:hover{transform:translateY(-6px);box-shadow:0 18px 40px rgba(255,165,0,0.2)}

        /* ripple */
        .ripple{position:absolute;border-radius:50%;transform:scale(0);animation:ripple 600ms linear;background:rgba(255,255,255,0.15)}
        @keyframes ripple{to{transform:scale(4);opacity:0}}

        /* CARDS & SECTIONS */
        .card-bg {
            background: var(--card-bg);
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
            transition: all 0.3s;
            animation: slideUp 0.5s ease-out;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card-bg:hover {
            border-color: var(--accent);
            box-shadow: 0 8px 24px rgba(255, 165, 0, 0.15);
            transform: translateY(-5px);
        }

        h1, h2, h3 {
            color: var(--primary);
            margin-bottom: 1.5rem;
        }

        /* BUTTONS */
        .btn {
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent), #ff8c00);
            color: #ffffff;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #ff8c00, var(--accent));
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(255, 165, 0, 0.3);
        }

        .btn-secondary {
            background: var(--primary);
            color: white;
        }

        /* LOGIN & REGISTER STYLES */
        .auth-page {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #a8c5e0 0%, #d1dff0 50%, #e8ecf5 100%);
            z-index: 2000;
            animation: fadeIn 0.5s ease;
        }

        .auth-page.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .auth-container {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            border: 2px solid var(--primary);
            border-radius: 20px;
            padding: 2rem;
            max-width: 520px;
            width: calc(100% - 48px);
            box-sizing: border-box;
            margin: 1rem auto;
            max-height: calc(100vh - 80px);
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(30, 64, 175, 0.15);
            animation: slideDown 0.5s ease;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .auth-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .auth-header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, #00d4ff 0%, #ff6b9d 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .auth-header p {
            color: var(--text-muted);
            font-size: 0.95rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--light-text);
            font-weight: 600;
            font-size: 0.95rem;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 0.9rem 1rem;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.98);
            color: var(--light-text);
            font-size: 1rem;
            transition: all 0.3s;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: var(--accent);
            background: rgba(255, 255, 255, 0.99);
            box-shadow: 0 0 20px rgba(255, 165, 0, 0.2);
        }

        .form-group input::placeholder {
            color: var(--text-muted);
        }

        .auth-tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            border-bottom: 2px solid #e5e7eb;
        }

        .auth-tab-btn {
            flex: 1;
            padding: 1rem;
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
            margin-bottom: -2px;
        }

        .auth-tab-btn.active {
            color: var(--accent);
            border-bottom-color: var(--accent);
        }

        .auth-tab-btn:hover {
            color: var(--accent);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .auth-btn {
            width: 100%;
            padding: 1rem;
            background: linear-gradient(135deg, var(--accent), #ff8c00);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 0.5rem;
        }

        .auth-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 36px rgba(255, 165, 0, 0.3);
        }

        .auth-btn:active {
            transform: translateY(-1px);
        }

        .password-strength {
            margin-top: 0.5rem;
            height: 4px;
            background: rgba(0, 0, 0, 0.08);
            border-radius: 2px;
            overflow: hidden;
        }

        .password-strength-fill {
            height: 100%;
            width: 0%;
            transition: all 0.3s;
            background: #ff4757;
        }

        .password-strength-fill.fair {
            width: 40%;
            background: #ff9500;
        }

        .password-strength-fill.good {
            width: 70%;
            background: #ffd700;
        }

        .password-strength-fill.strong {
            width: 100%;
            background: #00d084;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        .checkbox-group input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
            accent-color: var(--primary);
        }

        .auth-footer {
            text-align: center;
            margin-top: 1.5rem;
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        .auth-footer a {
            color: var(--primary);
            cursor: pointer;
            padding: 1rem;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: flex-start;
            justify-content: center;
            overflow-y: auto;
            text-decoration: underline;
        }

        .hidden-page {
            display: none;
        }

        .btn-secondary:hover {
            background: #0077a8;
            box-shadow: 0 8px 24px rgba(0, 153, 204, 0.3);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        /* FORMS */
        input, textarea, select {
            width: 100%;
            padding: 0.8rem;
            border: 2px solid rgba(0, 212, 255, 0.2);
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.3);
            color: var(--text-light);
            font-family: inherit;
            transition: border 0.3s;
            margin-bottom: 1rem;
        }

        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 10px rgba(0, 212, 255, 0.3);
        }

        /* MODALS */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: var(--card-bg);
            padding: 2rem;
            border-radius: 12px;
            max-width: 600px;
            width: 90%;
            border: 2px solid var(--primary);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            animation: slideDown 0.3s ease-out;
        }

        @keyframes slideDown {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-close {
            background: none;
            border: none;
            color: var(--primary);
            font-size: 1.5rem;
            cursor: pointer;
        }

        /* GRID LAYOUT */
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .grid-2 {
            grid-template-columns: repeat(2, 1fr);
        }

        .grid-3 {
            grid-template-columns: repeat(3, 1fr);
        }

        /* TOAST NOTIFICATIONS */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--success);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            animation: slideInRight 0.3s;
            z-index: 3000;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
        }

        @keyframes slideInRight {
            from { transform: translateX(400px); }
            to { transform: translateX(0); }
        }

        /* BADGES */
        .badge {
            display: inline-block;
            padding: 0.4rem 0.8rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: bold;
            margin: 0.2rem;
        }

        .badge-primary { background: var(--primary); color: var(--dark-bg); }
        .badge-success { background: var(--success); color: white; }
        .badge-warning { background: var(--warning); color: white; }

        /* PROGRESS BAR */
        .progress-bar {
            width: 100%;
            height: 10px;
            background: rgba(0, 212, 255, 0.1);
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 5px;
            transition: width 0.3s;
        }

        /* STATISTICS */
        .stat-box {
            background: rgba(0, 212, 255, 0.1);
            border-left: 4px solid var(--primary);
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 1rem;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--primary);
        }

        .stat-label {
            color: var(--text-muted);
            margin-top: 0.5rem;
        }

        /* RESPONSIVE */
        @media (max-width: 1024px) {
            .sidebar { width: 200px; }
            .main-content { margin-left: 200px; }
        }

        @media (max-width: 768px) {
            header { flex-direction: column; gap: 1rem; }
            .sidebar { transform: translateX(-100%); }
            .main-content { margin-left: 0; }
            .grid { grid-template-columns: 1fr; }
            .grid-2, .grid-3 { grid-template-columns: 1fr; }
        }

        .profile-card {
            text-align: center;
            padding: 2rem;
        }

        .profile-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            margin: 0 auto 1rem;
        }

        .section {
            animation: slideUp 0.5s ease-out;
        }

        .hidden { display: none; }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        table tr {
            border-bottom: 1px solid rgba(0, 212, 255, 0.2);
            padding: 1rem 0;
        }

        table td {
            padding: 1rem;
        }

        .chart-placeholder {
            height: 300px;
            background: rgba(0, 212, 255, 0.1);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-muted);
            font-style: italic;
        }

        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0, 212, 255, 0.1);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 5px;
        }
        .language-dropdown { position: fixed; top: 80px; right: 20px; background: var(--card-bg); border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; box-shadow: 0 8px 32px rgba(0,0,0,0.2); z-index: 10001; max-height: 500px; overflow-y: auto; min-width: 280px; display: none; animation: slideDown 0.3s ease-out; }
        .language-dropdown.active { display: block; }
        .language-dropdown-header { padding: 1rem; border-bottom: 1px solid rgba(255,255,255,0.08); font-weight: 700; color: var(--text-light); display: flex; justify-content: space-between; align-items: center; }
        .language-dropdown-close { background: none; border: none; color: var(--text-light); font-size: 1.2rem; cursor: pointer; padding: 0; }
        .language-item { padding: 0.8rem 1rem; cursor: pointer; color: var(--text-muted); transition: all 0.2s ease; border-left: 3px solid transparent; }
        .language-item:hover { background: rgba(255,255,255,0.04); color: var(--text-light); }
        .language-item.active-lang { background: rgba(255,165,0,0.15); color: var(--accent); border-left-color: var(--accent); font-weight: 600; }
    </style>
</head>
<body>

    <!-- AUTH PAGE -->
    <div id="authPage" class="auth-page active">
        <div class="auth-container">
            <div class="auth-header">
                <h1 data-i18n="brand">üöÄ SKILL BARTER</h1>
                <p data-i18n="tagline">Exchange Skills ‚Ä¢ Learn Together ‚Ä¢ Grow Together</p>
            </div>

            <div class="auth-tabs">
                <button class="auth-tab-btn active" onclick="switchAuthTab('login')">
                    <i class="fas fa-sign-in-alt"></i> <span data-i18n="login_tab">Login</span>
                </button>
                <button class="auth-tab-btn" onclick="switchAuthTab('register')">
                    <i class="fas fa-user-plus"></i> <span data-i18n="register_tab">Register</span>
                </button>
            </div>

            <!-- LOGIN TAB -->
            <div id="login-tab" class="tab-content active">
                <div class="form-group">
                    <label><i class="fas fa-envelope"></i> Email Address</label>
                    <input type="email" id="loginEmail" placeholder="you@example.com" required>
                </div>

                <div class="form-group">
                    <label><i class="fas fa-lock"></i> Password</label>
                    <input type="password" id="loginPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                </div>

                <div class="checkbox-group">
                    <input type="checkbox" id="rememberMe">
                    <label for="rememberMe" style="margin: 0;">Remember me</label>
                </div>

                <button class="auth-btn" onclick="handleLogin()">
                    <i class="fas fa-sign-in-alt"></i> <span data-i18n="sign_in">Sign In</span>
                </button>

                <div class="auth-footer">
                    <p>Don't have an account? <a onclick="switchAuthTab('register')">Register now</a></p>
                    <p style="margin-top: 0.5rem;"><a onclick="togglePasswordReset()">Forgot password?</a></p>
                </div>
            </div>

            <!-- REGISTER TAB -->
            <div id="register-tab" class="tab-content">
                <div class="form-group">
                    <label><i class="fas fa-user"></i> Full Name</label>
                    <input type="text" id="registerName" placeholder="John Doe" required>
                </div>

                <div class="form-group">
                    <label><i class="fas fa-envelope"></i> Email Address</label>
                    <input type="email" id="registerEmail" placeholder="you@example.com" required>
                </div>

                <div class="form-group">
                    <label><i class="fas fa-lock"></i> Password</label>
                    <input type="password" id="registerPassword" placeholder="Minimum 8 characters" oninput="checkPasswordStrength()" required>
                    <div class="password-strength">
                        <div id="passwordStrengthFill" class="password-strength-fill"></div>
                    </div>
                    <small style="color: var(--text-muted);">Strength: <span id="strengthText">Weak</span></small>
                </div>

                <div class="form-group">
                    <label><i class="fas fa-lock"></i> Confirm Password</label>
                    <input type="password" id="registerConfirm" placeholder="Confirm your password" required>
                </div>

                <div class="form-group">
                    <label><i class="fas fa-briefcase"></i> Profession/Title</label>
                    <input type="text" id="registerTitle" placeholder="e.g., Full Stack Developer" required>
                </div>

                <div class="checkbox-group">
                    <input type="checkbox" id="agreeTerms" required>
                    <label for="agreeTerms" style="margin: 0;">I agree to Terms & Conditions</label>
                </div>

                <button class="auth-btn" onclick="handleRegister()">
                    <i class="fas fa-user-plus"></i> <span data-i18n="create_account">Create Account</span>
                </button>

                <div class="auth-footer">
                    <p>Already have an account? <a onclick="switchAuthTab('login')">Sign in</a></p>
                </div>
            </div>

            <!-- PASSWORD RESET TAB -->
            <div id="reset-tab" class="tab-content">
                <div class="form-group">
                    <label><i class="fas fa-envelope"></i> Email Address</label>
                    <input type="email" id="resetEmail" placeholder="your@email.com" required>
                </div>
                <p style="color: var(--text-muted); margin-bottom: 1rem; font-size: 0.9rem;">We'll send a password reset link to your email.</p>
                <button class="auth-btn" onclick="handlePasswordReset()">
                    <i class="fas fa-paper-plane"></i> Send Reset Link
                </button>
                <div class="auth-footer">
                    <p><a onclick="togglePasswordReset()">Back to Login</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- MAIN APP -->
    <div id="mainApp" class="hidden-page">
        <!-- HEADER -->
        <header>
            <div class="logo" data-i18n="brand">
                <i class="fas fa-exchange-alt"></i> SKILL BARTER BOARD
            </div>
            <div style="display: flex; align-items: center; gap: 1rem;">
                <span id="userWelcome" style="color: var(--primary); font-weight: 600;"></span>
                <span id="userTimezoneDisplay" style="color: var(--text-muted); font-size: 0.95rem; margin-left: 0.6rem;"></span>
                <button class="theme-toggle" onclick="toggleTheme()">
                    <i class="fas fa-moon"></i> Dark Mode
                </button>
                <button class="btn btn-secondary" onclick="openLanguageSelector()" style="padding: 0.5rem 1rem;">
                    <i class="fas fa-globe"></i> Language
                </button>
                <button class="btn btn-secondary" onclick="logout()" style="padding: 0.5rem 1rem;">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </header>

    <!-- LANGUAGE DROPDOWN MODAL -->
    <div id="languageDropdown" class="language-dropdown">
        <div class="language-dropdown-header">
            <span>Select Language</span>
            <button class="language-dropdown-close" onclick="toggleLanguageDropdown()">‚úï</button>
        </div>
        <div id="languagesList" style="padding: 0.5rem 0;"></div>
    </div>

    <!-- SIDEBAR NAVIGATION -->
    <nav class="sidebar" id="sidebar">
        <div class="sidebar-item active" onclick="showSection('dashboard', this)" data-i18n="dashboard">
            <i class="fas fa-home"></i> Dashboard
        </div>
            <div class="sidebar-item" onclick="showSection('profiles', this)" data-i18n="users">
            <i class="fas fa-users"></i> Users
        </div>
            <div class="sidebar-item" onclick="showSection('learning', this)" data-i18n="learning">
            <i class="fas fa-book"></i> Learning
        </div>
            <div class="sidebar-item" onclick="showSection('social', this)" data-i18n="social">
            <i class="fas fa-share-alt"></i> Social
        </div>
            <div class="sidebar-item" onclick="showSection('gamification', this)" data-i18n="gamification">
            <i class="fas fa-gamepad"></i> Gamification
        </div>
            <div class="sidebar-item" onclick="showSection('analytics', this)" data-i18n="analytics">
            <i class="fas fa-chart-bar"></i> Analytics
        </div>
            <div class="sidebar-item" onclick="showSection('messages', this)" data-i18n="messages">
            <i class="fas fa-comments"></i> Messages
        </div>
            <div class="sidebar-item" onclick="showSection('settings', this)" data-i18n="settings">
            <i class="fas fa-cog"></i> Settings
        </div>
            <div class="sidebar-item" onclick="showSection('ai', this)" data-i18n="ai_chatbot">
            <i class="fas fa-robot"></i> AI Chatbot
        </div>
            <div class="sidebar-item" onclick="showSection('video', this)" data-i18n="videos">
            <i class="fas fa-video"></i> Videos
        </div>
            <div class="sidebar-item" onclick="showSection('professional', this)" data-i18n="professional">
            <i class="fas fa-briefcase"></i> Professional
        </div>
    </nav>

    <!-- MAIN CONTENT -->
    <main class="main-content">
        <div class="container">

            <!-- DASHBOARD SECTION -->
            <section id="dashboard" class="section">
                <h1><i class="fas fa-home"></i> <span data-i18n="welcome_dashboard">Welcome to Your Dashboard</span></h1>
                
                <!-- STATS ROW -->
                <div class="grid-3">
                    <div class="card-bg">
                        <div class="stat-box">
                            <div class="stat-number" id="dashPoints">2,450</div>
                            <div class="stat-label" data-i18n="total_points">Total Points</div>
                            <small style="color: var(--text-muted); margin-top: 0.5rem; display: block;">‚Üë +25 today</small>
                        </div>
                    </div>
                    <div class="card-bg">
                        <div class="stat-box">
                            <div class="stat-number" id="dashLevel">15</div>
                            <div class="stat-label" data-i18n="current_level">Current Level</div>
                            <small style="color: var(--text-muted); margin-top: 0.5rem; display: block;">Progress: <span id="dashXPPercent">75%</span></small>
                        </div>
                    </div>
                    <div class="card-bg">
                        <div class="stat-box">
                            <div class="stat-number" id="dashConnections">12</div>
                            <div class="stat-label" data-i18n="active_connections">Active Connections</div>
                            <small style="color: var(--text-muted); margin-top: 0.5rem; display: block;">+3 this month</small>
                        </div>
                    </div>
                </div>

                <!-- QUICK ACTIONS -->
                <div class="card-bg">
                    <h2><i class="fas fa-lightning-bolt"></i> <span data-i18n="quick_actions">Quick Actions</span></h2>
                    <div class="actions-grid" style="margin-top:1rem;display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px;">
                        <div class="action-card" role="button" tabindex="0" title="Earn XP by completing quick tasks" aria-label="Earn XP" onclick="handleEarnXP(50,this,event)" onkeypress="if(event.key==='Enter')handleEarnXP(50,this,event)">
                            <div style="display:flex;align-items:center;gap:12px">
                                <div style="font-size:1.6rem;color:var(--primary)"><i class="fas fa-star"></i></div>
                                <div>
                                    <div style="font-weight:700">Earn XP</div>
                                    <div class="tiny-muted">Complete quick tasks and boost your level</div>
                                </div>
                            </div>
                            <div style="margin-top:12px;display:flex;justify-content:space-between;align-items:center">
                                <div class="progress-bar" style="width:60%;height:8px"><div class="progress-fill" style="width:25%"></div></div>
                                <button class="btn btn-primary" style="padding:6px 10px" title="Add 50 XP" aria-label="Add 50 XP" onclick="event.stopPropagation(); handleEarnXP(50, this, event)">+50 XP</button>
                            </div>
                        </div>

                        <div class="action-card" role="button" tabindex="0" title="Find experts and mentors" aria-label="Find Experts" onclick="openFindExperts(this,event)" onkeypress="if(event.key==='Enter')openFindExperts(this,event)">
                            <div style="display:flex;align-items:center;gap:12px">
                                <div style="font-size:1.6rem;color:#ffd54a"><i class="fas fa-search"></i></div>
                                <div>
                                    <div style="font-weight:700">Find Experts</div>
                                    <div class="tiny-muted">Search mentors and collaborators</div>
                                </div>
                            </div>
                            <div style="margin-top:12px;display:flex;justify-content:flex-end">
                                <button class="btn btn-secondary" style="padding:6px 10px" title="Search experts" aria-label="Search Experts" onclick="event.stopPropagation(); openFindExperts(this,event)">Search</button>
                            </div>
                        </div>

                        <div class="action-card" role="button" tabindex="0" title="Propose a new skill exchange" aria-label="New Exchange" onclick="openExchangeModal(this,event)" onkeypress="if(event.key==='Enter')openExchangeModal(this,event)">
                            <div style="display:flex;align-items:center;gap:12px">
                                <div style="font-size:1.6rem;color:#9f7aea"><i class="fas fa-handshake"></i></div>
                                <div>
                                    <div style="font-weight:700">New Exchange</div>
                                    <div class="tiny-muted">Propose a skill exchange ‚Äî quick form</div>
                                </div>
                            </div>
                            <div style="margin-top:12px;display:flex;justify-content:flex-end">
                                <button class="btn btn-primary" style="padding:6px 10px" title="Propose exchange" aria-label="Propose Exchange" onclick="event.stopPropagation(); openExchangeModal(this,event)">Propose</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- LEVEL PROGRESS -->
                <div class="card-bg">
                    <h2><i class="fas fa-chart-line"></i> <span data-i18n="level_progress">Level Progress</span></h2>
                    <div style="margin-bottom: 1rem;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                            <span>Level <span id="progLevel">15</span></span>
                            <span id="progXP">750 / 1000 XP</span>
                        </div>
                        <div class="progress-bar" style="height: 15px;">
                            <div id="progressFill" class="progress-fill" style="width: 75%; height: 100%;"></div>
                        </div>
                        <small style="color: var(--text-muted);">250 XP until Level 16 üéØ</small>
                    </div>
                </div>

                <!-- MY SKILLS -->
                <div class="card-bg">
                    <h2><i class="fas fa-graduation-cap"></i> <span data-i18n="my_skills">My Skills</span></h2>
                    <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 1rem;">
                        <span class="badge badge-primary"><i class="fas fa-check-circle"></i> JavaScript</span>
                        <span class="badge badge-primary"><i class="fas fa-check-circle"></i> React</span>
                        <span class="badge badge-primary"><i class="fas fa-check-circle"></i> Web Design</span>
                        <span class="badge badge-success" style="cursor: pointer; padding: 0.5rem 1rem;" onclick="addNewSkill()"><i class="fas fa-plus"></i> Add Skill</span>
                    </div>
                    <input type="text" id="newSkillInput" placeholder="Add a new skill..." style="padding: 0.6rem; margin-bottom: 0.5rem; display: none; width: 100%;">
                    <button id="addSkillBtn" onclick="confirmAddSkill()" class="btn btn-primary" style="display: none; width: 100%;">Add</button>
                </div>

                <!-- RECENT ACHIEVEMENTS -->
                <div class="card-bg">
                    <h2><i class="fas fa-trophy"></i> <span data-i18n="achievements">Recent Achievements</span></h2>
                    <div id="achievementsContainer" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem;">
                        <div style="text-align: center; padding: 1rem;">
                            <div style="font-size: 2.5rem; margin-bottom: 0.5rem;">‚≠ê</div>
                            <p style="font-size: 0.9rem;">JavaScript Master</p>
                            <small style="color: var(--text-muted);">5 days ago</small>
                        </div>
                        <div style="text-align: center; padding: 1rem;">
                            <div style="font-size: 2.5rem; margin-bottom: 0.5rem;">üèÜ</div>
                            <p style="font-size: 0.9rem;">Top Tutor</p>
                            <small style="color: var(--text-muted);">2 weeks ago</small>
                        </div>
                        <div style="text-align: center; padding: 1rem;">
                            <div style="font-size: 2.5rem; margin-bottom: 0.5rem;">üî•</div>
                            <p style="font-size: 0.9rem;">7-Day Streak</p>
                            <small style="color: var(--text-muted);">Active now</small>
                        </div>
                    </div>
                </div>

                <!-- PENDING REQUESTS -->
                <div class="card-bg">
                    <h2><i class="fas fa-bell"></i> <span data-i18n="pending_requests">Connection Requests</span> (3)</h2>
                    <div id="requestsContainer" style="max-height: 300px; overflow-y: auto;">
                        <!-- Requests loaded dynamically -->
                    </div>
                </div>

                <!-- RECENT CONNECTIONS -->
                <div class="card-bg">
                    <h2><i class="fas fa-user-friends"></i> <span data-i18n="recent_connections">Recent Connections</span></h2>
                    <div class="grid" id="recentConnectionsContainer">
                        <!-- Connections loaded dynamically -->
                    </div>
                </div>

                <!-- DAILY CHECKLIST -->
                <div class="card-bg">
                    <h2><i class="fas fa-clipboard-list"></i> <span data-i18n="daily_checklist">Daily Checklist</span></h2>
                    <div style="display: flex; flex-direction: column; gap: 1rem;">
                        <div style="display: flex; align-items: center; gap: 1rem; padding: 0.8rem; background: rgba(0, 212, 255, 0.05); border-radius: 8px;">
                            <input type="checkbox" id="check1" onchange="updateChecklist()" style="width: 20px; height: 20px; cursor: pointer;">
                            <label for="check1" style="flex: 1; margin: 0; cursor: pointer;">Log in daily (15 XP)</label>
                            <span class="badge badge-success">‚úì Done</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 1rem; padding: 0.8rem; background: rgba(0, 212, 255, 0.05); border-radius: 8px;">
                            <input type="checkbox" id="check2" onchange="updateChecklist()" style="width: 20px; height: 20px; cursor: pointer;">
                            <label for="check2" style="flex: 1; margin: 0; cursor: pointer;">Complete one skill exchange (50 XP)</label>
                            <span class="badge badge-warning">In Progress</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 1rem; padding: 0.8rem; background: rgba(0, 212, 255, 0.05); border-radius: 8px;">
                            <input type="checkbox" id="check3" onchange="updateChecklist()" style="width: 20px; height: 20px; cursor: pointer;">
                            <label for="check3" style="flex: 1; margin: 0; cursor: pointer;">Leave a review (25 XP)</label>
                            <span style="font-size: 0.8rem; color: var(--text-muted);">Pending</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- USERS/PROFILES SECTION -->
            <section id="profiles" class="section hidden">
                <h1><i class="fas fa-users"></i> <span data-i18n="find_and_connect">Find & Connect with Experts</span></h1>
                
                <div class="card-bg" style="margin-bottom: 1.5rem;">
                    <input type="text" id="searchProfile" placeholder="Search by name or skill..." style="padding: 0.8rem; width: 100%; margin-bottom: 0.5rem;">
                    <button class="btn btn-primary" onclick="searchProfiles()" style="width: 100%;">
                        <i class="fas fa-search"></i> Search Experts
                    </button>
                </div>
                
                <div class="grid" id="profilesContainer">
                    <!-- Profiles loaded dynamically -->
                </div>

                <div style="text-align: center; margin-top: 2rem;">
                    <p style="color: var(--text-muted);">üí° Connect with experts to exchange skills and grow together</p>
                </div>
            </section>

            <!-- LEARNING SECTION -->
            <section id="learning" class="section hidden">
                <h1><i class="fas fa-book"></i> <span data-i18n="learning_center">Interactive Learning Center</span></h1>
                
                <!-- LEARNING FILTERS -->
                <div class="card-bg" style="margin-bottom: 1.5rem;">
                    <h2 style="margin-bottom: 1rem;"><i class="fas fa-filter"></i> Filter Courses</h2>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem;">
                        <button class="btn btn-primary" onclick="filterCourses('all')" style="width: 100%;">All Courses</button>
                        <button class="btn btn-secondary" onclick="filterCourses('active')" style="width: 100%;">In Progress</button>
                        <button class="btn btn-secondary" onclick="filterCourses('completed')" style="width: 100%;">Completed</button>
                        <button class="btn btn-secondary" onclick="filterCourses('recommended')" style="width: 100%;">Recommended</button>
                    </div>
                </div>

                <!-- ACTIVE COURSES -->
                <div class="card-bg">
                    <h2><i class="fas fa-play-circle"></i> My Courses (In Progress)</h2>
                    <div class="grid-2" id="activeCoursesContainer" style="margin-top: 1rem;">
                        <!-- Courses loaded dynamically -->
                    </div>
                </div>

                <!-- RECOMMENDED COURSES -->
                <div class="card-bg">
                    <h2><i class="fas fa-star"></i> Recommended For You</h2>
                    <div class="grid" id="recommendedCoursesContainer" style="margin-top: 1rem;">
                        <!-- Recommended courses loaded dynamically -->
                    </div>
                </div>

                <!-- COURSE QUIZZES -->
                <div class="card-bg">
                    <h2><i class="fas fa-question-circle"></i> Quick Quiz</h2>
                    <div id="quizContainer" style="background: rgba(0, 212, 255, 0.05); padding: 1.5rem; border-radius: 8px;">
                        <div id="quizContent">
                            <p style="margin-bottom: 1rem;">Take a quick quiz to test your knowledge and earn points!</p>
                            <button class="btn btn-primary" onclick="startQuiz()" style="width: 100%; padding: 1rem; font-size: 1.1rem;">
                                <i class="fas fa-pencil-alt"></i> Start Random Quiz
                            </button>
                        </div>
                    </div>
                </div>

                <!-- YOUR CERTIFICATES -->
                <div class="card-bg">
                    <h2><i class="fas fa-award"></i> Your Certificates (7 Earned)</h2>
                    <div class="grid" id="certificatesContainer" style="margin-top: 1rem;">
                        <!-- Certificates loaded dynamically -->
                    </div>
                </div>

                                <!-- Course Modal (global) -->
                                <div id="courseModal" class="modal hidden">
                                    <div class="modal-card">
                                        <div style="display:flex;justify-content:space-between;align-items:center;gap:12px">
                                            <h3 id="courseModalTitle">Course</h3>
                                            <button id="courseModalClose" class="btn btn-secondary" style="padding:6px 10px">Close</button>
                                        </div>
                                        <div id="courseModalBody" style="margin-top:10px;color:var(--text-muted)"></div>
                                        <div class="modal-actions">
                                            <button id="courseModalContinue" class="btn btn-primary">Continue Course</button>
                                            <button onclick="showToast('Saved for later')" class="btn btn-secondary">Save</button>
                                        </div>
                                    </div>
                                </div>

                <!-- LEARNING STATS -->
                <div class="card-bg">
                    <h2><i class="fas fa-chart-pie"></i> Learning Statistics</h2>
                    <div class="grid-2" style="margin-top: 1rem;">
                        <div style="text-align: center; padding: 1rem; background: rgba(0, 212, 255, 0.05); border-radius: 8px;">
                            <div style="font-size: 2rem; color: var(--primary); font-weight: bold; margin-bottom: 0.5rem;">125</div>
                            <p style="margin: 0; color: var(--text-muted);">Hours Learned</p>
                        </div>
                        <div style="text-align: center; padding: 1rem; background: rgba(0, 212, 255, 0.05); border-radius: 8px;">
                            <div style="font-size: 2rem; color: var(--primary); font-weight: bold; margin-bottom: 0.5rem;">18</div>
                            <p style="margin: 0; color: var(--text-muted);">Courses Taken</p>
                        </div>
                        <div style="text-align: center; padding: 1rem; background: rgba(0, 212, 255, 0.05); border-radius: 8px;">
                            <div style="font-size: 2rem; color: var(--primary); font-weight: bold; margin-bottom: 0.5rem;">7</div>
                            <p style="margin: 0; color: var(--text-muted);">Certificates</p>
                        </div>
                        <div style="text-align: center; padding: 1rem; background: rgba(0, 212, 255, 0.05); border-radius: 8px;">
                            <div style="font-size: 2rem; color: var(--primary); font-weight: bold; margin-bottom: 0.5rem;">92%</div>
                            <p style="margin: 0; color: var(--text-muted);">Completion Rate</p>
                        </div>
                    </div>
                </div>

                <!-- LEARNING RESOURCES -->
                <div class="card-bg">
                    <h2><i class="fas fa-link"></i> Helpful Resources</h2>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 1rem;">
                        <a href="#" onclick="showToast('Opening documentation...', 'info')" style="padding: 1rem; background: rgba(0, 212, 255, 0.1); border: 2px solid var(--primary); border-radius: 8px; text-decoration: none; color: var(--primary); text-align: center; font-weight: 600; transition: all 0.3s; cursor: pointer;" onmouseover="this.style.background='rgba(0, 212, 255, 0.2)'" onmouseout="this.style.background='rgba(0, 212, 255, 0.1)'">
                            <i class="fas fa-book-open" style="display: block; font-size: 1.5rem; margin-bottom: 0.5rem;"></i> Documentation
                        </a>
                        <a href="#" onclick="showToast('Opening tutorials...', 'info')" style="padding: 1rem; background: rgba(0, 212, 255, 0.1); border: 2px solid var(--primary); border-radius: 8px; text-decoration: none; color: var(--primary); text-align: center; font-weight: 600; transition: all 0.3s; cursor: pointer;" onmouseover="this.style.background='rgba(0, 212, 255, 0.2)'" onmouseout="this.style.background='rgba(0, 212, 255, 0.1)'">
                            <i class="fas fa-video" style="display: block; font-size: 1.5rem; margin-bottom: 0.5rem;"></i> Video Tutorials
                        </a>
                        <a href="#" onclick="showToast('Opening community forum...', 'info')" style="padding: 1rem; background: rgba(0, 212, 255, 0.1); border: 2px solid var(--primary); border-radius: 8px; text-decoration: none; color: var(--primary); text-align: center; font-weight: 600; transition: all 0.3s; cursor: pointer;" onmouseover="this.style.background='rgba(0, 212, 255, 0.2)'" onmouseout="this.style.background='rgba(0, 212, 255, 0.1)'">
                            <i class="fas fa-comments" style="display: block; font-size: 1.5rem; margin-bottom: 0.5rem;"></i> Ask Community
                        </a>
                        <a href="#" onclick="showToast('Opening code snippets...', 'info')" style="padding: 1rem; background: rgba(0, 212, 255, 0.1); border: 2px solid var(--primary); border-radius: 8px; text-decoration: none; color: var(--primary); text-align: center; font-weight: 600; transition: all 0.3s; cursor: pointer;" onmouseover="this.style.background='rgba(0, 212, 255, 0.2)'" onmouseout="this.style.background='rgba(0, 212, 255, 0.1)'">
                            <i class="fas fa-code" style="display: block; font-size: 1.5rem; margin-bottom: 0.5rem;"></i> Code Snippets
                        </a>
                    </div>
                </div>

                <!-- LEARNING STREAK -->
                <div class="card-bg">
                    <h2><i class="fas fa-fire"></i> Your Learning Streak</h2>
                    <div style="display: flex; align-items: center; justify-content: space-between; margin-top: 1rem;">
                        <div>
                            <div style="font-size: 3rem; color: var(--primary); font-weight: bold;">üî• 15</div>
                            <p style="margin: 0; color: var(--text-muted);">Days Learning in a Row</p>
                            <small style="color: var(--text-muted);">Keep it up! One more day for a badge</small>
                        </div>
                        <button class="btn btn-primary" onclick="addLearnXP()" style="padding: 1rem 2rem; font-size: 1.1rem;">
                            <i class="fas fa-book-reader"></i> Study Today
                        </button>
                    </div>
                </div>

                                <!-- Exchange Modal (quick action) -->
                                <div id="exchangeModal" class="modal hidden">
                                    <div class="modal-card">
                                        <div style="display:flex;justify-content:space-between;align-items:center;gap:12px">
                                            <h3>Propose Skill Exchange</h3>
                                            <button id="exchangeModalClose" class="btn btn-secondary" style="padding:6px 10px">Close</button>
                                        </div>
                                        <div style="margin-top:10px;color:var(--text-muted)">
                                            <div class="form-group"><label>Title</label><input id="exchangeTitle" placeholder="Short title for exchange"></div>
                                            <div class="form-group"><label>Your Offer</label><input id="exchangeOffer" placeholder="What you will teach or offer"></div>
                                            <div class="form-group"><label>Details</label><textarea id="exchangeDetails" placeholder="Optional details" style="width:100%;height:80px;padding:8px;border-radius:6px;border:1px solid rgba(255,255,255,0.06)"></textarea></div>
                                        </div>
                                        <div class="modal-actions">
                                            <button id="exchangeSubmit" class="btn btn-primary">Submit Proposal</button>
                                        </div>
                                    </div>
                                </div>
            </section>

            <!-- SOCIAL SECTION -->
            <section id="social" class="section hidden">
                <h1><i class="fas fa-share-alt"></i> Community Feed</h1>
                
                <!-- Filter and Tabs -->
                <div style="display: flex; gap: 1rem; margin-bottom: 1.5rem; flex-wrap: wrap;">
                    <button class="btn btn-primary" onclick="loadSocialFeed('all')" style="flex: 1; min-width: 120px;">
                        <i class="fas fa-globe"></i> All Posts
                    </button>
                    <button class="btn btn-outline" onclick="loadSocialFeed('trending')" style="flex: 1; min-width: 120px;">
                        <i class="fas fa-fire"></i> Trending
                    </button>
                    <button class="btn btn-outline" onclick="loadSocialFeed('following')" style="flex: 1; min-width: 120px;">
                        <i class="fas fa-heart"></i> Following
                    </button>
                </div>

                <!-- Share Post Section -->
                <div class="card-bg" style="background: linear-gradient(135deg, rgba(0, 212, 255, 0.1) 0%, rgba(0, 212, 255, 0.05) 100%); border: 2px solid var(--primary);">
                    <h3><i class="fas fa-pen-fancy"></i> Share Your Achievement</h3>
                    <textarea id="socialInput" placeholder="Share your learning journey, project wins, or ask for help..." style="height: 100px; padding: 0.8rem; border: 1px solid var(--primary); border-radius: 8px; background: rgba(255, 255, 255, 0.05); color: var(--text); margin-bottom: 0.5rem;"></textarea>
                    <button class="btn btn-primary" onclick="postSocialUpdate()" style="width: 100%;">
                        <i class="fas fa-paper-plane"></i> Share Update
                    </button>
                </div>

                <!-- Feed Container -->
                <div id="socialFeedContainer" style="margin-top: 1.5rem;">
                    <!-- Posts will load here -->
                </div>
            </section>

            <!-- GAMIFICATION SECTION -->
            <section id="gamification" class="section hidden">
                <h1><i class="fas fa-gamepad"></i> Gamification Hub</h1>
                
                <!-- Tabs -->
                <div style="display: flex; gap: 1rem; margin-bottom: 1.5rem; flex-wrap: wrap;">
                        <button class="btn btn-primary" onclick="loadGamificationTab('overview', this)" style="flex: 1; min-width: 120px;">
                        <i class="fas fa-chart-line"></i> Overview
                    </button>
                    <button class="btn btn-outline" onclick="loadGamificationTab('leaderboard', this)" style="flex: 1; min-width: 120px;">
                        <i class="fas fa-trophy"></i> Leaderboard
                    </button>
                    <button class="btn btn-outline" onclick="loadGamificationTab('badges', this)" style="flex: 1; min-width: 120px;">
                        <i class="fas fa-medal"></i> Badges
                    </button>
                    <button class="btn btn-outline" onclick="loadGamificationTab('history', this)" style="flex: 1; min-width: 120px;">
                        <i class="fas fa-history"></i> History
                    </button>
                </div>

                <!-- Overview Tab -->
                <div id="gamOverview" class="card-bg">
                    <div class="grid-3">
                        <div style="text-align: center; padding: 1rem; background: rgba(0, 212, 255, 0.1); border-radius: 8px;">
                            <div style="font-size: 2rem; margin-bottom: 0.5rem;">‚≠ê</div>
                            <p style="color: var(--text-muted); font-size: 0.85rem;">Current Level</p>
                            <div style="font-size: 2.5rem; color: var(--primary); font-weight: bold;">15</div>
                        </div>
                        <div style="text-align: center; padding: 1rem; background: rgba(255, 193, 7, 0.1); border-radius: 8px;">
                            <div style="font-size: 2rem; margin-bottom: 0.5rem;">üî•</div>
                            <p style="color: var(--text-muted); font-size: 0.85rem;">Current Streak</p>
                            <div style="font-size: 2.5rem; color: #ffc107; font-weight: bold;">7 Days</div>
                        </div>
                        <div style="text-align: center; padding: 1rem; background: rgba(76, 175, 80, 0.1); border-radius: 8px;">
                            <div style="font-size: 2rem; margin-bottom: 0.5rem;">‚ú®</div>
                            <p style="color: var(--text-muted); font-size: 0.85rem;">Total Points</p>
                            <div style="font-size: 2.5rem; color: #4caf50; font-weight: bold;">2,450 XP</div>
                        </div>
                    </div>
                    
                    <h3 style="margin-top: 1.5rem;">Level 15 Progress</h3>
                    <div class="progress-bar" style="background: rgba(255, 255, 255, 0.1); height: 30px; border-radius: 15px; overflow: hidden;">
                        <div class="progress-fill" style="width: 75%; background: linear-gradient(90deg, var(--primary), #00d084); height: 100%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 0.85rem;">750 / 1000 XP</div>
                    </div>
                    <p style="text-align: center; margin-top: 0.5rem; color: var(--text-muted);">250 XP to Level 16 ‚Üë</p>
                </div>

                <!-- Leaderboard Tab -->
                <div id="gamLeaderboard" class="card-bg hidden">
                    <h2><i class="fas fa-trophy"></i> Global Leaderboard</h2>
                    <table style="width: 100%; margin-top: 1rem;">
                        <tr style="border-bottom: 2px solid var(--primary);">
                            <td style="padding: 0.8rem;"><strong>#</strong></td>
                            <td style="padding: 0.8rem;"><strong>User</strong></td>
                            <td style="padding: 0.8rem; text-align: right;"><strong>XP</strong></td>
                        </tr>
                        <tr style="border-bottom: 1px solid rgba(255, 255, 255, 0.1); background: rgba(255, 193, 7, 0.1);">
                            <td style="padding: 0.8rem; color: #ffc107; font-size: 1.2rem;">ü•á</td>
                            <td style="padding: 0.8rem;"><strong>Alex Developer</strong> <span style="color: var(--text-muted); font-size: 0.85rem;">Level 18</span></td>
                            <td style="padding: 0.8rem; text-align: right;">5,200 XP</td>
                        </tr>
                        <tr style="border-bottom: 1px solid rgba(255, 255, 255, 0.1); background: rgba(192, 192, 192, 0.1);">
                            <td style="padding: 0.8rem; color: #c0c0c0; font-size: 1.2rem;">ü•à</td>
                            <td style="padding: 0.8rem;"><strong>Sarah Designer</strong> <span style="color: var(--text-muted); font-size: 0.85rem;">Level 17</span></td>
                            <td style="padding: 0.8rem; text-align: right;">4,800 XP</td>
                        </tr>
                        <tr style="border-bottom: 1px solid rgba(255, 255, 255, 0.1); background: rgba(205, 127, 50, 0.1);">
                            <td style="padding: 0.8rem; color: #cd7f32; font-size: 1.2rem;">ü•â</td>
                            <td style="padding: 0.8rem;"><strong>You</strong> <span style="color: var(--text-muted); font-size: 0.85rem;">Level 15</span></td>
                            <td style="padding: 0.8rem; text-align: right;">2,450 XP</td>
                        </tr>
                        <tr style="border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                            <td style="padding: 0.8rem;">4</td>
                            <td style="padding: 0.8rem;"><strong>John Coder</strong> <span style="color: var(--text-muted); font-size: 0.85rem;">Level 14</span></td>
                            <td style="padding: 0.8rem; text-align: right;">2,100 XP</td>
                        </tr>
                        <tr style="border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                            <td style="padding: 0.8rem;">5</td>
                            <td style="padding: 0.8rem;"><strong>Emma Watson</strong> <span style="color: var(--text-muted); font-size: 0.85rem;">Level 13</span></td>
                            <td style="padding: 0.8rem; text-align: right;">1,950 XP</td>
                        </tr>
                    </table>
                </div>

                <!-- Badges Tab -->
                <div id="gamBadges" class="card-bg hidden">
                    <h2><i class="fas fa-medal"></i> Your Badges & Achievements</h2>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; margin-top: 1rem;">
                        <div style="text-align: center; padding: 1rem; background: rgba(255, 193, 7, 0.1); border-radius: 8px; border: 2px solid #ffc107;">
                            <div style="font-size: 2rem; margin-bottom: 0.5rem;">üèÜ</div>
                            <p><strong>Top Learner</strong></p>
                            <p style="color: var(--text-muted); font-size: 0.85rem;">Completed 3 courses</p>
                        </div>
                        <div style="text-align: center; padding: 1rem; background: rgba(255, 87, 34, 0.1); border-radius: 8px; border: 2px solid #ff5722;">
                            <div style="font-size: 2rem; margin-bottom: 0.5rem;">üî•</div>
                            <p><strong>Week Warrior</strong></p>
                            <p style="color: var(--text-muted); font-size: 0.85rem;">7-day streak</p>
                        </div>
                        <div style="text-align: center; padding: 1rem; background: rgba(76, 175, 80, 0.1); border-radius: 8px; border: 2px solid #4caf50;">
                            <div style="font-size: 2rem; margin-bottom: 0.5rem;">‚≠ê</div>
                            <p><strong>Expert</strong></p>
                            <p style="color: var(--text-muted); font-size: 0.85rem;">2,000+ XP earned</p>
                        </div>
                        <div style="text-align: center; padding: 1rem; background: rgba(0, 212, 255, 0.1); border-radius: 8px; border: 2px solid var(--primary);">
                            <div style="font-size: 2rem; margin-bottom: 0.5rem;">ü§ù</div>
                            <p><strong>Network Pro</strong></p>
                            <p style="color: var(--text-muted); font-size: 0.85rem;">15 connections</p>
                        </div>
                        <div style="text-align: center; padding: 1rem; background: rgba(156, 39, 176, 0.1); border-radius: 8px; border: 2px dashed #9c27b0;">
                            <div style="font-size: 2rem; margin-bottom: 0.5rem; opacity: 0.5;">üéØ</div>
                            <p><strong>Speedster</strong></p>
                            <p style="color: var(--text-muted); font-size: 0.85rem;">Complete course in 1 day</p>
                        </div>
                        <div style="text-align: center; padding: 1rem; background: rgba(233, 30, 99, 0.1); border-radius: 8px; border: 2px dashed #e91e63;">
                            <div style="font-size: 2rem; margin-bottom: 0.5rem; opacity: 0.5;">üëë</div>
                            <p><strong>Legendary</strong></p>
                            <p style="color: var(--text-muted); font-size: 0.85rem;">Level 20+ achieved</p>
                        </div>
                    </div>
                </div>

                <!-- History Tab -->
                <div id="gamHistory" class="card-bg hidden">
                    <h2><i class="fas fa-history"></i> Points History</h2>
                    <div style="margin-top: 1rem;">
                        <div style="display: flex; justify-content: space-between; padding: 0.8rem; border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                            <span>‚úÖ Completed Course: Web Design</span>
                            <span style="color: #00d084;">+500 XP</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 0.8rem; border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                            <span>‚úÖ Completed Quiz: JavaScript</span>
                            <span style="color: #00d084;">+300 XP</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 0.8rem; border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                            <span>üèÜ Earned Badge: Top Learner</span>
                            <span style="color: #00d084;">+150 XP</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 0.8rem; border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                            <span>‚úÖ 7-Day Streak Bonus</span>
                            <span style="color: #00d084;">+200 XP</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 0.8rem; border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                            <span>‚úÖ Completed Quiz: React</span>
                            <span style="color: #00d084;">+300 XP</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ANALYTICS SECTION -->
            <section id="analytics" class="section hidden">
                <h1><i class="fas fa-chart-bar"></i> My Analytics</h1>
                
                <!-- Tabs -->
                <div style="display: flex; gap: 1rem; margin-bottom: 1.5rem; flex-wrap: wrap;">
                    <button class="btn btn-primary" onclick="loadAnalyticsTab('overview', this)" style="flex: 1; min-width: 120px;">
                        <i class="fas fa-chart-pie"></i> Overview
                    </button>
                    <button class="btn btn-outline" onclick="loadAnalyticsTab('learning', this)" style="flex: 1; min-width: 120px;">
                        <i class="fas fa-book"></i> Learning
                    </button>
                    <button class="btn btn-outline" onclick="loadAnalyticsTab('skills', this)" style="flex: 1; min-width: 120px;">
                        <i class="fas fa-star"></i> Skills
                    </button>
                    <button class="btn btn-outline" onclick="loadAnalyticsTab('monthly', this)" style="flex: 1; min-width: 120px;">
                        <i class="fas fa-calendar"></i> Monthly
                    </button>
                </div>

                <!-- Overview Tab -->
                <div id="analyticsOverview" class="card-bg">
                    <div class="grid-4">
                        <div style="text-align: center; padding: 1rem; background: rgba(0, 212, 255, 0.1); border-radius: 8px;">
                            <div style="font-size: 1.8rem; margin-bottom: 0.5rem;">üìö</div>
                            <p style="color: var(--text-muted); font-size: 0.85rem;">Courses</p>
                            <div style="font-size: 2rem; color: var(--primary); font-weight: bold;">8</div>
                            <p style="color: var(--text-muted); font-size: 0.75rem;">Total Enrolled</p>
                        </div>
                        <div style="text-align: center; padding: 1rem; background: rgba(76, 175, 80, 0.1); border-radius: 8px;">
                            <div style="font-size: 1.8rem; margin-bottom: 0.5rem;">‚úÖ</div>
                            <p style="color: var(--text-muted); font-size: 0.85rem;">Completed</p>
                            <div style="font-size: 2rem; color: #4caf50; font-weight: bold;">3</div>
                            <p style="color: var(--text-muted); font-size: 0.75rem;">Courses Done</p>
                        </div>
                        <div style="text-align: center; padding: 1rem; background: rgba(255, 193, 7, 0.1); border-radius: 8px;">
                            <div style="font-size: 1.8rem; margin-bottom: 0.5rem;">‚è±Ô∏è</div>
                            <p style="color: var(--text-muted); font-size: 0.85rem;">Hours</p>
                            <div style="font-size: 2rem; color: #ffc107; font-weight: bold;">24</div>
                            <p style="color: var(--text-muted); font-size: 0.75rem;">This Month</p>
                        </div>
                        <div style="text-align: center; padding: 1rem; background: rgba(156, 39, 176, 0.1); border-radius: 8px;">
                            <div style="font-size: 1.8rem; margin-bottom: 0.5rem;">üìà</div>
                            <p style="color: var(--text-muted); font-size: 0.85rem;">Consistency</p>
                            <div style="font-size: 2rem; color: #9c27b0; font-weight: bold;">87%</div>
                            <p style="color: var(--text-muted); font-size: 0.75rem;">Last 30 Days</p>
                        </div>
                    </div>
                    
                    <h3 style="margin-top: 1.5rem;">Weekly Activity</h3>
                    <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap">
                        <div class="chart-card card-bg" style="flex:1;min-width:360px">
                            <div style="display:flex;justify-content:space-between;align-items:center">
                                <strong>Activity (last 7 days)</strong>
                                <select id="analyticsRange" onchange="renderAnalyticsOverview()" style="padding:6px;border-radius:6px;background:rgba(255,255,255,0.02);color:var(--text-muted)">
                                    <option value="7">Last 7 days</option>
                                    <option value="30">Last 30 days</option>
                                    <option value="90">Last 90 days</option>
                                </select>
                            </div>
                            <div class="chart-wrapper" style="margin-top:12px">
                                <canvas id="analyticsCanvas" class="chart-canvas"></canvas>
                            </div>
                            <div class="chart-legend">
                                <span><i class="chart-key" style="background:linear-gradient(90deg,var(--primary),#06b6d4)"></i> Activity</span>
                                <span><i class="chart-key" style="background:#ffc107"></i> Time Spent</span>
                            </div>
                        </div>

                        <div style="width:320px;display:flex;flex-direction:column;gap:12px">
                            <div class="card-bg">
                                <p style="margin:0;">Total Actions</p>
                                <div style="font-size:1.6rem;font-weight:700;color:var(--primary);" id="analyticsTotalActions">0</div>
                                <div class="tiny-muted">Interactions recorded in selected range</div>
                            </div>
                            <div class="card-bg">
                                <p style="margin:0;">Avg Session</p>
                                <div style="font-size:1.6rem;font-weight:700;color:#4caf50;" id="analyticsAvgSession">0m</div>
                                <div class="tiny-muted">Average session duration</div>
                            </div>
                            <div class="card-bg">
                                <p style="margin:0;">Top Skill</p>
                                <div style="font-size:1rem;font-weight:700;color:#9c27b0;" id="analyticsTopSkill">‚Äî</div>
                                <div class="tiny-muted">Most active skill area</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Learning Tab -->
                <div id="analyticsLearning" class="card-bg hidden">
                    <h2>Learning Progress</h2>
                    <div style="margin-top: 1rem;">
                        <div style="margin-bottom: 1rem;">
                            <p><strong>JavaScript Fundamentals</strong> <span style="float: right; color: var(--primary);">100%</span></p>
                            <div class="progress-bar"><div class="progress-fill" style="width: 100%; background: #4caf50;"></div></div>
                        </div>
                        <div style="margin-bottom: 1rem;">
                            <p><strong>React Advanced</strong> <span style="float: right; color: var(--primary);">85%</span></p>
                            <div class="progress-bar"><div class="progress-fill" style="width: 85%; background: #2196f3;"></div></div>
                        </div>
                        <div style="margin-bottom: 1rem;">
                            <p><strong>Web Design Mastery</strong> <span style="float: right; color: var(--primary);">60%</span></p>
                            <div class="progress-bar"><div class="progress-fill" style="width: 60%; background: #ff9800;"></div></div>
                        </div>
                        <div style="margin-bottom: 1rem;">
                            <p><strong>Python for Data Science</strong> <span style="float: right; color: var(--primary);">45%</span></p>
                            <div class="progress-bar"><div class="progress-fill" style="width: 45%; background: #e91e63;"></div></div>
                        </div>
                    </div>
                </div>

                <!-- Skills Tab -->
                <div id="analyticsSkills" class="card-bg hidden">
                    <h2>Top Skills by Activity</h2>
                    <div style="margin-top: 1rem;">
                        <div style="display: flex; gap: 1rem; margin-bottom: 1rem; align-items: center;">
                            <span style="flex: 0 0 100px;">JavaScript</span>
                            <div class="progress-bar" style="flex: 1;"><div class="progress-fill" style="width: 95%; background: var(--primary);"></div></div>
                            <span style="color: var(--primary); font-weight: bold;">95%</span>
                        </div>
                        <div style="display: flex; gap: 1rem; margin-bottom: 1rem; align-items: center;">
                            <span style="flex: 0 0 100px;">React</span>
                            <div class="progress-bar" style="flex: 1;"><div class="progress-fill" style="width: 88%;"></div></div>
                            <span style="color: #00d084; font-weight: bold;">88%</span>
                        </div>
                        <div style="display: flex; gap: 1rem; margin-bottom: 1rem; align-items: center;">
                            <span style="flex: 0 0 100px;">CSS</span>
                            <div class="progress-bar" style="flex: 1;"><div class="progress-fill" style="width: 82%;"></div></div>
                            <span style="color: #ff9800; font-weight: bold;">82%</span>
                        </div>
                        <div style="display: flex; gap: 1rem; margin-bottom: 1rem; align-items: center;">
                            <span style="flex: 0 0 100px;">Web Design</span>
                            <div class="progress-bar" style="flex: 1;"><div class="progress-fill" style="width: 78%;"></div></div>
                            <span style="color: #2196f3; font-weight: bold;">78%</span>
                        </div>
                    </div>
                </div>

                <!-- Monthly Tab -->
                <div id="analyticsMonthly" class="card-bg hidden">
                    <h2>Monthly Report</h2>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 1rem;">
                        <div style="padding: 1rem; background: rgba(0, 212, 255, 0.1); border-radius: 8px; text-align: center;">
                            <p style="color: var(--text-muted); font-size: 0.85rem; margin-bottom: 0.5rem;">Total Learning Time</p>
                            <div style="font-size: 2rem; color: var(--primary); font-weight: bold;">24 hours</div>
                        </div>
                        <div style="padding: 1rem; background: rgba(76, 175, 80, 0.1); border-radius: 8px; text-align: center;">
                            <p style="color: var(--text-muted); font-size: 0.85rem; margin-bottom: 0.5rem;">Courses Completed</p>
                            <div style="font-size: 2rem; color: #4caf50; font-weight: bold;">3</div>
                        </div>
                        <div style="padding: 1rem; background: rgba(255, 193, 7, 0.1); border-radius: 8px; text-align: center;">
                            <p style="color: var(--text-muted); font-size: 0.85rem; margin-bottom: 0.5rem;">XP Earned</p>
                            <div style="font-size: 2rem; color: #ffc107; font-weight: bold;">1,250 XP</div>
                        </div>
                        <div style="padding: 1rem; background: rgba(156, 39, 176, 0.1); border-radius: 8px; text-align: center;">
                            <p style="color: var(--text-muted); font-size: 0.85rem; margin-bottom: 0.5rem;">Active Days</p>
                            <div style="font-size: 2rem; color: #9c27b0; font-weight: bold;">26/30</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- MESSAGES SECTION -->
            <section id="messages" class="section hidden">
                <h1><i class="fas fa-comments"></i> Direct Messages</h1>
                
                <div style="display: grid; grid-template-columns: 300px 1fr; gap: 1rem; min-height: 500px;">
                    <!-- Conversations List -->
                    <div class="card-bg" style="max-height: 500px; overflow-y: auto;">
                        <h3 style="margin-bottom: 1rem;"><i class="fas fa-inbox"></i> Conversations</h3>
                        <div id="messagesList" style="display: flex; flex-direction: column; gap: 0.5rem;">
                            <div onclick="openChat('alex', 'Alex Developer')" style="padding: 0.8rem; background: rgba(0, 212, 255, 0.1); border-radius: 8px; cursor: pointer; border-left: 3px solid var(--primary);">
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <strong>Alex Developer</strong>
                                    <span style="background: var(--primary); color: white; border-radius: 50%; width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; font-size: 0.75rem;">1</span>
                                </div>
                                <p style="color: var(--text-muted); font-size: 0.85rem; margin-top: 0.3rem; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">Can you help me with React patterns?</p>
                                <p style="color: var(--text-muted); font-size: 0.75rem; margin-top: 0.3rem;">2 min ago</p>
                            </div>
                            <div onclick="openChat('sarah', 'Sarah Designer')" style="padding: 0.8rem; background: rgba(255, 255, 255, 0.05); border-radius: 8px; cursor: pointer; border-left: 3px solid transparent;">
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <strong>Sarah Designer</strong>
                                </div>
                                <p style="color: var(--text-muted); font-size: 0.85rem; margin-top: 0.3rem; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">Thanks for the design feedback!</p>
                                <p style="color: var(--text-muted); font-size: 0.75rem; margin-top: 0.3rem;">1 hour ago</p>
                            </div>
                            <div onclick="openChat('john', 'John Coder')" style="padding: 0.8rem; background: rgba(255, 255, 255, 0.05); border-radius: 8px; cursor: pointer; border-left: 3px solid transparent;">
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <strong>John Coder</strong>
                                </div>
                                <p style="color: var(--text-muted); font-size: 0.85rem; margin-top: 0.3rem; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">Let's collaborate on that project</p>
                                <p style="color: var(--text-muted); font-size: 0.75rem; margin-top: 0.3rem;">3 hours ago</p>
                            </div>
                            <div onclick="openChat('emma', 'Emma Watson')" style="padding: 0.8rem; background: rgba(255, 255, 255, 0.05); border-radius: 8px; cursor: pointer; border-left: 3px solid transparent;">
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <strong>Emma Watson</strong>
                                </div>
                                <p style="color: var(--text-muted); font-size: 0.85rem; margin-top: 0.3rem; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">Python tips appreciated</p>
                                <p style="color: var(--text-muted); font-size: 0.75rem; margin-top: 0.3rem;">Yesterday</p>
                            </div>
                        </div>
                    </div>

                    <!-- Chat Area -->
                    <div class="card-bg" style="display: flex; flex-direction: column;">
                        <div id="chatHeader" style="padding-bottom: 1rem; border-bottom: 1px solid rgba(255, 255, 255, 0.1); margin-bottom: 1rem;">
                            <h3 id="chatName">Select a conversation</h3>
                            <p style="color: var(--text-muted); font-size: 0.85rem;">Online</p>
                        </div>

                        <div id="chatMessages" style="flex: 1; overflow-y: auto; margin-bottom: 1rem; display: flex; flex-direction: column; gap: 0.8rem;">
                            <div style="text-align: center; color: var(--text-muted);">
                                <p>Select a conversation to start messaging</p>
                            </div>
                        </div>

                        <div style="display: flex; gap: 0.5rem;">
                            <input id="messageInput" type="text" placeholder="Type your message..." style="flex: 1; padding: 0.8rem; border: 1px solid var(--primary); border-radius: 8px; background: rgba(0, 212, 255, 0.05); color: var(--text);" disabled>
                            <button class="btn btn-primary" onclick="sendChatMessage()" id="sendBtn" disabled>
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </section>


            <!-- SETTINGS SECTION -->
            <section id="settings" class="section hidden">
                <h1><i class="fas fa-cog"></i> Settings & Preferences</h1>
                
                <!-- Tabs -->
                <div style="display: flex; gap: 1rem; margin-bottom: 1.5rem; flex-wrap: wrap;">
                    <button class="btn btn-primary" onclick="loadSettingsTab('profile', this)" style="flex: 1; min-width: 120px;">
                        <i class="fas fa-user"></i> Profile
                    </button>
                    <button class="btn btn-outline" onclick="loadSettingsTab('privacy', this)" style="flex: 1; min-width: 120px;">
                        <i class="fas fa-lock"></i> Privacy
                    </button>
                    <button class="btn btn-outline" onclick="loadSettingsTab('notifications', this)" style="flex: 1; min-width: 120px;">
                        <i class="fas fa-bell"></i> Notifications
                    </button>
                    <button class="btn btn-outline" onclick="loadSettingsTab('preferences', this)" style="flex: 1; min-width: 120px;">
                        <i class="fas fa-sliders-h"></i> Preferences
                    </button>
                </div>

                <!-- Profile Tab -->
                <div id="settingsProfile" class="card-bg">
                    <h2><i class="fas fa-user"></i> Profile Settings</h2>
                    <div style="margin-top: 1rem;">
                        <label style="display: block; margin-bottom: 1rem;">
                            <p style="margin-bottom: 0.3rem; color: var(--text-muted); font-size: 0.9rem;">Full Name</p>
                            <input id="settingsFullName" type="text" value="Alex Developer" style="width: 100%; padding: 0.8rem; border: 1px solid var(--primary); border-radius: 8px; background: rgba(0, 212, 255, 0.05); color: var(--text);">
                        </label>
                        <label style="display: block; margin-bottom: 1rem;">
                            <p style="margin-bottom: 0.3rem; color: var(--text-muted); font-size: 0.9rem;">Email Address</p>
                            <input id="settingsEmail" type="email" value="alex@example.com" style="width: 100%; padding: 0.8rem; border: 1px solid var(--primary); border-radius: 8px; background: rgba(0, 212, 255, 0.05); color: var(--text);">
                        </label>
                        <label style="display: block; margin-bottom: 1rem;">
                            <p style="margin-bottom: 0.3rem; color: var(--text-muted); font-size: 0.9rem;">Phone Number</p>
                            <input id="settingsPhone" type="tel" value="+1 234 567 890" style="width: 100%; padding: 0.8rem; border: 1px solid var(--primary); border-radius: 8px; background: rgba(0, 212, 255, 0.05); color: var(--text);">
                        </label>
                        <label style="display: block; margin-bottom: 1rem;">
                            <p style="margin-bottom: 0.3rem; color: var(--text-muted); font-size: 0.9rem;">Bio</p>
                            <textarea id="settingsBio" style="width: 100%; padding: 0.8rem; border: 1px solid var(--primary); border-radius: 8px; background: rgba(0, 212, 255, 0.05); color: var(--text); height: 100px;">Full-stack developer with 8 years experience</textarea>
                        </label>
                        <button id="btnSaveProfile" class="btn btn-primary" onclick="saveSettings('profile')" style="width: 100%;">
                            <i class="fas fa-save"></i> Save Changes
                        </button>
                    </div>
                </div>

                <!-- Privacy Tab -->
                <div id="settingsPrivacy" class="card-bg hidden">
                    <h2><i class="fas fa-lock"></i> Privacy Settings</h2>
                    <div style="margin-top: 1rem;">
                        <div style="padding: 1rem; background: rgba(0, 212, 255, 0.05); border-radius: 8px; margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <p><strong>Profile Visibility</strong></p>
                                    <p style="color: var(--text-muted); font-size: 0.85rem;">Allow others to find your profile</p>
                                </div>
                                <input id="settingsVisibility" type="checkbox" checked style="width: 20px; height: 20px;">
                            </div>
                        </div>
                        <div style="padding: 1rem; background: rgba(0, 212, 255, 0.05); border-radius: 8px; margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <p><strong>Show Learning Progress</strong></p>
                                    <p style="color: var(--text-muted); font-size: 0.85rem;">Display your courses and achievements publicly</p>
                                </div>
                                <input id="settingsShowProgress" type="checkbox" checked style="width: 20px; height: 20px;">
                            </div>
                        </div>
                        <div style="padding: 1rem; background: rgba(0, 212, 255, 0.05); border-radius: 8px; margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <p><strong>Allow Connection Requests</strong></p>
                                    <p style="color: var(--text-muted); font-size: 0.85rem;">Receive connection requests from other users</p>
                                </div>
                                <input id="settingsConnections" type="checkbox" checked style="width: 20px; height: 20px;">
                            </div>
                        </div>
                        <div style="padding: 1rem; background: rgba(0, 212, 255, 0.05); border-radius: 8px; margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <p><strong>Show Last Active</strong></p>
                                    <p style="color: var(--text-muted); font-size: 0.85rem;">Let others see when you were last online</p>
                                </div>
                                <input id="settingsShowLastActive" type="checkbox" style="width: 20px; height: 20px;">
                            </div>
                        </div>
                        <button id="btnSavePrivacy" class="btn btn-primary" onclick="saveSettings('privacy')" style="width: 100%;">
                            <i class="fas fa-save"></i> Save Privacy Settings
                        </button>
                    </div>
                </div>

                <!-- Notifications Tab -->
                <div id="settingsNotifications" class="card-bg hidden">
                    <h2><i class="fas fa-bell"></i> Notification Preferences</h2>
                    <div style="margin-top: 1rem;">
                        <div style="padding: 1rem; background: rgba(255, 193, 7, 0.05); border-radius: 8px; margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <p><strong>Email Notifications</strong></p>
                                    <p style="color: var(--text-muted); font-size: 0.85rem;">Receive updates via email</p>
                                </div>
                                <input id="settingsEmailNotifications" type="checkbox" checked style="width: 20px; height: 20px;">
                            </div>
                        </div>
                        <div style="padding: 1rem; background: rgba(76, 175, 80, 0.05); border-radius: 8px; margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <p><strong>Course Updates</strong></p>
                                    <p style="color: var(--text-muted); font-size: 0.85rem;">New courses and learning materials</p>
                                </div>
                                <input id="settingsCourseUpdates" type="checkbox" checked style="width: 20px; height: 20px;">
                            </div>
                        </div>
                        <div style="padding: 1rem; background: rgba(0, 212, 255, 0.05); border-radius: 8px; margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <p><strong>Connection Requests</strong></p>
                                    <p style="color: var(--text-muted); font-size: 0.85rem;">Notify me of new connection requests</p>
                                </div>
                                <input id="settingsConnectionNotifications" type="checkbox" checked style="width: 20px; height: 20px;">
                            </div>
                        </div>
                        <div style="padding: 1rem; background: rgba(156, 39, 176, 0.05); border-radius: 8px; margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <p><strong>Direct Messages</strong></p>
                                    <p style="color: var(--text-muted); font-size: 0.85rem;">Notify me when I receive a message</p>
                                </div>
                                <input id="settingsDirectMessageNotifications" type="checkbox" checked style="width: 20px; height: 20px;">
                            </div>
                        </div>
                        <button id="btnSaveNotifications" class="btn btn-primary" onclick="saveSettings('notifications')" style="width: 100%;">
                            <i class="fas fa-save"></i> <span data-i18n="save_notifications">Save Notifications</span>
                        </button>
                    </div>
                </div>

                <!-- Preferences Tab -->
                <div id="settingsPreferences" class="card-bg hidden">
                    <h2><i class="fas fa-sliders-h"></i> <span data-i18n="preferences_header">Preferences</span></h2>
                    <div style="margin-top: 1rem;">
                        <label style="display: block; margin-bottom: 1rem;">
                            <p data-i18n="pref_theme" style="margin-bottom: 0.3rem; color: var(--text-muted); font-size: 0.9rem;">Theme</p>
                            <select id="settingsTheme" onchange="changeTheme(this.value); showToast(getText('theme_changed'), 'success');" style="width: 100%; padding: 0.8rem; border: 1px solid var(--primary); border-radius: 8px; background: rgba(0, 212, 255, 0.05); color: var(--text);">
                                <option value="dark">Dark Mode</option>
                                <option value="light">Light Mode</option>
                            </select>
                        </label>
                        <label style="display: block; margin-bottom: 1rem;">
                            <p data-i18n="pref_language" style="margin-bottom: 0.3rem; color: var(--text-muted); font-size: 0.9rem;">Language</p>
                            <select id="settingsLanguage" onchange="changeLanguage(this.value); showToast(getText('language_changed'), 'success');" style="width: 100%; padding: 0.8rem; border: 1px solid var(--primary); border-radius: 8px; background: rgba(0, 212, 255, 0.05); color: var(--text);">
                                <option value="en">English</option>
                                <option value="es">Espa√±ol (Spanish)</option>
                                <option value="fr">Fran√ßais (French)</option>
                                <option value="de">Deutsch (German)</option>
                                <option value="it">Italiano (Italian)</option>
                                <option value="pt">Portugu√™s (Portuguese)</option>
                                <option value="ru">–†—É—Å—Å–∫–∏–π (Russian)</option>
                                <option value="ja">Êó•Êú¨Ë™û (Japanese)</option>
                                <option value="zh">‰∏≠Êñá (Chinese Simplified)</option>
                                <option value="zh-tw">ÁπÅÈ´î‰∏≠Êñá (Chinese Traditional)</option>
                                <option value="ko">ÌïúÍµ≠Ïñ¥ (Korean)</option>
                                <option value="th">‡πÑ‡∏ó‡∏¢ (Thai)</option>
                                <option value="vi">Ti·∫øng Vi·ªát (Vietnamese)</option>
                                <option value="id">Bahasa Indonesia (Indonesian)</option>
                                <option value="tl">Tagalog (Filipino)</option>
                                <option value="ms">Bahasa Melayu (Malay)</option>
                                <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ© (Arabic)</option>
                                <option value="he">◊¢◊ë◊®◊ô◊™ (Hebrew)</option>
                                <option value="tr">T√ºrk√ße (Turkish)</option>
                                <option value="el">ŒïŒªŒªŒ∑ŒΩŒπŒ∫Œ¨ (Greek)</option>
                                <option value="pl">Polski (Polish)</option>
                                <option value="cs">ƒåe≈°tina (Czech)</option>
                                <option value="sk">Slovenƒçina (Slovak)</option>
                                <option value="hu">Magyar (Hungarian)</option>
                                <option value="ro">Rom√¢nƒÉ (Romanian)</option>
                                <option value="bg">–ë—ä–ª–≥–∞—Ä—Å–∫–∏ (Bulgarian)</option>
                                <option value="sr">–°—Ä–ø—Å–∫–∏ (Serbian)</option>
                                <option value="hr">Hrvatski (Croatian)</option>
                                <option value="uk">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞ (Ukrainian)</option>
                                <option value="sv">Svenska (Swedish)</option>
                                <option value="no">Norsk (Norwegian)</option>
                                <option value="da">Dansk (Danish)</option>
                                <option value="fi">Suomi (Finnish)</option>
                                <option value="nl">Nederlands (Dutch)</option>
                                <option value="af">Afrikaans</option>
                                <option value="sw">Kiswahili (Swahili)</option>
                                <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä (Hindi)</option>
                                <option value="bn">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ (Bengali)</option>
                                <option value="ur">ÿßÿ±ÿØŸà (Urdu)</option>
                                <option value="pa">‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä (Punjabi)</option>
                                <option value="gu">‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä (Gujarati)</option>
                                <option value="mr">‡§Æ‡§∞‡§æ‡§†‡•Ä (Marathi)</option>
                                <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç (Tamil)</option>
                                <option value="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å (Telugu)</option>
                                <option value="kn">‡≤ï‡≤®‡≥ç‡≤®‡≤° (Kannada)</option>
                                <option value="ml">‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç (Malayalam)</option>
                                <option value="mn">–ú–æ–Ω–≥–æ–ª (Mongolian)</option>
                                <option value="km">·ûÅ·üí·ûò·üÇ·ûö (Cambodian)</option>
                                <option value="lo">‡∫•‡∫≤‡∫ß (Lao)</option>
                                <option value="my">·Äô·Äº·Äî·Ä∫·Äô·Ä¨ (Burmese)</option>
                                <option value="si">‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω (Sinhalese)</option>
                                <option value="fa">ŸÅÿßÿ±ÿ≥€å (Persian)</option>
                                <option value="is">√çslenska (Icelandic)</option>
                                <option value="et">Eesti (Estonian)</option>
                                <option value="lv">Latvie≈°u (Latvian)</option>
                                <option value="lt">Lietuvi≈≥ (Lithuanian)</option>
                            </select>
                        </label>
                        <label style="display: block; margin-bottom: 1rem;">
                            <p data-i18n="pref_time_zone" style="margin-bottom: 0.3rem; color: var(--text-muted); font-size: 0.9rem;">Time Zone</p>
                            <select id="settingsTimeZone" style="width: 100%; padding: 0.8rem; border: 1px solid var(--primary); border-radius: 8px; background: rgba(0, 212, 255, 0.05); color: var(--text);">
                                <option>UTC - 5 (EST)</option>
                                <option>UTC - 6 (CST)</option>
                                <option>UTC - 7 (MST)</option>
                                <option>UTC - 8 (PST)</option>
                                <option>UTC +0 (GMT)</option>
                                <option>UTC +1 (CET)</option>
                            </select>
                        </label>
                        <label style="display: block; margin-bottom: 1rem;">
                            <p data-i18n="pref_content_pref" style="margin-bottom: 0.3rem; color: var(--text-muted); font-size: 0.9rem;">Content Preference</p>
                            <select id="settingsContentPref" style="width: 100%; padding: 0.8rem; border: 1px solid var(--primary); border-radius: 8px; background: rgba(0, 212, 255, 0.05); color: var(--text);">
                                <option>All Levels</option>
                                <option>Beginner</option>
                                <option>Intermediate</option>
                                <option>Advanced</option>
                            </select>
                        </label>
                        <button class="btn btn-primary" onclick="saveSettings('preferences')" style="width: 100%;">
                            <i class="fas fa-save"></i> <span data-i18n="save_preferences">Save Preferences</span>
                        </button>
                    </div>
                </div>
            </section>

            <!-- AI CHATBOT SECTION (NEW!) -->
            <section id="ai" class="section hidden">
                <h1><i class="fas fa-robot"></i> AI Learning Assistant</h1>
                
                <div style="display: grid; grid-template-columns: 280px 1fr; gap: 1rem; min-height: 600px;">
                    <!-- Quick Actions -->
                    <div class="card-bg" style="max-height: 600px; overflow-y: auto;">
                        <h3 style="margin-bottom: 1rem;"><i class="fas fa-bolt"></i> Quick Actions</h3>
                        <div style="display: flex; flex-direction: column; gap: 0.5rem;">
                            <button class="btn btn-outline" onclick="askAI('Explain React hooks with examples')" style="text-align: left; width: 100%;">
                                <i class="fas fa-question"></i> React Hooks
                            </button>
                            <button class="btn btn-outline" onclick="askAI('How to debug JavaScript efficiently')" style="text-align: left; width: 100%;">
                                <i class="fas fa-bug"></i> Debug Tips
                            </button>
                            <button class="btn btn-outline" onclick="askAI('Best practices for CSS')" style="text-align: left; width: 100%;">
                                <i class="fas fa-palette"></i> CSS Tips
                            </button>
                            <button class="btn btn-outline" onclick="askAI('How to optimize performance')" style="text-align: left; width: 100%;">
                                <i class="fas fa-rocket"></i> Performance
                            </button>
                            <button class="btn btn-outline" onclick="askAI('Explain async/await')" style="text-align: left; width: 100%;">
                                <i class="fas fa-sync"></i> Async/Await
                            </button>
                            <button class="btn btn-outline" onclick="askAI('Best practices for Git')" style="text-align: left; width: 100%;">
                                <i class="fas fa-code-branch"></i> Git Tips
                            </button>
                        </div>
                    </div>

                    <!-- Chat Area -->
                    <div class="card-bg" style="display: flex; flex-direction: column;">
                        <h2 style="margin-bottom: 1rem;"><i class="fas fa-robot"></i> Chat with AI</h2>

                        <div id="aiChatbox" style="flex: 1; overflow-y: auto; margin-bottom: 1rem; padding: 1rem; background: rgba(0, 212, 255, 0.05); border-radius: 8px; display: flex; flex-direction: column; gap: 0.8rem;">
                            <div style="text-align: left;">
                                <p style="background: rgba(0, 212, 255, 0.2); padding: 0.8rem; border-radius: 8px; margin: 0;"><strong>ü§ñ AI:</strong> Hello! I'm your AI learning assistant. I'm here to help you with programming, learning strategies, and career advice. What would you like to know?</p>
                            </div>
                        </div>

                        <div style="display: flex; gap: 0.5rem;">
                            <input id="aiInput" type="text" placeholder="Ask your question..." style="flex: 1; padding: 0.8rem; border: 1px solid var(--primary); border-radius: 8px; background: rgba(0, 212, 255, 0.05); color: var(--text);">
                            <button class="btn btn-primary" onclick="askAI(document.getElementById('aiInput').value)">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </section>


            <!-- VIDEO SECTION (NEW!) -->
            <section id="video" class="section hidden">
                <h1><i class="fas fa-video"></i> Video Academy</h1>
                
                <!-- Tabs -->
                <div style="display: flex; gap: 1rem; margin-bottom: 1.5rem; flex-wrap: wrap;">
                    <button class="btn btn-primary" onclick="loadVideoTab('watch', this)" style="flex: 1; min-width: 120px;">
                        <i class="fas fa-play"></i> Watch
                    </button>
                    <button class="btn btn-outline" onclick="loadVideoTab('playlists', this)" style="flex: 1; min-width: 120px;">
                        <i class="fas fa-list"></i> Playlists
                    </button>
                    <button class="btn btn-outline" onclick="loadVideoTab('upload', this)" style="flex: 1; min-width: 120px;">
                        <i class="fas fa-cloud-upload-alt"></i> Upload
                    </button>
                    <button class="btn btn-outline" onclick="loadVideoTab('recommended', this)" style="flex: 1; min-width: 120px;">
                        <i class="fas fa-star"></i> Recommended
                    </button>
                </div>

                <!-- Watch Tab -->
                <div id="videoWatch" class="card-bg">
                    <h2>Now Playing</h2>
                    <div style="height: 350px; background: rgba(0, 212, 255, 0.1); border-radius: 8px; display: flex; align-items: center; justify-content: center; margin-bottom: 1rem; position: relative;">
                        <div style="text-align: center;">
                            <i class="fas fa-play-circle" style="font-size: 4rem; color: var(--primary); cursor: pointer;" onclick="playVideo('React Advanced Patterns')"></i>
                            <p style="color: var(--text-muted); margin-top: 1rem;">React Advanced Patterns</p>
                        </div>
                        <div style="position: absolute; bottom: 1rem; left: 1rem; right: 1rem; height: 4px; background: rgba(255, 255, 255, 0.2); border-radius: 2px;">
                            <div style="height: 100%; width: 35%; background: var(--primary); border-radius: 2px;"></div>
                        </div>
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                        <div>
                            <h3>React Advanced Patterns</h3>
                            <p style="color: var(--text-muted); font-size: 0.85rem;">Instructor: Alex Developer ‚Ä¢ 35 min</p>
                        </div>
                        <div style="text-align: right;">
                            <p style="color: var(--text-muted); font-size: 0.85rem;">12 min / 35 min</p>
                        </div>
                    </div>
                    <div style="display: flex; gap: 0.5rem; margin-bottom: 1rem;">
                        <button class="btn btn-primary" onclick="playVideo('React Advanced Patterns')">
                            <i class="fas fa-play"></i> Play
                        </button>
                        <button class="btn btn-outline" onclick="showToast('‚è∏ Paused', 'info')">
                            <i class="fas fa-pause"></i> Pause
                        </button>
                        <button class="btn btn-outline" onclick="showToast('‚ù§ Video added to favorites', 'success')">
                            <i class="fas fa-heart"></i> Favorite
                        </button>
                        <button class="btn btn-outline" onclick="showToast('‚úì Video marked as watched', 'success')">
                            <i class="fas fa-check"></i> Watched
                        </button>
                    </div>
                    <p style="color: var(--text-muted); background: rgba(0, 212, 255, 0.05); padding: 1rem; border-radius: 8px;"><strong>Description:</strong> Learn advanced React patterns including hooks, context API, render props, and more. Perfect for intermediate developers looking to level up their React skills.</p>
                </div>

                <!-- Playlists Tab -->
                <div id="videoPlaylists" class="card-bg hidden">
                    <h2>My Playlists</h2>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 1rem;">
                        <div style="padding: 1rem; background: rgba(0, 212, 255, 0.1); border-radius: 8px; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.background='rgba(0, 212, 255, 0.2)'" onmouseout="this.style.background='rgba(0, 212, 255, 0.1)'">
                            <i class="fas fa-list" style="font-size: 2rem; color: var(--primary); margin-bottom: 0.5rem;"></i>
                            <p><strong>JavaScript Masterclass</strong></p>
                            <p style="color: var(--text-muted); font-size: 0.85rem;">12 videos ‚Ä¢ 4 hours</p>
                            <button class="btn btn-primary" style="width: 100%; margin-top: 0.5rem;" onclick="playPlaylist('JavaScript Masterclass')">
                                <i class="fas fa-play"></i> Play
                            </button>
                        </div>
                        <div style="padding: 1rem; background: rgba(76, 175, 80, 0.1); border-radius: 8px; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.background='rgba(76, 175, 80, 0.2)'" onmouseout="this.style.background='rgba(76, 175, 80, 0.1)'">
                            <i class="fas fa-palette" style="font-size: 2rem; color: #4caf50; margin-bottom: 0.5rem;"></i>
                            <p><strong>Web Design Bootcamp</strong></p>
                            <p style="color: var(--text-muted); font-size: 0.85rem;">8 videos ‚Ä¢ 3 hours</p>
                            <button class="btn btn-primary" style="width: 100%; margin-top: 0.5rem; background: #4caf50;" onclick="playPlaylist('Web Design Bootcamp')">
                                <i class="fas fa-play"></i> Play
                            </button>
                        </div>
                        <div style="padding: 1rem; background: rgba(156, 39, 176, 0.1); border-radius: 8px; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.background='rgba(156, 39, 176, 0.2)'" onmouseout="this.style.background='rgba(156, 39, 176, 0.1)'">
                            <i class="fas fa-code" style="font-size: 2rem; color: #9c27b0; margin-bottom: 0.5rem;"></i>
                            <p><strong>React & Redux</strong></p>
                            <p style="color: var(--text-muted); font-size: 0.85rem;">15 videos ‚Ä¢ 5 hours</p>
                            <button class="btn btn-primary" style="width: 100%; margin-top: 0.5rem; background: #9c27b0;" onclick="playPlaylist('React & Redux')">
                                <i class="fas fa-play"></i> Play
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Upload Tab -->
                <div id="videoUpload" class="card-bg hidden">
                    <h2><i class="fas fa-cloud-upload-alt"></i> Upload Video</h2>
                    <div style="padding: 2rem; background: rgba(0, 212, 255, 0.05); border: 2px dashed var(--primary); border-radius: 8px; text-align: center; margin-bottom: 1rem; cursor: pointer;" ondrop="showToast('Video uploaded! ‚úì', 'success')" ondragover="this.style.background='rgba(0, 212, 255, 0.15)'">
                        <i class="fas fa-cloud-upload-alt" style="font-size: 3rem; color: var(--primary); margin-bottom: 1rem;"></i>
                        <p style="color: var(--text-muted); margin: 0;">Drag & drop your video here or click to browse</p>
                        <p style="color: var(--text-muted); font-size: 0.85rem; margin: 0.5rem 0 0 0;">Maximum 500MB - MP4, WebM, or OGV</p>
                    </div>
                    <div style="margin-bottom: 1rem;">
                        <label style="display: block; margin-bottom: 0.5rem; color: var(--text-muted); font-size: 0.9rem;">Video Title</label>
                        <input type="text" placeholder="Enter video title" style="width: 100%; padding: 0.8rem; border: 1px solid var(--primary); border-radius: 8px; background: rgba(0, 212, 255, 0.05); color: var(--text); margin-bottom: 1rem;">
                        <label style="display: block; margin-bottom: 0.5rem; color: var(--text-muted); font-size: 0.9rem;">Description</label>
                        <textarea placeholder="Describe your video..." style="width: 100%; padding: 0.8rem; border: 1px solid var(--primary); border-radius: 8px; background: rgba(0, 212, 255, 0.05); color: var(--text); height: 100px; margin-bottom: 1rem;"></textarea>
                        <button class="btn btn-primary" onclick="showToast('Video uploaded successfully! ‚úì', 'success')" style="width: 100%;">
                            <i class="fas fa-upload"></i> Upload Video
                        </button>
                    </div>
                </div>

                <!-- Recommended Tab -->
                <div id="videoRecommended" class="card-bg hidden">
                    <h2><i class="fas fa-star"></i> Recommended Videos</h2>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin-top: 1rem;">
                        <div style="background: rgba(0, 212, 255, 0.05); border-radius: 8px; overflow: hidden;">
                            <div style="height: 120px; background: rgba(0, 212, 255, 0.2); display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-play-circle" style="font-size: 2.5rem; color: var(--primary);"></i>
                            </div>
                            <div style="padding: 1rem;">
                                <p><strong>Advanced CSS Techniques</strong></p>
                                <p style="color: var(--text-muted); font-size: 0.85rem;">Sarah Designer ‚Ä¢ 28 min</p>
                                <div style="margin-top: 0.5rem;">
                                    <span style="color: #ffc107;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                                    <span style="color: var(--text-muted); font-size: 0.85rem;"> 4.8/5</span>
                                </div>
                                <button class="btn btn-primary" style="width: 100%; margin-top: 0.5rem;" onclick="playVideo('Advanced CSS Techniques')">Watch</button>
                            </div>
                        </div>
                        <div style="background: rgba(76, 175, 80, 0.05); border-radius: 8px; overflow: hidden;">
                            <div style="height: 120px; background: rgba(76, 175, 80, 0.2); display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-play-circle" style="font-size: 2.5rem; color: #4caf50;"></i>
                            </div>
                            <div style="padding: 1rem;">
                                <p><strong>Python Data Analysis</strong></p>
                                <p style="color: var(--text-muted); font-size: 0.85rem;">John Scientist ‚Ä¢ 45 min</p>
                                <div style="margin-top: 0.5rem;">
                                    <span style="color: #ffc107;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                                    <span style="color: var(--text-muted); font-size: 0.85rem;"> 4.7/5</span>
                                </div>
                                <button class="btn btn-primary" style="width: 100%; margin-top: 0.5rem; background: #4caf50;" onclick="playVideo('Python Data Analysis')">Watch</button>
                            </div>
                        </div>
                        <div style="background: rgba(156, 39, 176, 0.05); border-radius: 8px; overflow: hidden;">
                            <div style="height: 120px; background: rgba(156, 39, 176, 0.2); display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-play-circle" style="font-size: 2.5rem; color: #9c27b0;"></i>
                            </div>
                            <div style="padding: 1rem;">
                                <p><strong>Mobile App Development</strong></p>
                                <p style="color: var(--text-muted); font-size: 0.85rem;">Mike Developer ‚Ä¢ 52 min</p>
                                <div style="margin-top: 0.5rem;">
                                    <span style="color: #ffc107;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</span>
                                    <span style="color: var(--text-muted); font-size: 0.85rem;"> 4.6/5</span>
                                </div>
                                <button class="btn btn-primary" style="width: 100%; margin-top: 0.5rem; background: #9c27b0;" onclick="playVideo('Mobile App Development')">Watch</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>


            <!-- PROFESSIONAL SECTION (NEW!) -->
            <section id="professional" class="section hidden">
                <h1><i class="fas fa-briefcase"></i> Professional Profile</h1>
                
                <!-- Tabs -->
                <div style="display: flex; gap: 1rem; margin-bottom: 1.5rem; flex-wrap: wrap;">
                    <button class="btn btn-primary" onclick="loadProfessionalTab('resume', this)" style="flex: 1; min-width: 120px;">
                        <i class="fas fa-file-alt"></i> Resume
                    </button>
                    <button class="btn btn-outline" onclick="loadProfessionalTab('portfolio', this)" style="flex: 1; min-width: 120px;">
                        <i class="fas fa-images"></i> Portfolio
                    </button>
                    <button class="btn btn-outline" onclick="loadProfessionalTab('endorsements', this)" style="flex: 1; min-width: 120px;">
                        <i class="fas fa-medal"></i> Endorsements
                    </button>
                    <button class="btn btn-outline" onclick="loadProfessionalTab('certificates', this)" style="flex: 1; min-width: 120px;">
                        <i class="fas fa-certificate"></i> Certificates
                    </button>
                </div>

                <!-- Resume Tab -->
                <div id="profResume" class="card-bg">
                    <h2><i class="fas fa-file-alt"></i> Resume Builder</h2>
                    <div style="margin-top: 1rem;">
                        <label style="display: block; margin-bottom: 1rem;">
                            <p style="margin-bottom: 0.3rem; color: var(--text-muted); font-size: 0.9rem;">Full Name</p>
                            <input type="text" value="Alex Developer" style="width: 100%; padding: 0.8rem; border: 1px solid var(--primary); border-radius: 8px; background: rgba(0, 212, 255, 0.05); color: var(--text);">
                        </label>
                        <label style="display: block; margin-bottom: 1rem;">
                            <p style="margin-bottom: 0.3rem; color: var(--text-muted); font-size: 0.9rem;">Professional Title</p>
                            <input type="text" value="Full-Stack Developer & Tech Lead" style="width: 100%; padding: 0.8rem; border: 1px solid var(--primary); border-radius: 8px; background: rgba(0, 212, 255, 0.05); color: var(--text);">
                        </label>
                        <label style="display: block; margin-bottom: 1rem;">
                            <p style="margin-bottom: 0.3rem; color: var(--text-muted); font-size: 0.9rem;">Email</p>
                            <input type="email" value="alex@example.com" style="width: 100%; padding: 0.8rem; border: 1px solid var(--primary); border-radius: 8px; background: rgba(0, 212, 255, 0.05); color: var(--text);">
                        </label>
                        <label style="display: block; margin-bottom: 1rem;">
                            <p style="margin-bottom: 0.3rem; color: var(--text-muted); font-size: 0.9rem;">Phone</p>
                            <input type="tel" value="+1 234 567 890" style="width: 100%; padding: 0.8rem; border: 1px solid var(--primary); border-radius: 8px; background: rgba(0, 212, 255, 0.05); color: var(--text);">
                        </label>
                        <label style="display: block; margin-bottom: 1rem;">
                            <p style="margin-bottom: 0.3rem; color: var(--text-muted); font-size: 0.9rem;">Professional Summary</p>
                            <textarea style="width: 100%; padding: 0.8rem; border: 1px solid var(--primary); border-radius: 8px; background: rgba(0, 212, 255, 0.05); color: var(--text); height: 100px;">Full-stack developer with 8+ years of experience in web and mobile application development. Specialized in JavaScript, React, and DevOps. Passionate about clean code and mentoring junior developers.</textarea>
                        </label>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                            <button class="btn btn-primary" onclick="showToast('Resume saved! ‚úì', 'success')">
                                <i class="fas fa-save"></i> Save Resume
                            </button>
                            <button class="btn btn-outline" onclick="showToast('Resume downloaded! ‚úì', 'success')">
                                <i class="fas fa-download"></i> Download PDF
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Portfolio Tab -->
                <div id="profPortfolio" class="card-bg hidden">
                    <h2><i class="fas fa-images"></i> Portfolio Projects</h2>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin-top: 1rem;">
                        <div style="background: rgba(0, 212, 255, 0.05); border-radius: 8px; padding: 1rem; border: 1px solid rgba(0, 212, 255, 0.2);">
                            <div style="height: 150px; background: rgba(0, 212, 255, 0.1); border-radius: 8px; margin-bottom: 1rem; display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-globe" style="font-size: 2rem; color: var(--primary);"></i>
                            </div>
                            <p><strong>E-commerce Platform</strong></p>
                            <p style="color: var(--text-muted); font-size: 0.85rem;">React, Node.js, MongoDB ‚Ä¢ 5,000 users</p>
                            <div style="display: flex; gap: 0.5rem; margin-top: 0.5rem;">
                                <button class="btn btn-primary" style="flex: 1; font-size: 0.8rem;" onclick="openProfessionalProject('E-commerce Platform')">View</button>
                                <button class="btn btn-outline" style="flex: 1; font-size: 0.8rem;" onclick="showToast('Project edited!', 'success')">Edit</button>
                            </div>
                        </div>
                        <div style="background: rgba(76, 175, 80, 0.05); border-radius: 8px; padding: 1rem; border: 1px solid rgba(76, 175, 80, 0.2);">
                            <div style="height: 150px; background: rgba(76, 175, 80, 0.1); border-radius: 8px; margin-bottom: 1rem; display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-mobile-alt" style="font-size: 2rem; color: #4caf50;"></i>
                            </div>
                            <p><strong>Mobile App</strong></p>
                            <p style="color: var(--text-muted); font-size: 0.85rem;">React Native, Firebase ‚Ä¢ 10,000 downloads</p>
                            <div style="display: flex; gap: 0.5rem; margin-top: 0.5rem;">
                                <button class="btn btn-primary" style="flex: 1; font-size: 0.8rem; background: #4caf50;" onclick="openProfessionalProject('Mobile App')">View</button>
                                <button class="btn btn-outline" style="flex: 1; font-size: 0.8rem;" onclick="showToast('Project edited!', 'success')">Edit</button>
                            </div>
                        </div>
                        <div style="background: rgba(156, 39, 176, 0.05); border-radius: 8px; padding: 1rem; border: 1px solid rgba(156, 39, 176, 0.2);">
                            <div style="height: 150px; background: rgba(156, 39, 176, 0.1); border-radius: 8px; margin-bottom: 1rem; display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-chart-line" style="font-size: 2rem; color: #9c27b0;"></i>
                            </div>
                            <p><strong>Analytics Dashboard</strong></p>
                            <p style="color: var(--text-muted); font-size: 0.85rem;">Vue.js, D3.js, AWS ‚Ä¢ SaaS Product</p>
                            <div style="display: flex; gap: 0.5rem; margin-top: 0.5rem;">
                                <button class="btn btn-primary" style="flex: 1; font-size: 0.8rem; background: #9c27b0;" onclick="openProfessionalProject('Analytics Dashboard')">View</button>
                                <button class="btn btn-outline" style="flex: 1; font-size: 0.8rem;" onclick="showToast('Project edited!', 'success')">Edit</button>
                            </div>
                        </div>
                    </div>
                    <button class="btn btn-primary" style="width: 100%; margin-top: 1rem;" onclick="showToast('Add project modal opened', 'info')">
                        <i class="fas fa-plus"></i> Add Project
                    </button>
                </div>

                <!-- Endorsements Tab -->
                <div id="profEndorsements" class="card-bg hidden">
                    <h2><i class="fas fa-medal"></i> Skills & Endorsements</h2>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; margin-top: 1rem;">
                        <div style="text-align: center; padding: 1rem; background: rgba(0, 212, 255, 0.1); border-radius: 8px;">
                            <p style="font-size: 2rem; margin-bottom: 0.3rem;">üéØ</p>
                            <p><strong>JavaScript</strong></p>
                            <p style="color: var(--text-muted); font-size: 0.85rem;">18 endorsements</p>
                            <span style="color: #ffc107;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                        </div>
                        <div style="text-align: center; padding: 1rem; background: rgba(76, 175, 80, 0.1); border-radius: 8px;">
                            <p style="font-size: 2rem; margin-bottom: 0.3rem;">‚öõÔ∏è</p>
                            <p><strong>React</strong></p>
                            <p style="color: var(--text-muted); font-size: 0.85rem;">15 endorsements</p>
                            <span style="color: #ffc107;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                        </div>
                        <div style="text-align: center; padding: 1rem; background: rgba(255, 193, 7, 0.1); border-radius: 8px;">
                            <p style="font-size: 2rem; margin-bottom: 0.3rem;">üé®</p>
                            <p><strong>Web Design</strong></p>
                            <p style="color: var(--text-muted); font-size: 0.85rem;">12 endorsements</p>
                            <span style="color: #ffc107;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</span>
                        </div>
                        <div style="text-align: center; padding: 1rem; background: rgba(255, 87, 34, 0.1); border-radius: 8px;">
                            <p style="font-size: 2rem; margin-bottom: 0.3rem;">üîß</p>
                            <p><strong>DevOps</strong></p>
                            <p style="color: var(--text-muted); font-size: 0.85rem;">10 endorsements</p>
                            <span style="color: #ffc107;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</span>
                        </div>
                        <div style="text-align: center; padding: 1rem; background: rgba(156, 39, 176, 0.1); border-radius: 8px;">
                            <p style="font-size: 2rem; margin-bottom: 0.3rem;">üì±</p>
                            <p><strong>UI/UX</strong></p>
                            <p style="color: var(--text-muted); font-size: 0.85rem;">8 endorsements</p>
                            <span style="color: #ffc107;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</span>
                        </div>
                        <div style="text-align: center; padding: 1rem; background: rgba(0, 150, 136, 0.1); border-radius: 8px;">
                            <p style="font-size: 2rem; margin-bottom: 0.3rem;">üêç</p>
                            <p><strong>Python</strong></p>
                            <p style="color: var(--text-muted); font-size: 0.85rem;">6 endorsements</p>
                            <span style="color: #ffc107;">‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ</span>
                        </div>
                    </div>
                </div>

                <!-- Certificates Tab -->
                <div id="profCertificates" class="card-bg hidden">
                    <h2><i class="fas fa-certificate"></i> Certifications & Credentials</h2>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 1rem;">
                        <div style="padding: 1rem; background: rgba(0, 212, 255, 0.05); border-radius: 8px; border-left: 4px solid var(--primary);">
                            <p><strong>üéì AWS Solutions Architect</strong></p>
                            <p style="color: var(--text-muted); font-size: 0.85rem;">Amazon Web Services ‚Ä¢ Jan 2023</p>
                            <button class="btn btn-outline" style="width: 100%; margin-top: 0.5rem;" onclick="showToast('Certificate verified!', 'success')">Verify</button>
                        </div>
                        <div style="padding: 1rem; background: rgba(76, 175, 80, 0.05); border-radius: 8px; border-left: 4px solid #4caf50;">
                            <p><strong>üèÜ React Advanced</strong></p>
                            <p style="color: var(--text-muted); font-size: 0.85rem;">Udemy Professional ‚Ä¢ Dec 2022</p>
                            <button class="btn btn-outline" style="width: 100%; margin-top: 0.5rem;" onclick="showToast('Certificate verified!', 'success')">Verify</button>
                        </div>
                        <div style="padding: 1rem; background: rgba(255, 193, 7, 0.05); border-radius: 8px; border-left: 4px solid #ffc107;">
                            <p><strong>üì± JavaScript Specialist</strong></p>
                            <p style="color: var(--text-muted); font-size: 0.85rem;">Free Code Camp ‚Ä¢ Nov 2022</p>
                            <button class="btn btn-outline" style="width: 100%; margin-top: 0.5rem;" onclick="showToast('Certificate verified!', 'success')">Verify</button>
                        </div>
                        <div style="padding: 1rem; background: rgba(156, 39, 176, 0.05); border-radius: 8px; border-left: 4px solid #9c27b0;">
                            <p><strong>üåê Full Stack Developer</strong></p>
                            <p style="color: var(--text-muted); font-size: 0.85rem;">Coursera ‚Ä¢ Aug 2022</p>
                            <button class="btn btn-outline" style="width: 100%; margin-top: 0.5rem;" onclick="showToast('Certificate verified!', 'success')">Verify</button>
                        </div>
                    </div>
                </div>
            </section>


        </div>
    </main>
        </div><!-- End mainApp -->

    <!-- Project Modal -->
    <div id="projectModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeProjectModal()">&times;</button>
            <h2 id="projectModalTitle"></h2>
            <p id="projectModalBody" style="color: var(--text-muted);"></p>
            <div id="projectModalActions" style="display:flex; gap:0.5rem; margin-top:1rem;">
                <button class="btn btn-primary" onclick="showToast('Project saved', 'success')">Save</button>
                <button class="btn btn-outline" onclick="closeProjectModal()">Close</button>
            </div>
        </div>
    </div>

    <!-- JAVASCRIPT -->
    <script>
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // REAL WEB APP STATE MANAGEMENT
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        
        let appState = {
            currentUser: null,
            users: [],
            connections: [],
            messages: [],
            points: 2450,
            level: 15,
            xp: 750,
            skills: ['JavaScript', 'React', 'Web Design'],
            achievements: [],
            posts: [],
            courses: []
        };

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // SAMPLE DATABASE
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        
        const sampleUsers = [
            { id: 1, name: 'Alex Developer', title: 'Full Stack Expert', avatar: 'üë®‚Äçüíª', skills: ['JavaScript', 'React', 'Node.js'], rating: 4.9, reviews: 127, bio: 'Teaching full-stack development for 5+ years' },
            { id: 2, name: 'Sarah Designer', title: 'UI/UX Specialist', avatar: 'üë©‚Äçüéì', skills: ['Figma', 'UI Design', 'CSS'], rating: 4.8, reviews: 95, bio: 'Passionate about creating beautiful interfaces' },
            { id: 3, name: 'Mike Educator', title: 'Teacher Extraordinaire', avatar: 'üßë‚Äçüè´', skills: ['Teaching', 'Mentoring', 'Business'], rating: 5.0, reviews: 142, bio: 'Helping people reach their potential' },
            { id: 4, name: 'Emma Developer', title: 'Python Expert', avatar: 'üë©‚Äçüíª', skills: ['Python', 'Data Science', 'AI'], rating: 4.7, reviews: 89, bio: 'ML enthusiast and Python developer' },
            { id: 5, name: 'John Designer', title: 'Graphic Designer', avatar: 'üé®', skills: ['Graphic Design', 'Branding', 'Illustrator'], rating: 4.6, reviews: 71, bio: 'Creating stunning visual experiences' },
            { id: 6, name: 'Lisa Marketing', title: 'Digital Marketing Expert', avatar: 'üë©‚Äçüíº', skills: ['Social Media', 'SEO', 'Content Strategy'], rating: 4.8, reviews: 103, bio: 'Helping businesses grow online with strategic marketing' },
            { id: 7, name: 'David DevOps', title: 'Cloud Infrastructure Specialist', avatar: 'üë®‚Äçüíª', skills: ['AWS', 'Docker', 'Kubernetes'], rating: 4.9, reviews: 118, bio: 'Expert in cloud deployment and DevOps practices' },
            { id: 8, name: 'Rachel Writer', title: 'Technical Writer', avatar: '‚úçÔ∏è', skills: ['Documentation', 'Copywriting', 'Blog Writing'], rating: 4.7, reviews: 84, bio: 'Creating clear and engaging technical documentation' },
            { id: 9, name: 'Chris Photographer', title: 'Professional Photographer', avatar: 'üì∏', skills: ['Photography', 'Photo Editing', 'Videography'], rating: 4.8, reviews: 92, bio: 'Capturing moments and creating visual stories' },
            { id: 10, name: 'Nina Linguist', title: 'Language Teacher', avatar: 'üåç', skills: ['Spanish', 'French', 'English Teaching'], rating: 4.9, reviews: 156, bio: 'Fluent in 5 languages, passionate about teaching' },
            { id: 11, name: 'Marcus Finance', title: 'Financial Advisor', avatar: 'üí∞', skills: ['Investment', 'Tax Planning', 'Crypto'], rating: 4.6, reviews: 67, bio: 'Helping people make smart financial decisions' },
            { id: 12, name: 'Sophie Fitness', title: 'Fitness Coach', avatar: 'üí™', skills: ['Personal Training', 'Nutrition', 'Yoga'], rating: 4.9, reviews: 134, bio: 'Transform your fitness journey with personalized coaching' },
            { id: 13, name: 'Tom Android', title: 'Android Developer', avatar: 'üì±', skills: ['Kotlin', 'Java', 'Android Studio'], rating: 4.7, reviews: 76, bio: 'Building amazing Android applications and games' },
            { id: 14, name: 'Victoria iOS', title: 'iOS Developer', avatar: 'üçé', skills: ['Swift', 'Objective-C', 'SwiftUI'], rating: 4.8, reviews: 99, bio: 'Creating beautiful and intuitive iOS apps' },
            { id: 15, name: 'Ryan Musician', title: 'Professional Musician', avatar: 'üéµ', skills: ['Guitar', 'Music Production', 'Songwriting'], rating: 4.7, reviews: 88, bio: 'Teaching music production and guitar skills online' },
            { id: 16, name: 'Maya Artist', title: 'Digital Artist', avatar: 'üé®', skills: ['Digital Painting', 'Animation', 'Illustration'], rating: 4.9, reviews: 121, bio: 'Creating stunning digital artwork and animations' },
            { id: 17, name: 'Kevin Chef', title: 'Culinary Expert', avatar: 'üë®‚Äçüç≥', skills: ['Cooking', 'Baking', 'Nutrition'], rating: 4.8, reviews: 107, bio: 'Teaching culinary skills and healthy cooking methods' },
            { id: 18, name: 'Angela Architect', title: 'Software Architect', avatar: 'üèóÔ∏è', skills: ['System Design', 'Microservices', 'Architecture'], rating: 4.9, reviews: 138, bio: 'Designing scalable and robust software systems' },
            { id: 19, name: 'Brandon Video', title: 'Video Editor', avatar: 'üé¨', skills: ['Video Editing', 'Motion Graphics', 'Premiere Pro'], rating: 4.7, reviews: 81, bio: 'Creating professional videos and visual content' },
            { id: 20, name: 'Zoe Data', title: 'Data Scientist', avatar: 'üìä', skills: ['Machine Learning', 'TensorFlow', 'Analytics'], rating: 4.8, reviews: 112, bio: 'Extracting insights from data using advanced analytics' },
            { id: 21, name: 'Olivia Consultant', title: 'Business Consultant', avatar: 'üíº', skills: ['Strategic Planning', 'Leadership', 'Problem Solving'], rating: 4.9, reviews: 145, bio: 'Helping businesses achieve their strategic goals' },
            { id: 22, name: 'James QA', title: 'Quality Assurance Engineer', avatar: '‚úÖ', skills: ['Testing', 'Automation', 'Selenium'], rating: 4.6, reviews: 73, bio: 'Ensuring software quality through comprehensive testing' },
            { id: 23, name: 'Isabella Designer', title: '3D Graphic Designer', avatar: 'üé≠', skills: ['3D Modeling', 'Blender', 'CAD'], rating: 4.8, reviews: 98, bio: 'Creating immersive 3D experiences and models' },
            { id: 24, name: 'Samuel Lawyer', title: 'Legal Advisor', avatar: '‚öñÔ∏è', skills: ['Contract Law', 'Business Law', 'Legal Writing'], rating: 4.7, reviews: 79, bio: 'Providing expert legal guidance for businesses' },
            { id: 25, name: 'Grace Entrepreneur', title: 'Startup Mentor', avatar: 'üöÄ', skills: ['Entrepreneurship', 'Fundraising', 'Growth Hacking'], rating: 4.9, reviews: 128, bio: 'Mentoring startups and guiding entrepreneurs to success' }
        ];

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // INITIALIZATION
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        
        function initializeApp() {
            loadAppState();
            const isDarkMode = localStorage.getItem('isDarkMode') !== 'false';
            if (!isDarkMode) {
                document.body.classList.add('light-mode');
            }
            updateThemeButton();
            initializeUsers();
            loadDashboard();
            loadSettings();
            
            // Show user welcome message
            if (appState.currentUser) {
                const userWelcome = document.getElementById('userWelcome');
                if (userWelcome) {
                    userWelcome.innerHTML = `üë§ ${appState.currentUser.name}`;
                }
            }
        }

        function loadAppState() {
            const saved = localStorage.getItem('skillBarterState');
            if (saved) {
                appState = { ...appState, ...JSON.parse(saved) };
            }
            // Load user from localStorage
            const userStr = localStorage.getItem('skillBarterUser');
            if (userStr) {
                appState.currentUser = JSON.parse(userStr);
            }
        }

        function saveAppState() {
            localStorage.setItem('skillBarterState', JSON.stringify(appState));
        }

        function initializeUsers() {
            appState.users = sampleUsers;
            saveAppState();
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // THEME MANAGEMENT
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        
        function toggleTheme() {
            document.body.classList.toggle('light-mode');
            const isDark = !document.body.classList.contains('light-mode');
            localStorage.setItem('isDarkMode', isDark);
            updateThemeButton();
        }

        function updateThemeButton() {
            const btn = document.querySelector('.theme-toggle');
            const isDark = !document.body.classList.contains('light-mode');
            btn.innerHTML = isDark ? '<i class="fas fa-sun"></i> Light Mode' : '<i class="fas fa-moon"></i> Dark Mode';
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // SECTION NAVIGATION
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        
        function showSection(sectionId, el) {
            document.querySelectorAll('.section').forEach(s => s.classList.add('hidden'));
            document.getElementById(sectionId).classList.remove('hidden');

            document.querySelectorAll('.sidebar-item').forEach(item => item.classList.remove('active'));
            try {
                const targetItem = el || (event && event.target && event.target.closest('.sidebar-item'));
                if (targetItem) targetItem.classList.add('active');
            } catch (e) {
                // ignore
            }

            // Load section data
            if (sectionId === 'dashboard') loadDashboard();
            if (sectionId === 'profiles') loadProfiles();
            if (sectionId === 'learning') loadLearning();
            if (sectionId === 'social') loadSocialFeed();
            if (sectionId === 'gamification') loadGamification();

            window.scrollTo(0, 0);
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // DASHBOARD
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        
        function loadDashboard() {
            updateDashboard();
            loadPendingRequests();
            loadRecentConnections();
        }

        // Smooth number animator
        function animateValue(el, start, end, duration = 800) {
            if (!el) return;
            const range = end - start;
            const startTime = performance.now();
            function step(now) {
                const progress = Math.min((now - startTime) / duration, 1);
                const value = Math.floor(start + range * progress);
                el.textContent = value.toLocaleString();
                if (progress < 1) requestAnimationFrame(step);
            }
            requestAnimationFrame(step);
        }

        function updateDashboard() {
            // Animate stats
            const pointsEl = document.getElementById('dashPoints');
            const levelEl = document.getElementById('dashLevel');
            const connEl = document.getElementById('dashConnections');
            const xpPercentEl = document.getElementById('dashXPPercent');
            const progressFill = document.getElementById('progressFill');
            const progLevel = document.getElementById('progLevel');
            const progXP = document.getElementById('progXP');

            const currentPoints = parseInt(pointsEl.textContent.replace(/,/g, '')) || 0;
            const targetPoints = appState.points || 0;
            animateValue(pointsEl, currentPoints, targetPoints, 700);

            const currentLevel = parseInt(levelEl.textContent) || 0;
            animateValue(levelEl, currentLevel, appState.level || 0, 600);

            const currentConn = parseInt(connEl.textContent) || 0;
            animateValue(connEl, currentConn, appState.connections.length || 0, 600);

            // Update progress bar smoothly
            const xpPercent = Math.min((appState.xp / 1000) * 100, 100);
            xpPercentEl.textContent = Math.round(xpPercent) + '%';
            if (progressFill) progressFill.style.width = xpPercent + '%';
            if (progLevel) progLevel.textContent = appState.level;
            if (progXP) progXP.textContent = (appState.xp || 0) + ' / 1000 XP';

            // subtle animation pulse for cards
            document.querySelectorAll('.card-bg').forEach(c => { c.style.transform = 'translateY(-4px)'; setTimeout(()=>c.style.transform='translateY(0)', 300); });

            console.log('Dashboard updated:', appState);
        }

        function loadPendingRequests() {
            const container = document.getElementById('requestsContainer');
            const requests = [
                { name: 'Sarah Designer', skill: 'UI Design', avatar: 'üë©‚Äçüéì' },
                { name: 'Mike Educator', skill: 'Mentoring', avatar: 'üßë‚Äçüè´' },
                { name: 'Emma Developer', skill: 'Python', avatar: 'üë©‚Äçüíª' }
            ];
            
            container.innerHTML = requests.map((req, idx) => `
                <div style="display: flex; align-items: center; gap: 1rem; padding: 1rem; background: rgba(0, 212, 255, 0.05); border-radius: 8px; margin-bottom: 0.8rem;">
                    <div style="font-size: 2.5rem;">${req.avatar}</div>
                    <div style="flex: 1;">
                        <p style="font-weight: 600; margin: 0;">${req.name}</p>
                        <small style="color: var(--text-muted);">Wants to exchange ${req.skill}</small>
                    </div>
                    <div style="display: flex; gap: 0.5rem;">
                        <button class="btn btn-primary" style="padding: 0.5rem 1rem; font-size: 0.9rem;" onclick="acceptRequest('${req.name}')">Accept</button>
                        <button class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.9rem; background: rgba(0, 212, 255, 0.2); color: var(--primary);" onclick="declineRequest('${req.name}')">Decline</button>
                    </div>
                </div>
            `).join('');
        }

        function loadRecentConnections() {
            const container = document.getElementById('recentConnectionsContainer');
            const recent = appState.users.slice(0, 3).map(user => `
                <div class="card-bg" style="text-align: center; padding: 1.5rem;">
                    <div style="font-size: 3rem; margin-bottom: 0.5rem;">${user.avatar}</div>
                    <h3 style="font-size: 1rem; margin: 0.5rem 0;">${user.name}</h3>
                    <p style="font-size: 0.85rem; color: var(--text-muted); margin: 0.3rem 0;">${user.title}</p>
                    <div style="margin: 0.8rem 0;">
                        <span class="badge badge-success">‚≠ê ${user.rating}</span>
                    </div>
                    <button class="btn btn-primary" style="width: 100%; font-size: 0.9rem; padding: 0.6rem;" onclick="sendMessage(${user.id}, '${user.name}')">
                        <i class="fas fa-envelope"></i> Message
                    </button>
                </div>
            `).join('');
            container.innerHTML = recent;
        }

        function acceptRequest(name) {
            appState.points += 25;
            showToast(`‚úì Accepted request from ${name}! +25 points`, 'success');
            loadPendingRequests();
            updateDashboard();
            saveAppState();
        }

        function declineRequest(name) {
            showToast(`Declined request from ${name}`, 'info');
            loadPendingRequests();
        }

        function startNewSkillExchange() {
            showToast('üí° Opening skill exchange form...', 'success');
        }

        function addNewSkill() {
            const input = document.getElementById('newSkillInput');
            const btn = document.getElementById('addSkillBtn');
            input.style.display = input.style.display === 'none' ? 'block' : 'none';
            btn.style.display = btn.style.display === 'none' ? 'block' : 'none';
            if (input.style.display === 'block') {
                input.focus();
            }
        }

        function confirmAddSkill() {
            const input = document.getElementById('newSkillInput');
            const skill = input.value.trim();
            
            if (!skill) {
                showToast('Please enter a skill name', 'error');
                return;
            }
            
            if (appState.skills.includes(skill)) {
                showToast('You already have this skill!', 'warning');
                return;
            }
            
            appState.skills.push(skill);
            appState.points += 10;
            saveAppState();
            
            showToast(`‚úì Added ${skill} to your skills! +10 points`, 'success');
            
            // Reset input
            input.value = '';
            input.style.display = 'none';
            document.getElementById('addSkillBtn').style.display = 'none';
            
            // Reload dashboard
            loadDashboard();
        }

        function updateChecklist() {
            const check1 = document.getElementById('check1').checked;
            const check2 = document.getElementById('check2').checked;
            const check3 = document.getElementById('check3').checked;
            
            if (check1) {
                appState.points += 15;
                showToast('‚úì Daily login bonus: +15 XP', 'success');
                document.getElementById('check1').disabled = true;
            }
            if (check3 && !document.getElementById('check3').disabled) {
                appState.points += 25;
                showToast('‚úì Review bonus: +25 XP', 'success');
                document.getElementById('check3').disabled = true;
            }
            
            saveAppState();
            updateDashboard();
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // USER PROFILES & CONNECTIONS
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        
        function loadProfiles() {
            renderProfiles(appState.users);
        }

        function renderProfiles(users) {
            const container = document.getElementById('profilesContainer');
            if (!container) return;
            
            if (users.length === 0) {
                container.innerHTML = '<div class="card-bg" style="text-align: center;"><p>No users found. Try a different search.</p></div>';
                return;
            }
            
            container.innerHTML = users.map(user => `
                <div class="card-bg">
                    <div class="profile-card">
                        <div class="profile-avatar">${user.avatar}</div>
                        <h3>${user.name}</h3>
                        <p>${user.title}</p>
                        <p style="color: var(--text-muted); font-size: 0.85rem; margin: 0.5rem 0;">‚≠ê ${user.rating}/5 (${user.reviews} reviews)</p>
                        <p style="color: var(--text-muted); font-size: 0.85rem; margin: 0.5rem 0;">${user.bio}</p>
                        <div style="margin: 0.5rem 0;">
                            ${user.skills.map(skill => `<span class="badge badge-primary" style="margin-right: 0.3rem;">${skill}</span>`).join('')}
                        </div>
                        <span class="badge badge-success">‚úì Verified</span>
                        <div style="margin-top: 1rem; display: flex; gap: 0.5rem;">
                            <button class="btn btn-primary" onclick="sendConnection(${user.id}, '${user.name}')" style="flex: 1;">Connect</button>
                            <button class="btn btn-secondary" onclick="sendMessage(${user.id}, '${user.name}')" style="flex: 1;">Message</button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function searchProfiles() {
            const searchInput = document.getElementById('searchProfile');
            const query = searchInput.value.toLowerCase().trim();
            
            if (!query) {
                renderProfiles(appState.users);
                return;
            }
            
            const filtered = appState.users.filter(user => 
                user.name.toLowerCase().includes(query) || 
                user.title.toLowerCase().includes(query) ||
                user.skills.some(skill => skill.toLowerCase().includes(query))
            );
            
            renderProfiles(filtered);
            if (filtered.length > 0) {
                showToast(`‚úì Found ${filtered.length} expert(s)`, 'success');
            }
        }

        function sendConnection(userId, userName) {
            if (appState.connections.includes(userId)) {
                showToast('Already connected with ' + userName, 'info');
                return;
            }
            appState.connections.push(userId);
            saveAppState();
            showToast('‚úì Connection request sent to ' + userName + '!', 'success');
        }

        function sendMessage(userId, userName) {
            const message = prompt('Enter your message to ' + userName + ':');
            if (message) {
                const msgObj = {
                    to: userId,
                    from: 'You',
                    content: message,
                    timestamp: new Date().toLocaleString()
                };
                appState.messages.push(msgObj);
                saveAppState();
                // Persist per-conversation history as well
                saveChatMessage(userId, { from: 'You', content: message, timestamp: msgObj.timestamp });
                showToast('‚úì Message sent to ' + userName, 'success');
            }
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // LEARNING SYSTEM
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        
        const courses = [
            { id: 1, name: 'JavaScript Masterclass', instructor: 'Alex Developer', progress: 45, level: 'Intermediate', duration: '40 hours', rating: 4.9, students: 2450, price: 'Free', lessons: 32, completed: 14, nextLesson: 'Advanced Functions' },
            { id: 2, name: 'Web Design Bootcamp', instructor: 'Sarah Designer', progress: 80, level: 'Beginner', duration: '25 hours', rating: 4.8, students: 1890, price: 'Free', lessons: 24, completed: 19, nextLesson: 'CSS Grid Layouts' },
            { id: 3, name: 'Python for Data Science', instructor: 'Emma Developer', progress: 0, level: 'Intermediate', duration: '35 hours', rating: 4.9, students: 3200, price: 'Free', lessons: 28, completed: 0, nextLesson: 'Introduction to Python' },
            { id: 4, name: 'React Advanced', instructor: 'Alex Developer', progress: 60, level: 'Advanced', duration: '30 hours', rating: 4.8, students: 1650, price: 'Free', lessons: 25, completed: 15, nextLesson: 'Custom Hooks' },
            { id: 5, name: 'UI/UX Design Fundamentals', instructor: 'Sarah Designer', progress: 0, level: 'Beginner', duration: '20 hours', rating: 4.7, students: 2100, price: 'Free', lessons: 18, completed: 0, nextLesson: 'Design Principles' },
            { id: 6, name: 'Cloud Computing with AWS', instructor: 'David DevOps', progress: 90, level: 'Advanced', duration: '45 hours', rating: 4.9, students: 1200, price: 'Free', lessons: 35, completed: 31, nextLesson: 'Final Project' },
            { id: 7, name: 'Digital Marketing Mastery', instructor: 'Lisa Marketing', progress: 30, level: 'Intermediate', duration: '22 hours', rating: 4.8, students: 1500, price: 'Free', lessons: 20, completed: 6, nextLesson: 'SEO Optimization' },
            { id: 8, name: 'Machine Learning Basics', instructor: 'Zoe Data', progress: 0, level: 'Advanced', duration: '38 hours', rating: 4.9, students: 980, price: 'Free', lessons: 30, completed: 0, nextLesson: 'ML Algorithms' }
        ];

        const certificates = [
            { name: 'JavaScript Advanced', date: 'Nov 15, 2024', issuer: 'Skill Barter', icon: 'üìú' },
            { name: 'Web Development Pro', date: 'Oct 22, 2024', issuer: 'Skill Barter', icon: 'üìú' },
            { name: 'React Master', date: 'Sep 10, 2024', issuer: 'Skill Barter', icon: 'üìú' },
            { name: 'UI/UX Specialist', date: 'Aug 5, 2024', issuer: 'Skill Barter', icon: 'üìú' },
            { name: 'CSS Expert', date: 'Jul 18, 2024', issuer: 'Skill Barter', icon: 'üìú' },
            { name: 'Frontend Developer', date: 'Jun 30, 2024', issuer: 'Skill Barter', icon: 'üìú' },
            { name: 'Digital Marketing', date: 'May 12, 2024', issuer: 'Skill Barter', icon: 'üìú' }
        ];

        function loadLearning() {
            loadActiveCourses();
            loadRecommendedCourses();
            loadCertificates();
        }

        function loadActiveCourses() {
            const active = courses.filter(c => c.progress > 0 && c.progress < 100);
            const container = document.getElementById('activeCoursesContainer');
            
            container.innerHTML = active.map(course => `
                <div class="card-bg" data-id="${course.id}">
                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.8rem;">
                        <h3 style="margin: 0; font-size: 1.1rem;">${course.name}</h3>
                        <span class="badge badge-primary" style="font-size: 0.8rem;">${course.level}</span>
                    </div>
                    <p style="color: var(--text-muted); margin: 0.5rem 0; font-size: 0.9rem;">by ${course.instructor}</p>
                    <p style="color: var(--text-muted); margin: 0.5rem 0; font-size: 0.85rem;">‚≠ê ${course.rating} ‚Ä¢ ${course.students.toLocaleString()} students</p>
                    
                    <div style="margin: 1rem 0;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem; font-size: 0.9rem;">
                            <span>Progress: ${course.progress}%</span>
                            <span>${course.completed}/${course.lessons} lessons</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${course.progress}%;"></div>
                        </div>
                    </div>
                    
                    <p style="color: var(--primary); margin: 0.8rem 0; font-size: 0.9rem;"><i class="fas fa-book-open"></i> Next: ${course.nextLesson}</p>
                    <p style="color: var(--text-muted); margin: 0.5rem 0; font-size: 0.85rem;"><i class="fas fa-clock"></i> ${course.duration}</p>
                    
                    <div style="display:flex;gap:8px;margin-top:8px">
                      <button class="btn btn-primary" onclick="showCourseModal(${course.id}, '${course.name.replace(/'/g,"\\'")}')" style="flex:1; padding: 0.7rem;">
                          <i class="fas fa-play"></i> Continue
                      </button>
                      <button class="btn btn-secondary" onclick="enrollCourse(${course.id}, '${course.name.replace(/'/g,"\\'")}')" style="width:140px; padding: 0.6rem;">
                          <i class="fas fa-user-plus"></i> Enroll
                      </button>
                    </div>
                </div>
            `).join('');
        }

        function loadRecommendedCourses() {
            const recommended = courses.filter(c => c.progress === 0).slice(0, 3);
            const container = document.getElementById('recommendedCoursesContainer');
            
            container.innerHTML = recommended.map(course => `
                <div class="card-bg">
                    <h3 style="margin: 0 0 0.5rem 0; font-size: 1rem;">${course.name}</h3>
                    <p style="color: var(--text-muted); margin: 0.3rem 0; font-size: 0.9rem;">by ${course.instructor}</p>
                    <p style="color: var(--text-muted); margin: 0.3rem 0; font-size: 0.85rem;">‚≠ê ${course.rating} ‚Ä¢ ${course.students.toLocaleString()} students ‚Ä¢ ${course.level}</p>
                    <p style="margin: 0.8rem 0; font-size: 0.9rem;"><i class="fas fa-clock"></i> ${course.duration} ‚Ä¢ ${course.lessons} lessons</p>
                    <button class="btn btn-primary" onclick="enrollCourse(${course.id}, '${course.name}')" style="width: 100%; padding: 0.7rem;">
                        <i class="fas fa-user-plus"></i> Enroll Now
                    </button>
                </div>
            `).join('');
        }

        function loadCertificates() {
            const container = document.getElementById('certificatesContainer');
            
            container.innerHTML = certificates.map(cert => `
                <div class="card-bg" style="text-align: center; position: relative; overflow: hidden;">
                    <div style="font-size: 3rem; margin-bottom: 0.5rem;">üèÜ</div>
                    <h3 style="margin: 0.5rem 0; font-size: 1rem;">${cert.name}</h3>
                    <p style="color: var(--text-muted); margin: 0.3rem 0; font-size: 0.85rem;;">Issued: ${cert.date}</p>
                    <p style="color: var(--text-muted); margin: 0.5rem 0; font-size: 0.85rem;">by ${cert.issuer}</p>
                    <button class="btn btn-primary" onclick="downloadCertificate('${cert.name}')" style="width: 100%; margin-top: 0.8rem; padding: 0.6rem; font-size: 0.9rem;">
                        <i class="fas fa-download"></i> Download
                    </button>
                </div>
            `).join('');
        }

        function continueCourse(courseId, courseName) {
            const course = courses.find(c => c.id === courseId);
            if (course) {
                showToast(`‚ñ∂Ô∏è Starting ${courseName}...`, 'success');
                appState.points += 5;
                course.progress = Math.min(course.progress + 5, 99);
                loadActiveCourses();
                updateDashboard();
                saveAppState();
            }
        }

        function enrollCourse(courseId, courseName) {
            const course = courses.find(c => c.id === courseId);
            if (course) {
                showToast(`‚úì Enrolled in ${courseName}! Start learning now`, 'success');
                course.progress = 5;
                appState.points += 10;
                loadActiveCourses();
                loadRecommendedCourses();
                updateDashboard();
                saveAppState();
            }
        }

        function downloadCertificate(certName) {
            showToast(`üì• Downloading ${certName}...`, 'success');
            appState.points += 5;
            updateDashboard();
            saveAppState();
        }

        // Course modal handling
        function showCourseModal(courseId, courseName) {
            const modal = document.getElementById('courseModal');
            if(!modal) return;
            document.getElementById('courseModalTitle').textContent = courseName;
            const course = courses.find(c => c.id === courseId) || {};
            document.getElementById('courseModalBody').innerHTML = `
                <p class="tiny-muted">Instructor: ${course.instructor || 'TBA'}</p>
                <p class="tiny-muted">Duration: ${course.duration || 'N/A'}</p>
                <p style="margin-top:8px">${course.description || 'Continue your learning ‚Äî pick up where you left off.'}</p>
                <div style="margin-top:12px"><strong>Progress:</strong> ${course.progress || 0}%</div>
            `;
            modal.classList.remove('hidden');
            // wire confirm button
            const contBtn = document.getElementById('courseModalContinue');
            contBtn.onclick = function(){ continueCourse(courseId, courseName); closeCourseModal(); };
            const closeBtn = document.getElementById('courseModalClose');
            closeBtn.onclick = closeCourseModal;
        }

        function closeCourseModal(){ const modal = document.getElementById('courseModal'); if(modal) modal.classList.add('hidden'); }

        // Quick Actions handlers
        function handleEarnXP(amount, btn, ev){
            // visual ripple (defensive: accept event and element)
            try{
                const eventObj = ev || window.event || null;
                let target = null;
                if (btn && btn.tagName === 'BUTTON') target = btn;
                else if (btn && typeof btn.closest === 'function') target = btn.closest('.action-card') || btn;
                else target = btn || document.body;

                if (target) {
                    const rect = target.getBoundingClientRect();
                    const ripple = document.createElement('span');
                    ripple.className = 'ripple';
                    const size = Math.max(rect.width, rect.height) * 1.2;
                    ripple.style.width = ripple.style.height = size + 'px';
                    const clientX = eventObj && eventObj.clientX ? eventObj.clientX : (rect.left + rect.width/2);
                    const clientY = eventObj && eventObj.clientY ? eventObj.clientY : (rect.top + rect.height/2);
                    ripple.style.left = (clientX - rect.left - size/2) + 'px';
                    ripple.style.top = (clientY - rect.top - size/2) + 'px';
                    target.style.position = target.style.position || 'relative';
                    target.appendChild(ripple);
                    setTimeout(()=>{ try{ ripple.remove(); }catch(e){} }, 700);
                }
            } catch (e) { console.warn('ripple failed', e); }

            // award xp
            try{ addXP(amount); }catch(e){ console.error(e); }
            try{ updateDashboard(); }catch(e){ console.error(e); }
            showToast('‚úì +' + amount + ' XP earned!', 'success');
        }

        function openFindExperts(el){
            // navigate to profiles section and focus search
            showSection('profiles', el);
            setTimeout(()=>{ const s=document.getElementById('searchProfile'); if(s){ s.focus(); showToast('Search experts ready', 'info'); } }, 250);
        }

        function openExchangeModal(el){
            const modal = document.getElementById('exchangeModal'); if(!modal) return; modal.classList.remove('hidden');
            const close = document.getElementById('exchangeModalClose'); close.onclick = ()=> modal.classList.add('hidden');
            const submit = document.getElementById('exchangeSubmit'); submit.onclick = submitExchange;
        }

        function submitExchange(){
            const title = document.getElementById('exchangeTitle').value.trim();
            const offer = document.getElementById('exchangeOffer').value.trim();
            if(!title || !offer){ showToast('Please fill title and offer', 'error'); return; }
            appState.points += 10; saveAppState(); showToast('‚úì Exchange proposed ‚Äî +10 points', 'success'); document.getElementById('exchangeModal').classList.add('hidden'); loadPendingRequests(); updateDashboard();
        }

        function startQuiz() {
            const questions = [
                { q: 'What does HTML stand for?', a: 'Hyper Text Markup Language', options: ['Hyper Text Markup Language', 'High Tech Modern Language', 'Home Tool Markup Language'] },
                { q: 'Which is a valid JavaScript variable name?', a: 'var_name', options: ['var_name', '123name', 'var-name'] },
                { q: 'What is the purpose of CSS?', a: 'Style web pages', options: ['Create databases', 'Style web pages', 'Run server logic'] },
                { q: 'Which method returns the first element in an array?', a: 'shift()', options: ['pop()', 'shift()', 'unshift()'] },
                { q: 'What does JSON stand for?', a: 'JavaScript Object Notation', options: ['JavaScript Object Notation', 'Java Source Online', 'JSON Online Network'] }
            ];
            
            const quiz = questions[Math.floor(Math.random() * questions.length)];
            const shuffled = quiz.options.sort(() => Math.random() - 0.5);
            
            let quizHTML = `
                <div style="background: rgba(0, 212, 255, 0.1); padding: 1.5rem; border-radius: 8px; margin-bottom: 1rem;">
                    <h3 style="margin-top: 0; color: var(--primary);">${quiz.q}</h3>
                    <div style="display: flex; flex-direction: column; gap: 0.8rem;">
            `;
            
            shuffled.forEach((option, idx) => {
                const isCorrect = option === quiz.a;
                quizHTML += `
                    <button style="padding: 0.8rem; background: rgba(0, 212, 255, 0.05); border: 2px solid var(--primary); border-radius: 8px; color: var(--text-light); cursor: pointer; text-align: left; font-weight: 600; transition: all 0.3s;" onclick="checkAnswer(this, ${isCorrect})" onmouseover="this.style.background='rgba(0, 212, 255, 0.15)'" onmouseout="this.style.background='rgba(0, 212, 255, 0.05)'">
                        ${option}
                    </button>
                `;
            });
            
            quizHTML += `</div></div>`;
            document.getElementById('quizContent').innerHTML = quizHTML;
        }

        function checkAnswer(element, isCorrect) {
            if (isCorrect) {
                showToast('‚úì Correct! +25 XP', 'success');
                appState.points += 25;
                addXP(25);
                element.style.borderColor = '#00d084';
                element.style.background = 'rgba(0, 208, 132, 0.2)';
            } else {
                showToast('‚úó Wrong answer. Try again!', 'error');
                element.style.borderColor = '#ff4757';
                element.style.background = 'rgba(255, 71, 87, 0.2)';
            }
            
            document.querySelectorAll('#quizContent button').forEach(btn => btn.disabled = true);
            setTimeout(() => startQuiz(), 2000);
            saveAppState();
        }

        function filterCourses(filter) {
            console.log('Filtering courses by:', filter);
            showToast('Filtering courses by: ' + filter, 'info');
            loadActiveCourses();
        }

        function addLearnXP() {
            appState.points += 50;
            addXP(50);
            showToast('‚úì Great job studying! +50 XP earned', 'success');
            updateDashboard();
            saveAppState();
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // SOCIAL FEED
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        
        function loadSocialFeed() {
            console.log('Social feed loaded');
        }

        function postUpdate() {
            const textarea = document.querySelector('#social textarea');
            if (!textarea || !textarea.value.trim()) {
                showToast('Please write something to post', 'error');
                return;
            }
            appState.posts.push({
                author: 'You',
                content: textarea.value,
                timestamp: new Date().toLocaleString(),
                likes: 0
            });
            saveAppState();
            textarea.value = '';
            showToast('‚úì Post published successfully!', 'success');
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // GAMIFICATION
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        
        function loadGamification() {
            console.log('Gamification loaded - Current points:', appState.points);
        }

        function addXP(amount) {
            appState.xp += amount;
            if (appState.xp >= 1000) {
                appState.level += Math.floor(appState.xp / 1000);
                appState.xp = appState.xp % 1000;
                showToast('üéâ Level Up! You are now Level ' + appState.level, 'success');
            }
            saveAppState();
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // TOAST NOTIFICATIONS
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        
        function showToast(message, type = 'success') {
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.innerHTML = message;
            
            let bgColor = '#00d084';
            if (type === 'error') bgColor = '#ff4757';
            if (type === 'warning') bgColor = '#ff9500';
            if (type === 'info') bgColor = '#00d4ff';
            
            toast.style.background = bgColor;
            toast.style.position = 'fixed';
            toast.style.bottom = '20px';
            toast.style.right = '20px';
            toast.style.padding = '15px 25px';
            toast.style.borderRadius = '8px';
            toast.style.color = 'white';
            toast.style.fontWeight = 'bold';
            toast.style.zIndex = '10000';
            toast.style.boxShadow = '0 4px 12px rgba(0,0,0,0.3)';
            toast.style.animation = 'slideIn 0.3s ease';
            
            document.body.appendChild(toast);
            setTimeout(() => {
                toast.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // ANIMATIONS
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        
        const style = document.createElement('style');
        style.innerHTML = `
            @keyframes slideIn {
                from { transform: translateX(400px); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(400px); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // AUTHENTICATION SYSTEM
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        
        function switchAuthTab(tab) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.auth-tab-btn').forEach(el => el.classList.remove('active'));
            
            if (tab === 'login') {
                document.getElementById('login-tab').classList.add('active');
                document.querySelector('[onclick="switchAuthTab(\'login\')"]').classList.add('active');
                document.getElementById('reset-tab').classList.remove('active');
            } else if (tab === 'register') {
                document.getElementById('register-tab').classList.add('active');
                document.querySelector('[onclick="switchAuthTab(\'register\')"]').classList.add('active');
                document.getElementById('reset-tab').classList.remove('active');
            }
        }

        function togglePasswordReset() {
            const loginTab = document.getElementById('login-tab');
            const resetTab = document.getElementById('reset-tab');
            loginTab.classList.toggle('active');
            resetTab.classList.toggle('active');
        }

        function checkPasswordStrength() {
            const password = document.getElementById('registerPassword').value;
            const strengthFill = document.getElementById('passwordStrengthFill');
            const strengthText = document.getElementById('strengthText');
            
            let strength = 'Weak';
            let className = '';
            
            if (password.length >= 8) {
                if (/[a-z]/.test(password) && /[A-Z]/.test(password) && /[0-9]/.test(password)) {
                    strength = 'Strong';
                    className = 'strong';
                } else if (/[a-z]/.test(password) && /[A-Z]/.test(password)) {
                    strength = 'Fair';
                    className = 'fair';
                } else if (/[a-z]/.test(password) || /[A-Z]/.test(password)) {
                    strength = 'Fair';
                    className = 'fair';
                } else {
                    strength = 'Good';
                    className = 'good';
                }
            }
            
            strengthFill.className = 'password-strength-fill ' + className;
            strengthText.textContent = strength;
        }

        function handleLogin() {
            const email = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value;
            const rememberMe = document.getElementById('rememberMe').checked;
            
            if (!email || !password) {
                showToast('Please fill in all fields', 'error');
                return;
            }
            
            if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
                showToast('Please enter a valid email', 'error');
                return;
            }
            
            if (password.length < 6) {
                showToast('Password must be at least 6 characters', 'error');
                return;
            }
            
            // Simulate successful login
            appState.currentUser = {
                email: email,
                name: email.split('@')[0].charAt(0).toUpperCase() + email.split('@')[0].slice(1),
                loggedIn: true,
                joinDate: new Date().toLocaleDateString()
            };
            
            localStorage.setItem('skillBarterUser', JSON.stringify(appState.currentUser));
            if (rememberMe) {
                localStorage.setItem('skillBarterEmail', email);
            }
            
            showToast('‚úì Welcome back, ' + appState.currentUser.name + '!', 'success');
            loginComplete();
        }

        function handleRegister() {
            const name = document.getElementById('registerName').value.trim();
            const email = document.getElementById('registerEmail').value.trim();
            const password = document.getElementById('registerPassword').value;
            const confirm = document.getElementById('registerConfirm').value;
            const title = document.getElementById('registerTitle').value.trim();
            const agreeTerms = document.getElementById('agreeTerms').checked;
            
            if (!name || !email || !password || !confirm || !title) {
                showToast('Please fill in all fields', 'error');
                return;
            }
            
            if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
                showToast('Please enter a valid email', 'error');
                return;
            }
            
            if (password.length < 8) {
                showToast('Password must be at least 8 characters', 'error');
                return;
            }
            
            if (password !== confirm) {
                showToast('Passwords do not match', 'error');
                return;
            }
            
            if (!agreeTerms) {
                showToast('You must agree to the Terms & Conditions', 'error');
                return;
            }
            
            // Simulate successful registration
            appState.currentUser = {
                email: email,
                name: name,
                title: title,
                loggedIn: true,
                joinDate: new Date().toLocaleDateString(),
                isNewUser: true
            };
            
            localStorage.setItem('skillBarterUser', JSON.stringify(appState.currentUser));
            
            showToast('üéâ Account created successfully! Welcome to Skill Barter!', 'success');
            loginComplete();
        }

        function handlePasswordReset() {
            const email = document.getElementById('resetEmail').value.trim();
            
            if (!email) {
                showToast('Please enter your email', 'error');
                return;
            }
            
            if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
                showToast('Please enter a valid email', 'error');
                return;
            }
            
            showToast('‚úì Password reset link sent to ' + email, 'success');
            setTimeout(() => switchAuthTab('login'), 2000);
        }

        function loginComplete() {
            document.getElementById('authPage').classList.remove('active');
            document.getElementById('mainApp').classList.remove('hidden-page');
            setTimeout(() => {
                document.getElementById('mainApp').style.display = 'block';
                initializeApp();
            }, 300);
        }

        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                appState.currentUser = null;
                localStorage.removeItem('skillBarterUser');
                document.getElementById('mainApp').classList.add('hidden-page');
                document.getElementById('authPage').classList.add('active');
                
                // Clear form
                document.getElementById('loginEmail').value = '';
                document.getElementById('loginPassword').value = '';
                
                showToast('‚úì Logged out successfully', 'success');
            }
        }


        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // SOCIAL SECTION FUNCTIONS
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function loadSocialFeed(filter) {
            const container = document.getElementById('socialFeedContainer');
            container.innerHTML = '';
            const posts = [
                { author: 'Alex Developer', avatar: 'üë®', time: '2 hours ago', content: 'Just completed my JavaScript certification! üéâ', likes: 12, comments: 3 },
                { author: 'Sarah Designer', avatar: 'üë©', time: '5 hours ago', content: 'Looking for someone to exchange web design tips for content writing help. Let me know! üí¨', likes: 8, comments: 2 },
                { author: 'John Coder', avatar: 'üë®', time: '1 day ago', content: 'Finally deployed my first full-stack app! Feeling accomplished üöÄ', likes: 25, comments: 7 }
            ];
            posts.forEach(post => {
                container.innerHTML += `<div class="card-bg" style="border-left: 3px solid var(--primary);"><h3>${post.avatar} ${post.author}</h3><p style="color: var(--text-muted); font-size: 0.85rem;">${post.time}</p><p>${post.content}</p><div style="display: flex; gap: 1rem; margin-top: 1rem;"><button class="btn btn-outline" onclick="showToast('‚ù§ You liked the post', 'success')" style="flex: 1;"><i class="fas fa-heart"></i> ${post.likes}</button><button class="btn btn-outline" onclick="showToast('üí¨ Comment added', 'success')" style="flex: 1;"><i class="fas fa-comment"></i> ${post.comments}</button><button class="btn btn-outline" onclick="showToast('‚úì Shared', 'success')" style="flex: 1;"><i class="fas fa-share"></i> Share</button></div></div>`;
            });
        }
        function postSocialUpdate() {
            const content = document.getElementById('socialInput').value;
            if (content.trim()) {
                showToast('‚úì Your post has been shared!', 'success');
                document.getElementById('socialInput').value = '';
                loadSocialFeed('all');
            } else {
                showToast('Please write something to share', 'warning');
            }
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // GAMIFICATION SECTION FUNCTIONS
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function loadGamificationTab(tab, btn) {
            document.querySelectorAll('[id^="gam"]').forEach(el => el.classList.add('hidden'));
            document.getElementById('gam' + tab.charAt(0).toUpperCase() + tab.slice(1)).classList.remove('hidden');
            document.querySelectorAll('#gamification .btn').forEach(b => b.classList.remove('btn-primary'));
            document.querySelectorAll('#gamification .btn').forEach(b => b.classList.add('btn-outline'));
            try {
                const target = btn || document.activeElement;
                if (target) {
                    target.classList.remove('btn-outline');
                    target.classList.add('btn-primary');
                }
            } catch (e) {}
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // ANALYTICS SECTION FUNCTIONS
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function loadAnalyticsTab(tab, btn) {
            document.querySelectorAll('[id^="analytics"]').forEach(el => el.classList.add('hidden'));
            document.getElementById('analytics' + tab.charAt(0).toUpperCase() + tab.slice(1)).classList.remove('hidden');
            document.querySelectorAll('#analytics .btn').forEach(b => b.classList.remove('btn-primary'));
            document.querySelectorAll('#analytics .btn').forEach(b => b.classList.add('btn-outline'));
            try {
                const target = btn || document.activeElement;
                if (target) {
                    target.classList.remove('btn-outline');
                    target.classList.add('btn-primary');
                }
            } catch (e) {}
            // if overview tab, render charts
            try{ if(tab === 'overview') renderAnalyticsOverview(); }catch(e){}
        }

        // Simple chart renderer (vanilla canvas) for analytics
        function generateAnalyticsData(days){
            // Use appState activity if present, otherwise create sample data
            const points = [];
            for(let i=0;i<days;i++){ points.push({
                date: new Date(Date.now() - (days - 1 - i) * 86400000),
                actions: Math.max(0, Math.round((Math.sin(i/3)+1)*20 + Math.random()*10)),
                minutes: Math.max(1, Math.round((Math.cos(i/5)+1)*15 + Math.random()*8)),
                topSkill: ['JavaScript','React','CSS','Python'][Math.floor(Math.random()*4)]
            }); }
            return points;
        }

        function renderAnalyticsOverview(){
            const range = parseInt(document.getElementById('analyticsRange').value,10) || 7;
            const data = generateAnalyticsData(range);
            const totalActions = data.reduce((s,d)=>s+d.actions,0);
            const avgSession = Math.round(data.reduce((s,d)=>s+d.minutes,0)/data.length);
            const skillCounts = data.reduce((acc,d)=>{ acc[d.topSkill]=(acc[d.topSkill]||0)+1; return acc; },{});
            const topSkill = Object.keys(skillCounts).sort((a,b)=>skillCounts[b]-skillCounts[a])[0] || '‚Äî';

            document.getElementById('analyticsTotalActions').textContent = totalActions.toLocaleString();
            document.getElementById('analyticsAvgSession').textContent = avgSession + 'm';
            document.getElementById('analyticsTopSkill').textContent = topSkill;

            // draw line+bars on canvas
            const canvas = document.getElementById('analyticsCanvas');
            if(!canvas) return;
            // adjust size for high-dpi
            const rect = canvas.getBoundingClientRect();
            const dpr = window.devicePixelRatio || 1;
            canvas.width = rect.width * dpr; canvas.height = rect.height * dpr;
            const ctx = canvas.getContext('2d'); ctx.scale(dpr,dpr);
            // clear
            ctx.clearRect(0,0,rect.width,rect.height);

            // chart padding
            const pad = {l:40,r:16,t:20,b:36};
            const w = rect.width - pad.l - pad.r; const h = rect.height - pad.t - pad.b;
            // compute scales
            const maxActions = Math.max(10, ...data.map(d=>d.actions));
            const maxMinutes = Math.max(10, ...data.map(d=>d.minutes));

            // draw grid lines
            ctx.strokeStyle = 'rgba(255,255,255,0.04)'; ctx.lineWidth = 1;
            for(let i=0;i<=4;i++){ const y = pad.t + (h*(i/4)); ctx.beginPath(); ctx.moveTo(pad.l,y); ctx.lineTo(pad.l+w,y); ctx.stroke(); }

            // draw bars for minutes (behind)
            const step = w / (data.length - 1 || 1);
            data.forEach((d,i)=>{
                const bx = pad.l + i*step - step*0.35; const barW = Math.max(6, step*0.7);
                const bh = (d.minutes / maxMinutes) * h;
                ctx.fillStyle = 'rgba(255,193,7,0.35)'; ctx.fillRect(bx, pad.t + (h - bh), barW, bh);
            });

            // draw line for actions
            ctx.beginPath(); for(let i=0;i<data.length;i++){ const d=data[i]; const x = pad.l + i*step; const y = pad.t + (1 - (d.actions/maxActions)) * h; if(i===0) ctx.moveTo(x,y); else ctx.lineTo(x,y); }
            ctx.strokeStyle = 'rgba(0,212,255,0.95)'; ctx.lineWidth = 2; ctx.stroke();
            // draw points
            data.forEach((d,i)=>{ const x = pad.l + i*step; const y = pad.t + (1 - (d.actions/maxActions)) * h; ctx.beginPath(); ctx.arc(x,y,4,0,Math.PI*2); ctx.fillStyle='rgba(0,212,255,0.95)'; ctx.fill(); });

            // x labels
            ctx.fillStyle = 'rgba(255,255,255,0.7)'; ctx.font = '12px Segoe UI'; ctx.textAlign = 'center';
            data.forEach((d,i)=>{ const x = pad.l + i*step; const label = d.date.toLocaleDateString(undefined,{month:'short',day:'numeric'}); ctx.fillText(label, x, rect.height - 8); });

            // attach hover tooltip
            attachChartTooltip(canvas, data, pad, w, h, maxActions);
        }

        function attachChartTooltip(canvas, data, pad, w, h, maxActions){
            const tooltip = document.querySelector('.chart-tooltip') || (function(){ const t=document.createElement('div'); t.className='chart-tooltip'; document.body.appendChild(t); return t; })();
            function show(e){ const rect = canvas.getBoundingClientRect(); const x = e.clientX - rect.left - pad.l; const step = w / (data.length - 1 || 1); const idx = Math.round(x / step); const d = data[Math.max(0, Math.min(data.length-1, idx))]; if(!d) return; tooltip.style.display='block'; tooltip.innerHTML = `<strong>${d.date.toLocaleDateString()}</strong><br>Actions: ${d.actions}<br>Time: ${d.minutes}m<br>Top Skill: ${d.topSkill}`; tooltip.style.left = (e.clientX + 12) + 'px'; tooltip.style.top = (e.clientY + 12) + 'px'; }
            function hide(){ tooltip.style.display='none'; }
            canvas.onmousemove = function(e){ show(e); };
            canvas.onmouseleave = hide;
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // MESSAGES SECTION FUNCTIONS
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function openChat(userId, userName) {
            // Set current chat and enable input
            window.currentChatId = userId;
            document.getElementById('chatName').textContent = userName;
            document.getElementById('messageInput').disabled = false;
            document.getElementById('sendBtn').disabled = false;

            // Load persisted chat history for this conversation
            loadChatHistory(userId, userName);
        }
        function sendMessage() {
            const input = document.getElementById('messageInput');
            if (input.value.trim()) {
                const chatMessages = document.getElementById('chatMessages');
                chatMessages.innerHTML += `<div style="text-align: right;"><p style="background: rgba(0, 212, 255, 0.3); padding: 0.8rem; border-radius: 8px; margin: 0; text-align: left;"><strong>You:</strong> ${input.value}</p></div>`;
                input.value = '';
                chatMessages.scrollTop = chatMessages.scrollHeight;
                showToast('Message sent! ‚úì', 'success');
            }
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // SETTINGS SECTION FUNCTIONS
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function loadSettingsTab(tab, btn) {
            document.querySelectorAll('[id^="settings"]').forEach(el => el.classList.add('hidden'));
            document.getElementById('settings' + tab.charAt(0).toUpperCase() + tab.slice(1)).classList.remove('hidden');
            document.querySelectorAll('#settings .btn').forEach(b => b.classList.remove('btn-primary'));
            document.querySelectorAll('#settings .btn').forEach(b => b.classList.add('btn-outline'));
            try {
                const target = btn || document.activeElement;
                if (target) {
                    target.classList.remove('btn-outline');
                    target.classList.add('btn-primary');
                }
            } catch (e) {}
        }
        const TRANSLATIONS = {
            en: { brand: 'üöÄ SKILL BARTER', tagline: 'Exchange Skills ‚Ä¢ Learn Together ‚Ä¢ Grow Together', login_tab: 'Login', register_tab: 'Register', sign_in: 'Sign In', create_account: 'Create Account', preferences_header: 'Preferences', pref_theme: 'Theme', pref_language: 'Language', pref_time_zone: 'Time Zone', pref_content_pref: 'Content Preference', save_preferences: 'Save Preferences', save_notifications: 'Save Notifications', language_changed: 'Language changed! ‚úì', theme_changed: 'Theme changed! ‚úì', dashboard: 'Dashboard', users: 'Users', learning: 'Learning', social: 'Social', gamification: 'Gamification', analytics: 'Analytics', messages: 'Messages', settings: 'Settings', ai_chatbot: 'AI Chatbot', videos: 'Videos', professional: 'Professional', welcome_dashboard: 'Welcome to Your Dashboard', total_points: 'Total Points', current_level: 'Current Level', active_connections: 'Active Connections', quick_actions: 'Quick Actions', earn_xp: 'Earn XP', find_experts: 'Find Experts', new_exchange: 'New Exchange', level_progress: 'Level Progress', my_skills: 'My Skills', add_skill: 'Add Skill', achievements: 'Recent Achievements', pending_requests: 'Connection Requests', recent_connections: 'Recent Connections', daily_checklist: 'Daily Checklist', logout: 'Logout', light_mode: 'Light Mode', dark_mode: 'Dark Mode', language: 'Language', email_address: 'Email Address', password: 'Password', remember_me: 'Remember me', dont_have_account: 'Don\'t have an account?', register_now: 'Register now', forgot_password: 'Forgot password?', full_name: 'Full Name', confirm_password: 'Confirm Password', profession: 'Profession/Title', agree_terms: 'I agree to Terms & Conditions', already_have_account: 'Already have an account?', search: 'Search', find_and_connect: 'Find & Connect with Experts', learning_center: 'Interactive Learning Center', filter_courses: 'Filter Courses', all_courses: 'All Courses', in_progress: 'In Progress', completed: 'Completed', recommended: 'Recommended', my_courses: 'My Courses', search_experts: 'Search Experts', connect: 'Connect', view_profile: 'View Profile', learning_stats: 'Learning Statistics', hours_learned: 'Hours Learned', courses_taken: 'Courses Taken', certificates: 'Certificates', completion_rate: 'Completion Rate' },
            es: { brand: 'üöÄ TABL√ìN DE HABILIDADES', tagline: 'Intercambia habilidades ‚Ä¢ Aprende juntos ‚Ä¢ Crece juntos', login_tab: 'Iniciar sesi√≥n', register_tab: 'Registrarse', sign_in: 'Entrar', create_account: 'Crear cuenta', preferences_header: 'Preferencias', pref_theme: 'Tema', pref_language: 'Idioma', pref_time_zone: 'Zona horaria', pref_content_pref: 'Preferencia de contenido', save_preferences: 'Guardar preferencias', save_notifications: 'Guardar notificaciones', language_changed: '¬°Idioma cambiado! ‚úì', theme_changed: '¬°Tema cambiado! ‚úì', dashboard: 'Panel de control', users: 'Usuarios', learning: 'Aprendizaje', social: 'Social', gamification: 'Gamificaci√≥n', analytics: 'Anal√≠tica', messages: 'Mensajes', settings: 'Configuraci√≥n', ai_chatbot: 'Chat IA', videos: 'Videos', professional: 'Profesional', welcome_dashboard: 'Bienvenido a tu Panel de Control', total_points: 'Puntos Totales', current_level: 'Nivel Actual', active_connections: 'Conexiones Activas', quick_actions: 'Acciones R√°pidas', earn_xp: 'Ganar XP', find_experts: 'Encontrar Expertos', new_exchange: 'Nuevo Intercambio', level_progress: 'Progreso de Nivel', my_skills: 'Mis Habilidades', add_skill: 'Agregar Habilidad', achievements: 'Logros Recientes', pending_requests: 'Solicitudes de Conexi√≥n', recent_connections: 'Conexiones Recientes', daily_checklist: 'Lista de Tareas Diaria', logout: 'Cerrar Sesi√≥n', light_mode: 'Modo Claro', dark_mode: 'Modo Oscuro', language: 'Idioma', email_address: 'Direcci√≥n de Correo', password: 'Contrase√±a', remember_me: 'Recu√©rdame', dont_have_account: '¬øNo tienes cuenta?', register_now: 'Reg√≠strate ahora', forgot_password: '¬øOlvidaste tu contrase√±a?', full_name: 'Nombre Completo', confirm_password: 'Confirmar Contrase√±a', profession: 'Profesi√≥n/T√≠tulo', agree_terms: 'Acepto los T√©rminos y Condiciones', already_have_account: '¬øYa tienes cuenta?', search: 'Buscar', find_and_connect: 'Buscar y Conectar con Expertos', learning_center: 'Centro de Aprendizaje Interactivo', filter_courses: 'Filtrar Cursos', all_courses: 'Todos los Cursos', in_progress: 'En Progreso', completed: 'Completado', recommended: 'Recomendado', my_courses: 'Mis Cursos', search_experts: 'Buscar Expertos', connect: 'Conectar', view_profile: 'Ver Perfil', learning_stats: 'Estad√≠sticas de Aprendizaje', hours_learned: 'Horas Aprendidas', courses_taken: 'Cursos Tomados', certificates: 'Certificados', completion_rate: 'Tasa de Finalizaci√≥n' },
            fr: { brand: 'üöÄ TABLEAU DES COMP√âTENCES', tagline: '√âchangez des comp√©tences ‚Ä¢ Apprenez ensemble ‚Ä¢ Grandissez ensemble', login_tab: 'Connexion', register_tab: 'S\'inscrire', sign_in: 'Se connecter', create_account: 'Cr√©er un compte', preferences_header: 'Pr√©f√©rences', pref_theme: 'Th√®me', pref_language: 'Langue', pref_time_zone: 'Fuseau horaire', pref_content_pref: 'Pr√©f√©rence de contenu', save_preferences: 'Enregistrer les pr√©f√©rences', save_notifications: 'Enregistrer les notifications', language_changed: 'Langue modifi√©e! ‚úì', theme_changed: 'Th√®me modifi√©! ‚úì', dashboard: 'Tableau de bord', users: 'Utilisateurs', learning: 'Apprentissage', social: 'Social', gamification: 'Gamification', analytics: 'Analytique', messages: 'Messages', settings: 'Param√®tres', ai_chatbot: 'Chat IA', videos: 'Vid√©os', professional: 'Professionnel', welcome_dashboard: 'Bienvenue sur votre Tableau de Bord', total_points: 'Points Totaux', current_level: 'Niveau Actuel', active_connections: 'Connexions Actives', quick_actions: 'Actions Rapides', earn_xp: 'Gagner XP', find_experts: 'Trouver des Experts', new_exchange: 'Nouvel √âchange', level_progress: 'Progression du Niveau', my_skills: 'Mes Comp√©tences', add_skill: 'Ajouter une Comp√©tence', achievements: 'R√©alisations R√©centes', pending_requests: 'Demandes de Connexion', recent_connections: 'Connexions R√©centes', daily_checklist: 'Liste de Contr√¥le Quotidienne', logout: 'D√©connexion', light_mode: 'Mode Clair', dark_mode: 'Mode Sombre', language: 'Langue', email_address: 'Adresse E-mail', password: 'Mot de Passe', remember_me: 'Se souvenir de moi', dont_have_account: 'Pas encore de compte?', register_now: 'Inscrivez-vous maintenant', forgot_password: 'Mot de passe oubli√©?', full_name: 'Nom Complet', confirm_password: 'Confirmer le Mot de Passe', profession: 'Profession/Titre', agree_terms: 'J\'accepte les Conditions G√©n√©rales', already_have_account: 'Vous avez d√©j√† un compte?', search: 'Recherche', find_and_connect: 'Trouver et Connecter avec des Experts', learning_center: 'Centre d\'Apprentissage Interactif', filter_courses: 'Filtrer les Cours', all_courses: 'Tous les Cours', in_progress: 'En Cours', completed: 'Compl√©t√©', recommended: 'Recommand√©', my_courses: 'Mes Cours', search_experts: 'Rechercher des Experts', connect: 'Connecter', view_profile: 'Voir le Profil', learning_stats: 'Statistiques d\'Apprentissage', hours_learned: 'Heures Apprises', courses_taken: 'Cours Suivis', certificates: 'Certificats', completion_rate: 'Taux d\'Ach√®vement' },
            de: { brand: 'üöÄ F√ÑHIGKEITSB√ñRSE', tagline: 'F√§higkeiten austauschen ‚Ä¢ Zusammen lernen ‚Ä¢ Zusammen wachsen', login_tab: 'Anmelden', register_tab: 'Registrieren', sign_in: 'Anmelden', create_account: 'Konto erstellen', preferences_header: 'Einstellungen', pref_theme: 'Design', pref_language: 'Sprache', pref_time_zone: 'Zeitzone', pref_content_pref: 'Inhaltspr√§ferenz', save_preferences: 'Einstellungen speichern', save_notifications: 'Benachrichtigungen speichern', language_changed: 'Sprache ge√§ndert! ‚úì', theme_changed: 'Design ge√§ndert! ‚úì', dashboard: 'Instrumententafel', users: 'Benutzer', learning: 'Lernen', social: 'Sozial', gamification: 'Gamifizierung', analytics: 'Analytik', messages: 'Nachrichten', settings: 'Einstellungen', ai_chatbot: 'KI-Chat', videos: 'Videos', professional: 'Beruflich', welcome_dashboard: 'Willkommen auf Ihrem Dashboard', total_points: 'Gesamtpunkte', current_level: 'Aktuelles Niveau', active_connections: 'Aktive Verbindungen', quick_actions: 'Schnellaktionen', earn_xp: 'XP Verdienen', find_experts: 'Experten Finden', new_exchange: 'Neuer Austausch', level_progress: 'Stufenfortschritt', my_skills: 'Meine F√§higkeiten', add_skill: 'F√§higkeit Hinzuf√ºgen', achievements: 'K√ºrzliche Erfolge', pending_requests: 'Verbindungsanfragen', recent_connections: 'Letzte Verbindungen', daily_checklist: 'T√§gliche Checkliste', logout: 'Abmelden', light_mode: 'Hellmodus', dark_mode: 'Dunkelmodus', language: 'Sprache', email_address: 'E-Mail-Adresse', password: 'Passwort', remember_me: 'Mich erinnern', dont_have_account: 'Haben Sie noch kein Konto?', register_now: 'Jetzt registrieren', forgot_password: 'Passwort vergessen?', full_name: 'Vollst√§ndiger Name', confirm_password: 'Passwort best√§tigen', profession: 'Beruf/Titel', agree_terms: 'Ich stimme den Gesch√§ftsbedingungen zu', already_have_account: 'Haben Sie bereits ein Konto?', search: 'Suche', find_and_connect: 'Experten Finden und Verbinden', learning_center: 'Interaktives Lernzentrum', filter_courses: 'Kurse Filtern', all_courses: 'Alle Kurse', in_progress: 'In Bearbeitung', completed: 'Abgeschlossen', recommended: 'Empfohlen', my_courses: 'Meine Kurse', search_experts: 'Experten Suchen', connect: 'Verbinden', view_profile: 'Profil Ansehen', learning_stats: 'Lernstatistiken', hours_learned: 'Gelernte Stunden', courses_taken: 'Kurse Absolviert', certificates: 'Zertifikate', completion_rate: 'Abschlussquote' },
            ja: { brand: 'üöÄ „Çπ„Ç≠„É´‰∫§Êèõ„Éú„Éº„Éâ', tagline: '„Çπ„Ç≠„É´„Çí‰∫§Êèõ ‚Ä¢ ‰∏ÄÁ∑í„Å´Â≠¶„Å∂ ‚Ä¢ ‰∏ÄÁ∑í„Å´ÊàêÈï∑', login_tab: '„É≠„Ç∞„Ç§„É≥', register_tab: 'ÁôªÈå≤', sign_in: '„Çµ„Ç§„É≥„Ç§„É≥', create_account: '„Ç¢„Ç´„Ç¶„É≥„Éà‰ΩúÊàê', preferences_header: 'Áí∞Â¢ÉË®≠ÂÆö', pref_theme: '„ÉÜ„Éº„Éû', pref_language: 'Ë®ÄË™û', pref_time_zone: '„Çø„Ç§„É†„Çæ„Éº„É≥', pref_content_pref: '„Ç≥„É≥„ÉÜ„É≥„ÉÑË®≠ÂÆö', save_preferences: 'Ë®≠ÂÆö„Çí‰øùÂ≠ò', save_notifications: 'ÈÄöÁü•„Çí‰øùÂ≠ò', language_changed: 'Ë®ÄË™û„ÅåÂ§âÊõ¥„Åï„Çå„Åæ„Åó„Åü! ‚úì', theme_changed: '„ÉÜ„Éº„Éû„ÅåÂ§âÊõ¥„Åï„Çå„Åæ„Åó„Åü! ‚úì', dashboard: '„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ', users: '„É¶„Éº„Ç∂„Éº', learning: 'Â≠¶Áøí', social: '„ÇΩ„Éº„Ç∑„É£„É´', gamification: '„Ç≤„Éº„Éü„Éï„Ç£„Ç±„Éº„Ç∑„Éß„É≥', analytics: 'ÂàÜÊûê', messages: '„É°„ÉÉ„Çª„Éº„Ç∏', settings: 'Ë®≠ÂÆö', ai_chatbot: 'AI„ÉÅ„É£„ÉÉ„Éà', videos: '„Éì„Éá„Ç™', professional: '„Éó„É≠„Éï„Çß„ÉÉ„Ç∑„Éß„Éä„É´', welcome_dashboard: '„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ„Å∏„Çà„ÅÜ„Åì„Åù', total_points: 'Á∑è„Éù„Ç§„É≥„Éà', current_level: 'ÁèæÂú®„ÅÆ„É¨„Éô„É´', active_connections: '„Ç¢„ÇØ„ÉÜ„Ç£„Éñ„Å™Êé•Á∂ö', quick_actions: '„ÇØ„Ç§„ÉÉ„ÇØ„Ç¢„ÇØ„Ç∑„Éß„É≥', earn_xp: 'XP„ÇíÁç≤Âæó', find_experts: 'Â∞ÇÈñÄÂÆ∂„ÇíÊé¢„Åô', new_exchange: 'Êñ∞„Åó„ÅÑ‰∫§Êèõ', level_progress: '„É¨„Éô„É´ÈÄ≤Â∫¶', my_skills: 'ÁßÅ„ÅÆ„Çπ„Ç≠„É´', add_skill: '„Çπ„Ç≠„É´„ÇíËøΩÂä†', achievements: 'ÊúÄËøë„ÅÆÊàêÊûú', pending_requests: 'Êé•Á∂ö„É™„ÇØ„Ç®„Çπ„Éà', recent_connections: 'ÊúÄËøë„ÅÆÊé•Á∂ö', daily_checklist: 'ÊØéÊó•„ÅÆ„ÉÅ„Çß„ÉÉ„ÇØ„É™„Çπ„Éà', logout: '„É≠„Ç∞„Ç¢„Ç¶„Éà', light_mode: '„É©„Ç§„Éà„É¢„Éº„Éâ', dark_mode: '„ÉÄ„Éº„ÇØ„É¢„Éº„Éâ', language: 'Ë®ÄË™û', email_address: '„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ', password: '„Éë„Çπ„ÉØ„Éº„Éâ', remember_me: '„ÇíÊÄù„ÅÑÂá∫„Åó„Å¶', dont_have_account: '„Ç¢„Ç´„Ç¶„É≥„Éà„Çí„ÅäÊåÅ„Å°„Åß„Åô„Åã?', register_now: '‰ªä„Åô„ÅêÁôªÈå≤', forgot_password: '„Éë„Çπ„ÉØ„Éº„Éâ„Çí„ÅäÂøò„Çå„Åß„Åô„Åã?', full_name: '„Éï„É´„Éç„Éº„É†', confirm_password: '„Éë„Çπ„ÉØ„Éº„Éâ„ÇíÁ¢∫Ë™ç', profession: 'ËÅ∑Ê•≠/ËÇ©Êõ∏', agree_terms: 'Âà©Áî®Ë¶èÁ¥Ñ„Å´ÂêåÊÑè„Åó„Åæ„Åô', already_have_account: '„Åô„Åß„Å´„Ç¢„Ç´„Ç¶„É≥„Éà„Çí„ÅäÊåÅ„Å°„Åß„Åô„Åã?', search: 'Ê§úÁ¥¢', find_and_connect: 'Â∞ÇÈñÄÂÆ∂„ÇíÊé¢„Åó„Å¶Êé•Á∂ö', learning_center: '„Ç§„É≥„Çø„É©„ÇØ„ÉÜ„Ç£„ÉñÂ≠¶Áøí„Çª„É≥„Çø„Éº', filter_courses: '„Ç≥„Éº„Çπ„Çí„Éï„Ç£„É´„Çø„É™„É≥„Ç∞', all_courses: '„Åô„Åπ„Å¶„ÅÆ„Ç≥„Éº„Çπ', in_progress: 'ÈÄ≤Ë°å‰∏≠', completed: 'ÂÆå‰∫Ü', recommended: '„Åä„Åô„Åô„ÇÅ', my_courses: '„Éû„Ç§„Ç≥„Éº„Çπ', search_experts: 'Â∞ÇÈñÄÂÆ∂„ÇíÊ§úÁ¥¢', connect: 'Êé•Á∂ö', view_profile: '„Éó„É≠„Éï„Ç£„Éº„É´„ÇíË°®Á§∫', learning_stats: 'Â≠¶ÁøíÁµ±Ë®à', hours_learned: 'Â≠¶ÁøíÊôÇÈñì', courses_taken: '„Ç≥„Éº„ÇπÂèóË¨õ', certificates: 'Ë®ºÊòéÊõ∏', completion_rate: 'ÂÆå‰∫ÜÁéá' },
            zh: { brand: 'üöÄ ÊäÄËÉΩ‰∫§Êç¢Êùø', tagline: '‰∫§Êç¢ÊäÄËÉΩ ‚Ä¢ ÂÖ±ÂêåÂ≠¶‰π† ‚Ä¢ ÂÖ±ÂêåÊàêÈïø', login_tab: 'ÁôªÂΩï', register_tab: 'Ê≥®ÂÜå', sign_in: 'ÁôªÂΩï', create_account: 'ÂàõÂª∫Ë¥¶Êà∑', preferences_header: 'ÂÅèÂ•ΩËÆæÁΩÆ', pref_theme: '‰∏ªÈ¢ò', pref_language: 'ËØ≠Ë®Ä', pref_time_zone: 'Êó∂Âå∫', pref_content_pref: 'ÂÜÖÂÆπÂÅèÂ•Ω', save_preferences: '‰øùÂ≠òÂÅèÂ•ΩËÆæÁΩÆ', save_notifications: '‰øùÂ≠òÈÄöÁü•', language_changed: 'ËØ≠Ë®ÄÂ∑≤Êõ¥Êîπ! ‚úì', theme_changed: '‰∏ªÈ¢òÂ∑≤Êõ¥Êîπ! ‚úì', dashboard: '‰ª™Ë°®Êùø', users: 'Áî®Êà∑', learning: 'Â≠¶‰π†', social: 'Á§æ‰∫§', gamification: 'Ê∏∏ÊàèÂåñ', analytics: 'ÂàÜÊûê', messages: 'Ê∂àÊÅØ', settings: 'ËÆæÁΩÆ', ai_chatbot: '‰∫∫Â∑•Êô∫ËÉΩËÅäÂ§©', videos: 'ËßÜÈ¢ë', professional: '‰∏ì‰∏ö', welcome_dashboard: 'Ê¨¢ËøéÊù•Âà∞ÊÇ®ÁöÑ‰ª™Ë°®Êùø', total_points: 'ÊÄªÂàÜ', current_level: 'ÂΩìÂâçÁ∫ßÂà´', active_connections: 'Ê¥ªË∑ÉËøûÊé•', quick_actions: 'Âø´ÈÄüÊìç‰Ωú', earn_xp: 'ËµöÂèñÁªèÈ™åÂÄº', find_experts: 'Êü•Êâæ‰∏ìÂÆ∂', new_exchange: 'Êñ∞‰∫§Êç¢', level_progress: 'Á∫ßÂà´ËøõÂ∫¶', my_skills: 'ÊàëÁöÑÊäÄËÉΩ', add_skill: 'Ê∑ªÂä†ÊäÄËÉΩ', achievements: 'ÊúÄËøëÁöÑÊàêÂ∞±', pending_requests: 'ËøûÊé•ËØ∑Ê±Ç', recent_connections: 'ÊúÄËøëÁöÑËøûÊé•', daily_checklist: 'ÊØèÊó•Ê∏ÖÂçï', logout: 'ÁôªÂá∫', light_mode: 'ÊµÖËâ≤Ê®°Âºè', dark_mode: 'Ê∑±Ëâ≤Ê®°Âºè', language: 'ËØ≠Ë®Ä', email_address: 'ÁîµÂ≠êÈÇÆ‰ª∂Âú∞ÂùÄ', password: 'ÂØÜÁ†Å', remember_me: 'ËÆ∞‰ΩèÊàë', dont_have_account: 'ËøòÊ≤°ÊúâË¥¶Êà∑?', register_now: 'Áé∞Âú®Ê≥®ÂÜå', forgot_password: 'ÂøòËÆ∞ÂØÜÁ†Å?', full_name: 'ÂÖ®Âêç', confirm_password: 'Á°ÆËÆ§ÂØÜÁ†Å', profession: 'ËÅå‰∏ö/ËÅå‰Ωç', agree_terms: 'ÊàëÂêåÊÑèÊù°Ê¨æÂíåÊù°‰ª∂', already_have_account: 'Â∑≤ÊúâË¥¶Êà∑?', search: 'ÊêúÁ¥¢', find_and_connect: 'Êü•ÊâæÂíåËøûÊé•‰∏ìÂÆ∂', learning_center: '‰∫íÂä®Â≠¶‰π†‰∏≠ÂøÉ', filter_courses: 'Á≠õÈÄâËØæÁ®ã', all_courses: 'ÊâÄÊúâËØæÁ®ã', in_progress: 'ËøõË°å‰∏≠', completed: 'Â∑≤ÂÆåÊàê', recommended: 'Êé®Ëçê', my_courses: 'ÊàëÁöÑËØæÁ®ã', search_experts: 'ÊêúÁ¥¢‰∏ìÂÆ∂', connect: 'ËøûÊé•', view_profile: 'Êü•ÁúãËµÑÊñô', learning_stats: 'Â≠¶‰π†ÁªüËÆ°', hours_learned: 'Â≠¶‰π†Êó∂Êï∞', courses_taken: 'ÂèÇÂä†ÁöÑËØæÁ®ã', certificates: 'ËØÅ‰π¶', completion_rate: 'ÂÆåÊàêÁéá' },
            ko: { brand: 'üöÄ Ïä§ÌÇ¨ Î∞îÌÑ∞ Î≥¥Îìú', tagline: 'Í∏∞Ïà† ÍµêÌôò ‚Ä¢ Ìï®Íªò Î∞∞Ïö∞Í∏∞ ‚Ä¢ Ìï®Íªò ÏÑ±Ïû•ÌïòÍ∏∞', login_tab: 'Î°úÍ∑∏Ïù∏', register_tab: 'Í∞ÄÏûÖ', sign_in: 'Î°úÍ∑∏Ïù∏', create_account: 'Í≥ÑÏ†ï ÏÉùÏÑ±', preferences_header: 'ÏÑ§Ï†ï', pref_theme: 'ÌÖåÎßà', pref_language: 'Ïñ∏Ïñ¥', pref_time_zone: 'ÏãúÍ∞ÑÎåÄ', pref_content_pref: 'ÏΩòÌÖêÏ∏† ÏÑ§Ï†ï', save_preferences: 'ÏÑ§Ï†ï Ï†ÄÏû•', save_notifications: 'ÏïåÎ¶º Ï†ÄÏû•', language_changed: 'Ïñ∏Ïñ¥Í∞Ä Î≥ÄÍ≤ΩÎêòÏóàÏäµÎãàÎã§! ‚úì', theme_changed: 'ÌÖåÎßàÍ∞Ä Î≥ÄÍ≤ΩÎêòÏóàÏäµÎãàÎã§! ‚úì', dashboard: 'ÎåÄÏãúÎ≥¥Îìú', users: 'ÏÇ¨Ïö©Ïûê', learning: 'ÌïôÏäµ', social: 'ÏÜåÏÖú', gamification: 'Í≤åÏù¥ÎØ∏ÌîºÏºÄÏù¥ÏÖò', analytics: 'Î∂ÑÏÑù', messages: 'Î©îÏãúÏßÄ', settings: 'ÏÑ§Ï†ï', ai_chatbot: 'AI Ï±ÑÌåÖ', videos: 'ÎπÑÎîîÏò§', professional: 'Ï†ÑÎ¨∏Í∞Ä', welcome_dashboard: 'ÎåÄÏãúÎ≥¥ÎìúÏóê Ïò§Ïã† Í≤ÉÏùÑ ÌôòÏòÅÌï©ÎãàÎã§', total_points: 'Ï¥ù Ìè¨Ïù∏Ìä∏', current_level: 'ÌòÑÏû¨ Î†àÎ≤®', active_connections: 'ÌôúÏÑ± Ïó∞Í≤∞', quick_actions: 'Îπ†Î•∏ ÏûëÏóÖ', earn_xp: 'XP ÌöçÎìù', find_experts: 'Ï†ÑÎ¨∏Í∞Ä Ï∞æÍ∏∞', new_exchange: 'ÏÉà ÍµêÌôò', level_progress: 'Î†àÎ≤® ÏßÑÌñâ ÏÉÅÌô©', my_skills: 'ÎÇ¥ Í∏∞Ïà†', add_skill: 'Í∏∞Ïà† Ï∂îÍ∞Ä', achievements: 'ÏµúÍ∑º ÏÑ±Ï∑®', pending_requests: 'Ïó∞Í≤∞ ÏöîÏ≤≠', recent_connections: 'ÏµúÍ∑º Ïó∞Í≤∞', daily_checklist: 'Îß§Ïùº ÌôïÏù∏', logout: 'Î°úÍ∑∏ÏïÑÏõÉ', light_mode: 'ÎùºÏù¥Ìä∏ Î™®Îìú', dark_mode: 'Îã§ÌÅ¨ Î™®Îìú', language: 'Ïñ∏Ïñ¥', email_address: 'Ïù¥Î©îÏùº Ï£ºÏÜå', password: 'ÏïîÌò∏', remember_me: 'ÎÇòÎ•º Í∏∞ÏñµÌïòÏÑ∏Ïöî', dont_have_account: 'Í≥ÑÏ†ïÏù¥ ÏóÜÏúºÏã†Í∞ÄÏöî?', register_now: 'ÏßÄÍ∏à Îì±Î°ù', forgot_password: 'ÎπÑÎ∞ÄÎ≤àÌò∏Î•º ÏûäÏúºÏÖ®ÎÇòÏöî?', full_name: 'Ï†ÑÏ≤¥ Ïù¥Î¶Ñ', confirm_password: 'ÎπÑÎ∞ÄÎ≤àÌò∏ ÌôïÏù∏', profession: 'ÏßÅÏóÖ/ÏßÅÏ±Ö', agree_terms: 'Ïù¥Ïö©ÏïΩÍ¥ÄÏóê ÎèôÏùòÌï©ÎãàÎã§', already_have_account: 'Ïù¥ÎØ∏ Í≥ÑÏ†ïÏù¥ ÏûàÏúºÏã†Í∞ÄÏöî?', search: 'Í≤ÄÏÉâ', find_and_connect: 'Ï†ÑÎ¨∏Í∞Ä Ï∞æÍ∏∞ Î∞è Ïó∞Í≤∞', learning_center: 'ÎåÄÌôîÌòï ÌïôÏäµ ÏÑºÌÑ∞', filter_courses: 'Í∞ïÏ¢å ÌïÑÌÑ∞ÎßÅ', all_courses: 'Î™®Îì† Í∞ïÏ¢å', in_progress: 'ÏßÑÌñâ Ï§ë', completed: 'ÏôÑÎ£å', recommended: 'Ï∂îÏ≤ú', my_courses: 'ÎÇ¥ Í∞ïÏ¢å', search_experts: 'Ï†ÑÎ¨∏Í∞Ä Í≤ÄÏÉâ', connect: 'Ïó∞Í≤∞', view_profile: 'ÌîÑÎ°úÌïÑ Î≥¥Í∏∞', learning_stats: 'ÌïôÏäµ ÌÜµÍ≥Ñ', hours_learned: 'ÌïôÏäµÌïú ÏãúÍ∞Ñ', courses_taken: 'ÏàòÍ∞ïÌïú Í∞ïÏ¢å', certificates: 'Ïù∏Ï¶ùÏÑú', completion_rate: 'ÏôÑÎ£åÏú®' },
            pt: { brand: 'üöÄ QUADRO DE HABILIDADES', tagline: 'Troque habilidades ‚Ä¢ Aprenda junto ‚Ä¢ Cres√ßa junto', login_tab: 'Login', register_tab: 'Registrar', sign_in: 'Entrar', create_account: 'Criar conta', preferences_header: 'Prefer√™ncias', pref_theme: 'Tema', pref_language: 'Idioma', pref_time_zone: 'Fuso hor√°rio', pref_content_pref: 'Prefer√™ncia de conte√∫do', save_preferences: 'Salvar prefer√™ncias', save_notifications: 'Salvar notifica√ß√µes', language_changed: 'Idioma alterado! ‚úì', theme_changed: 'Tema alterado! ‚úì', dashboard: 'Painel de Controle', users: 'Usu√°rios', learning: 'Aprendizado', social: 'Social', gamification: 'Gamifica√ß√£o', analytics: 'An√°lises', messages: 'Mensagens', settings: 'Configura√ß√µes', ai_chatbot: 'Chat IA', videos: 'V√≠deos', professional: 'Profissional', welcome_dashboard: 'Bem-vindo ao seu Painel de Controle', total_points: 'Pontos Totais', current_level: 'N√≠vel Atual', active_connections: 'Conex√µes Ativas', quick_actions: 'A√ß√µes R√°pidas', earn_xp: 'Ganhar XP', find_experts: 'Encontrar Especialistas', new_exchange: 'Novo Interc√¢mbio', level_progress: 'Progresso do N√≠vel', my_skills: 'Minhas Habilidades', add_skill: 'Adicionar Habilidade', achievements: 'Conquistas Recentes', pending_requests: 'Solicita√ß√µes de Conex√£o', recent_connections: 'Conex√µes Recentes', daily_checklist: 'Lista de Verifica√ß√£o Di√°ria', logout: 'Fazer logout', light_mode: 'Modo Claro', dark_mode: 'Modo Escuro', language: 'Idioma', email_address: 'Endere√ßo de E-mail', password: 'Senha', remember_me: 'Lembrar-me', dont_have_account: 'N√£o tem uma conta?', register_now: 'Registre-se agora', forgot_password: 'Esqueceu a senha?', full_name: 'Nome Completo', confirm_password: 'Confirmar Senha', profession: 'Profiss√£o/T√≠tulo', agree_terms: 'Concordo com os Termos e Condi√ß√µes', already_have_account: 'J√° tem uma conta?', search: 'Pesquisar', find_and_connect: 'Encontrar e Conectar com Especialistas', learning_center: 'Centro de Aprendizado Interativo', filter_courses: 'Filtrar Cursos', all_courses: 'Todos os Cursos', in_progress: 'Em Progresso', completed: 'Conclu√≠do', recommended: 'Recomendado', my_courses: 'Meus Cursos', search_experts: 'Pesquisar Especialistas', connect: 'Conectar', view_profile: 'Ver Perfil', learning_stats: 'Estat√≠sticas de Aprendizado', hours_learned: 'Horas Aprendidas', courses_taken: 'Cursos Realizados', certificates: 'Certificados', completion_rate: 'Taxa de Conclus√£o' }
        };

        function getText(key, lang) {
            lang = lang || document.getElementById('settingsLanguage')?.value || 'en';
            return (TRANSLATIONS[lang] && TRANSLATIONS[lang][key]) || TRANSLATIONS['en'][key] || key;
        }

        function changeTheme(theme) {
            if (theme === 'light') {
                document.body.classList.add('light-mode');
                localStorage.setItem('isDarkMode', 'false');
            } else {
                document.body.classList.remove('light-mode');
                localStorage.setItem('isDarkMode', 'true');
            }
            updateThemeButton && updateThemeButton();
        }

        // Map language codes that aren't translated to the closest available translation
        const LANGUAGE_ALIASES = {
            fil: 'en', bn: 'en', ur: 'en', pa: 'en', gu: 'en', mr: 'en', ta: 'en', te: 'en', kn: 'en', ml: 'en', mn: 'en', km: 'en', lo: 'en', my: 'en', si: 'en', fa: 'en', is: 'en', lv: 'en', lt: 'en', sw: 'en', af: 'en', el: 'en', bg: 'en', sr: 'en', hr: 'en', uk: 'en', sk: 'en', hu: 'en', ro: 'en'
        };

        function changeLanguage(lang) {
            if (!lang) return;
            lang = String(lang).toLowerCase().trim();

            // Determine which translation set to use (may map codes to available languages)
            let usedLang = lang;
            if (!TRANSLATIONS[usedLang]) {
                const alias = LANGUAGE_ALIASES[usedLang];
                if (alias && TRANSLATIONS[alias]) {
                    console.warn('Language', lang, 'not available ‚Äî using alias', alias);
                    usedLang = alias;
                } else {
                    console.warn('Language not found:', lang, '- falling back to English');
                    usedLang = 'en';
                }
            }

            console.log('=== STARTING LANGUAGE CHANGE TO:', lang, '(using:', usedLang, ') ===');
            document.documentElement.lang = lang;
            
            // Update language button label
            const langBtn = document.querySelector('[onclick*="openLanguageSelector"]');
            if (langBtn) {
                langBtn.innerHTML = '<i class="fas fa-globe"></i> ' + lang.toUpperCase();
            }
            
            // Update settings language select if it exists
            const settingsLang = document.getElementById('settingsLanguage');
            if (settingsLang) {
                settingsLang.value = lang;
            }
            
            // Translate ALL elements with data-i18n (use mapped language if original not available)
            const translatableElements = document.querySelectorAll('[data-i18n]');
            console.log('Found', translatableElements.length, 'elements with data-i18n');

            translatableElements.forEach((el, idx) => {
                const key = el.getAttribute('data-i18n');
                const txt = getText(key, usedLang);
                const tagName = el.tagName.toLowerCase();
                
                // Handle input and textarea elements
                if (tagName === 'input' || tagName === 'textarea') {
                    el.placeholder = txt;
                    console.log(`[${idx}] Updated ${tagName}[data-i18n="${key}"] placeholder ‚Üí "${txt}"`);
                }
                // Handle auth header elements
                else if (el.classList.contains('logo') || key === 'brand') {
                    el.innerHTML = '<i class="fas fa-exchange-alt"></i> ' + txt;
                    console.log(`[${idx}] Updated logo/brand ‚Üí "${txt}"`);
                }
                // Handle elements with icons (sidebar items, buttons with icons)
                else if (el.querySelector('i')) {
                    const icon = el.querySelector('i').outerHTML;
                    el.innerHTML = icon + ' ' + txt;
                    console.log(`[${idx}] Updated ${tagName}[data-i18n="${key}"] with icon ‚Üí "${txt}"`);
                }
                // Handle elements with spans inside (like tabs)
                else if (el.querySelector('span')) {
                    const span = el.querySelector('span');
                    span.textContent = txt;
                    console.log(`[${idx}] Updated span in ${tagName}[data-i18n="${key}"] ‚Üí "${txt}"`);
                }
                // Default: just set text content
                else {
                    el.textContent = txt;
                    console.log(`[${idx}] Updated ${tagName}[data-i18n="${key}"] ‚Üí "${txt}"`);
                }
            });
            
            // Update placeholders for elements with data-i18n-placeholder
            document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
                const key = el.getAttribute('data-i18n-placeholder');
                el.placeholder = getText(key, usedLang);
            });
            
            // Save to localStorage
            const settings = JSON.parse(localStorage.getItem('sb_settings') || '{}');
            // Save the user's chosen code, but translations may use a mapped language internally
            settings.language = lang;
            localStorage.setItem('sb_settings', JSON.stringify(settings));
            console.log('Saved language to localStorage:', lang);
            
            // Update language dropdown highlighting (if dropdown is open)
            const dropdown = document.getElementById('languageDropdown');
            if (dropdown && dropdown.classList.contains('active')) {
                document.querySelectorAll('.language-item').forEach(item => {
                    item.classList.remove('active-lang');
                });
                const activeItem = document.querySelector(`.language-item[onclick*="'${lang}'"]`);
                if (activeItem) activeItem.classList.add('active-lang');
            }
            
            // Show success toast (use usedLang for the message translations)
            showToast(getText('language_changed', usedLang), 'success');
            console.log('=== LANGUAGE CHANGE COMPLETE TO:', lang, '(used:', usedLang, ') ===');
        }

        // Settings persistence: save/load
        function saveSettings(tab) {
            const settings = JSON.parse(localStorage.getItem('sb_settings') || '{}');

            if (tab === 'profile') {
                settings.fullName = document.getElementById('settingsFullName').value;
                settings.email = document.getElementById('settingsEmail').value;
                settings.phone = document.getElementById('settingsPhone').value;
                settings.bio = document.getElementById('settingsBio').value;
                showToast('‚úì Profile saved', 'success');
            } else if (tab === 'privacy') {
                settings.visibility = document.getElementById('settingsVisibility').checked;
                settings.showProgress = document.getElementById('settingsShowProgress').checked;
                settings.connections = document.getElementById('settingsConnections').checked;
                settings.showLastActive = document.getElementById('settingsShowLastActive').checked;
                showToast('‚úì Privacy settings saved', 'success');
            } else if (tab === 'notifications') {
                settings.emailNotifications = document.getElementById('settingsEmailNotifications').checked;
                settings.courseUpdates = document.getElementById('settingsCourseUpdates').checked;
                settings.connectionNotifications = document.getElementById('settingsConnectionNotifications').checked;
                settings.directMessageNotifications = document.getElementById('settingsDirectMessageNotifications').checked;
                showToast('‚úì Notification settings saved', 'success');
            }

            else if (tab === 'preferences') {
                settings.theme = document.getElementById('settingsTheme').value;
                settings.language = document.getElementById('settingsLanguage').value;
                settings.timeZone = document.getElementById('settingsTimeZone').value;
                settings.contentPref = document.getElementById('settingsContentPref').value;
                // Apply theme immediately
                if (settings.theme === 'light') {
                    document.body.classList.add('light-mode');
                    localStorage.setItem('isDarkMode', false);
                } else {
                    document.body.classList.remove('light-mode');
                    localStorage.setItem('isDarkMode', true);
                }
                changeLanguage(settings.language);
                    // apply timezone & content pref immediately as well
                    try { applyTimeZone(settings.timeZone, false); } catch (e) {}
                    try { applyContentPreference(settings.contentPref, false); } catch (e) {}
                    showToast('‚úì Preferences saved', 'success');
            }

            localStorage.setItem('sb_settings', JSON.stringify(settings));
        }

        function loadSettings() {
            const settings = JSON.parse(localStorage.getItem('sb_settings') || '{}');
            if (!settings) return;
            if (settings.fullName) document.getElementById('settingsFullName').value = settings.fullName;
            if (settings.email) document.getElementById('settingsEmail').value = settings.email;
            if (settings.phone) document.getElementById('settingsPhone').value = settings.phone;
            if (settings.bio) document.getElementById('settingsBio').value = settings.bio;

            if (typeof settings.visibility !== 'undefined') document.getElementById('settingsVisibility').checked = settings.visibility;
            if (typeof settings.showProgress !== 'undefined') document.getElementById('settingsShowProgress').checked = settings.showProgress;
            if (typeof settings.connections !== 'undefined') document.getElementById('settingsConnections').checked = settings.connections;
            if (typeof settings.showLastActive !== 'undefined') document.getElementById('settingsShowLastActive').checked = settings.showLastActive;

            if (typeof settings.emailNotifications !== 'undefined') document.getElementById('settingsEmailNotifications').checked = settings.emailNotifications;
            if (typeof settings.courseUpdates !== 'undefined') document.getElementById('settingsCourseUpdates').checked = settings.courseUpdates;
            if (typeof settings.connectionNotifications !== 'undefined') document.getElementById('settingsConnectionNotifications').checked = settings.connectionNotifications;
            if (typeof settings.directMessageNotifications !== 'undefined') document.getElementById('settingsDirectMessageNotifications').checked = settings.directMessageNotifications;

            if (settings.theme) {
                document.getElementById('settingsTheme').value = settings.theme;
                if (settings.theme === 'light') document.body.classList.add('light-mode');
                else document.body.classList.remove('light-mode');
            }
            if (settings.language) document.getElementById('settingsLanguage').value = settings.language;
            if (settings.timeZone) document.getElementById('settingsTimeZone').value = settings.timeZone;
            if (settings.contentPref) document.getElementById('settingsContentPref').value = settings.contentPref;
            
            // CRITICAL: Apply translations first thing
            const langToApply = settings.language || 'en';
            console.log('loadSettings: Applying language:', langToApply);
            changeLanguage(langToApply);
            
            // apply timezone and content preference immediately if present
            if (settings.timeZone) applyTimeZone(settings.timeZone, false);
            if (settings.contentPref) applyContentPreference(settings.contentPref, false);
        }

        // VIDEO helpers
        function playVideo(title) {
            loadVideoTab('watch');
            showToast('‚ñ∂ Playing: ' + (title || 'Video'), 'success');
        }

        // Apply Time Zone selection visually and persist
        function applyTimeZone(tz, save = true) {
            const display = document.getElementById('userTimezoneDisplay');
            if (display) display.textContent = tz ? `Time Zone: ${tz}` : '';
            try {
                const settings = JSON.parse(localStorage.getItem('sb_settings') || '{}');
                settings.timeZone = tz;
                if (save) localStorage.setItem('sb_settings', JSON.stringify(settings));
            } catch (e) { console.warn('Failed to save timezone', e); }
        }

        // Apply content preference (hook to learning filters) and persist
        function applyContentPreference(pref, save = true) {
            try {
                window.__contentPref = pref;
                // quick filter trigger if learning loaded
                try { filterCourses(pref); } catch (e) {}
                const settings = JSON.parse(localStorage.getItem('sb_settings') || '{}');
                settings.contentPref = pref;
                if (save) localStorage.setItem('sb_settings', JSON.stringify(settings));
            } catch (e) { console.warn('Failed to apply content preference', e); }
        }

        // debounce helper
        function debounce(fn, wait) {
            let t;
            return function(...args) { clearTimeout(t); t = setTimeout(() => fn.apply(this, args), wait); };
        }

        // single debounced save function used by change handlers
        const debouncedSavePreferences = debounce(() => saveSettings('preferences'), 300);

        // Wire selects to apply immediately and auto-save after small debounce
        document.addEventListener('DOMContentLoaded', function() {
            const tz = document.getElementById('settingsTimeZone');
            const content = document.getElementById('settingsContentPref');
            const lang = document.getElementById('settingsLanguage');
            const theme = document.getElementById('settingsTheme');

            if (tz) tz.addEventListener('change', function(e) { applyTimeZone(e.target.value); debouncedSavePreferences(); });
            if (content) content.addEventListener('change', function(e) { applyContentPreference(e.target.value); debouncedSavePreferences(); });
            if (lang) lang.addEventListener('change', function(e) { changeLanguage(e.target.value); debouncedSavePreferences(); });
            if (theme) theme.addEventListener('change', function(e) { changeTheme(e.target.value); debouncedSavePreferences(); });

            // show stored timezone quickly
            try { const s = JSON.parse(localStorage.getItem('sb_settings') || '{}'); if (s && s.timeZone) applyTimeZone(s.timeZone, false); } catch (e) {}
        });

        // Language Selector Functions
        function toggleLanguageDropdown() {
            const dropdown = document.getElementById('languageDropdown');
            if (dropdown) {
                dropdown.classList.toggle('active');
                if (dropdown.classList.contains('active')) {
                    populateLanguagesList();
                }
            }
        }

        function populateLanguagesList() {
            const listContainer = document.getElementById('languagesList');
            if (!listContainer) return;
            
            const languages = {
                'en': 'English',
                'es': 'Espa√±ol',
                'fr': 'Fran√ßais',
                'de': 'Deutsch',
                'it': 'Italiano',
                'pt': 'Portugu√™s',
                'ru': '–†—É—Å—Å–∫–∏–π',
                'ja': 'Êó•Êú¨Ë™û',
                'zh': '‰∏≠Êñá',
                'ko': 'ÌïúÍµ≠Ïñ¥',
                'th': '‡πÑ‡∏ó‡∏¢',
                'vi': 'Ti·∫øng Vi·ªát',
                'id': 'Bahasa Indonesia',
                'fil': 'Filipino',
                'ar': 'ÿßŸÑÿπÿ±ÿ®Ÿäÿ©',
                'he': '◊¢◊ë◊®◊ô◊™',
                'tr': 'T√ºrk√ße',
                'el': 'ŒïŒªŒªŒ∑ŒΩŒπŒ∫Œ¨',
                'pl': 'Polski',
                'cs': 'ƒåe≈°tina',
                'sk': 'Slovenƒçina',
                'hu': 'Magyar',
                'ro': 'Rom√¢nƒÉ',
                'bg': '–ë—ä–ª–≥–∞—Ä—Å–∫–∏',
                'sr': '–°—Ä–ø—Å–∫–∏',
                'hr': 'Hrvatski',
                'uk': '–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞',
                'sv': 'Svenska',
                'no': 'Norsk',
                'da': 'Dansk',
                'fi': 'Suomi',
                'nl': 'Nederlands',
                'af': 'Afrikaans',
                'sw': 'Swahili',
                'hi': '‡§π‡§ø‡§®‡•ç‡§¶‡•Ä',
                'bn': '‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ',
                'ur': 'ÿßÿ±ÿØŸà',
                'pa': '‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä',
                'gu': '‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä',
                'mr': '‡§Æ‡§∞‡§æ‡§†‡•Ä',
                'ta': '‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç',
                'te': '‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å',
                'kn': '‡≤ï‡≤®‡≥ç‡≤®‡≤°',
                'ml': '‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç',
                'mn': '–ú–æ–Ω–≥–æ–ª',
                'km': '·ûÅ·üí·ûò·üÇ‡§∞',
                'lo': '‡∫•‡∫≤‡∫ß',
                'my': '·Äô·Äº·Äî·Ä∫·Äô·Ä¨',
                'si': '‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω',
                'fa': 'ŸÅÿßÿ±ÿ≥€å',
                'is': '√çslenska',
                'et': 'Eesti',
                'lv': 'Latvian',
                'lt': 'Lietuvi≈≥'
            };
            
            const currentLang = document.documentElement.lang || 'en';
            
            listContainer.innerHTML = Object.keys(languages).map(code => {
                const isActive = code === currentLang ? 'active-lang' : '';
                return `<div class="language-item ${isActive}" onclick="selectLanguageFromDropdown('${code}')">${languages[code]}</div>`;
            }).join('');
        }

        function selectLanguageFromDropdown(langCode) {
            console.log('selectLanguageFromDropdown called with:', langCode);
            changeLanguage(langCode);
            setTimeout(() => toggleLanguageDropdown(), 100);
            showToast('‚úì Language changed to ' + langCode.toUpperCase(), 'success');
        }

        function openLanguageSelector() {
            toggleLanguageDropdown();
        }

        function playPlaylist(name) {
            loadVideoTab('playlists');
            showToast('‚ñ∂ Playing playlist: ' + name, 'success');
        }

        // PROFESSIONAL helpers
        function openProfessionalProject(name) {
            loadProfessionalTab('portfolio');
            // Open modal with project details
            showProjectModal(name);
        }

        function showProjectModal(name) {
            const titleEl = document.getElementById('projectModalTitle');
            const bodyEl = document.getElementById('projectModalBody');
            const modal = document.getElementById('projectModal');
            titleEl.textContent = name;
            // Basic demo content - in a real app this would fetch project details
            bodyEl.textContent = `${name} ‚Äî A detailed project overview. Click Save to store a copy or Close to return.`;
            modal.classList.add('show');
        }

        function closeProjectModal() {
            const modal = document.getElementById('projectModal');
            modal.classList.remove('show');
        }

        // Chat send renamed to avoid collision with other sendMessage(userId,..)
        function sendChatMessage() {
            const input = document.getElementById('messageInput');
            if (input.value.trim()) {
                const content = input.value.trim();
                const convId = window.currentChatId || 'global';
                const msgObj = { from: 'You', content: content, timestamp: new Date().toLocaleString() };

                // Persist message and reload history
                saveChatMessage(convId, msgObj);
                loadChatHistory(convId);

                input.value = '';
                showToast('Message sent! ‚úì', 'success');
            }
        }

        function saveChatMessage(conversationId, messageObj) {
            try {
                const key = 'sb_chat_' + conversationId;
                const arr = JSON.parse(localStorage.getItem(key) || '[]');
                arr.push(messageObj);
                localStorage.setItem(key, JSON.stringify(arr));
            } catch (e) {
                console.error('Failed to save chat message', e);
            }
        }

        function loadChatHistory(conversationId, userName) {
            const key = 'sb_chat_' + conversationId;
            const arr = JSON.parse(localStorage.getItem(key) || '[]');
            const chatMessages = document.getElementById('chatMessages');
            chatMessages.innerHTML = '';

            if (!arr || arr.length === 0) {
                chatMessages.innerHTML = '<div style="text-align: center; color: var(--text-muted);"><p>No messages yet. Say hello üëã</p></div>';
                return;
            }

            arr.forEach(msg => {
                if (msg.from === 'You') {
                    chatMessages.innerHTML += `<div style="text-align: right;"><p style="background: rgba(0, 212, 255, 0.3); padding: 0.8rem; border-radius: 8px; margin: 0;"><strong>You:</strong> ${msg.content}</p></div>`;
                } else {
                    const name = userName || msg.from || 'Them';
                    chatMessages.innerHTML += `<div style="text-align: left;"><p style="background: rgba(0, 212, 255, 0.2); padding: 0.8rem; border-radius: 8px; margin: 0;"><strong>${name}:</strong> ${msg.content}</p></div>`;
                }
            });

            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // AI CHATBOT FUNCTIONS
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function askAI(question) {
            const chatbox = document.getElementById('aiChatbox');
            const input = document.getElementById('aiInput');
            if (!question && input) question = input.value;
            if (!question) return;
            chatbox.innerHTML += `<div style="text-align: right;"><p style="background: rgba(0, 212, 255, 0.3); padding: 0.8rem; border-radius: 8px; margin: 0; text-align: left;"><strong>You:</strong> ${question}</p></div>`;
            const q = question.toLowerCase();
            let reply = '';

            // Simple intent handling for helpful troubleshooting
            if (q.includes('error') || q.includes('bug') || q.includes('not working') || q.includes('fail') || q.includes('crash')) {
                reply = `I can help troubleshoot. First, describe the exact error message and the steps to reproduce it. Try these quick checks:\n1) Check the browser console for errors (F12 ‚Üí Console).\n2) Reproduce the issue and note the exact text & stack trace.\n3) Isolate the problem by disabling recent changes.\n4) Try in an incognito window to rule out cache/extension issues.\nIf you paste the error text here I can suggest targeted fixes.`;
            } else if (q.startsWith('how to') || q.startsWith('how do') || q.startsWith('explain')) {
                reply = `Sure ‚Äî here's a concise guide:\n- Break the problem into small steps.\n- Search for official docs or a trusted tutorial.\n- Try a minimal reproducible example.\n- Use console logs or a debugger to inspect behavior.\nTell me which part you'd like a code example for.`;
            } else if (q.includes('debug') || q.includes('debugging')) {
                reply = `Debugging tips:\n1) Use console.log or a debugger breakpoint.\n2) Narrow down which function or component fails.\n3) Check network requests (Network tab).\n4) Add unit tests for failing logic.\nWould you like a checklist for debugging a frontend bug?`;
            } else if (q.includes('react') || q.includes('hooks')) {
                reply = `React tips: Prefer functional components + hooks. Use \`useEffect\` for side effects, memoize expensive calculations with \`useMemo\`, and extract reusable behavior into custom hooks. If you share code I can suggest a refactor.`;
            } else if (q.length < 30) {
                reply = `Good question ‚Äî can you share more details? For example, what steps lead to this, what you expected, and what actually happened?`;
            } else {
                // fallback concise helpful answer
                reply = `Thanks ‚Äî here's a clear starting point:\n- Understand the core concept.\n- Try a minimal example.\n- Read official docs and examples.\nAsk me to provide a code sample or diagnosis and I'll help.`;
            }

            setTimeout(() => {
                chatbox.innerHTML += `<div style="text-align: left;"><p style="white-space: pre-line; background: rgba(0, 212, 255, 0.2); padding: 0.8rem; border-radius: 8px; margin: 0;"><strong>ü§ñ AI:</strong> ${reply}</p></div>`;
                chatbox.scrollTop = chatbox.scrollHeight;
                if (input) input.value = '';
            }, 400);
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // VIDEO SECTION FUNCTIONS
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function loadVideoTab(tab, btn) {
            document.querySelectorAll('[id^="video"]').forEach(el => el.classList.add('hidden'));
            document.getElementById('video' + tab.charAt(0).toUpperCase() + tab.slice(1)).classList.remove('hidden');
            document.querySelectorAll('#video > div:nth-child(2) .btn').forEach(b => b.classList.remove('btn-primary'));
            document.querySelectorAll('#video > div:nth-child(2) .btn').forEach(b => b.classList.add('btn-outline'));
            try {
                const target = btn || document.activeElement;
                if (target) {
                    target.classList.remove('btn-outline');
                    target.classList.add('btn-primary');
                }
            } catch (e) {}
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // PROFESSIONAL SECTION FUNCTIONS
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function loadProfessionalTab(tab, btn) {
            document.querySelectorAll('[id^="prof"]').forEach(el => el.classList.add('hidden'));
            document.getElementById('prof' + tab.charAt(0).toUpperCase() + tab.slice(1)).classList.remove('hidden');
            document.querySelectorAll('#professional > div:nth-child(2) .btn').forEach(b => b.classList.remove('btn-primary'));
            document.querySelectorAll('#professional > div:nth-child(2) .btn').forEach(b => b.classList.add('btn-outline'));
            try {
                const target = btn || document.activeElement;
                if (target) {
                    target.classList.remove('btn-outline');
                    target.classList.add('btn-primary');
                }
            } catch (e) {}
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        // APP INITIALIZATION
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        
        function checkAuthOnLoad() {
            const savedUser = localStorage.getItem('skillBarterUser');
            const savedEmail = localStorage.getItem('skillBarterEmail');
            
            if (savedEmail) {
                document.getElementById('loginEmail').value = savedEmail;
            }
            
            if (savedUser) {
                appState.currentUser = JSON.parse(savedUser);
                loginComplete();
            }
        }
        
        document.addEventListener('DOMContentLoaded', checkAuthOnLoad);
        document.addEventListener('DOMContentLoaded', loadSocialFeed);

        // Auto-save state every 10 seconds
        setInterval(saveAppState, 10000);
    </script>

    <!-- Per-page scripts (override and migrate functions from monolith) -->
    <script src="pages/settings.js"></script>
    <script src="pages/dashboard.js"></script>
    <script src="pages/analytics.js"></script>
    <script src="pages/messages.js"></script>
    <script src="pages/professional.js"></script>
    <script src="pages/ai.js"></script>

</body>
</html>